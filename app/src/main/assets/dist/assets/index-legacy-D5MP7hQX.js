System.register(["./useTabsListener-legacy-BqsF0NKt.js","./index-legacy-CK9unWWd.js","./ViolationRecord-legacy-DIy-9cUt.js","./config-legacy-CMljs_xA.js","./index-legacy-DKq8HLyK.js","./workRequest-legacy-Dre7fj1V.js"],function(e,t){"use strict";var a,l,n,o,i,s,u,r,m,d,c,p,_,v,f,y,b,h,g,k,x,w,j,N,U,V,C,F,O,R,S,T;return{setters:[e=>{a=e.u},e=>{l=e.d,n=e.r,o=e.l,i=e.w,s=e.o,u=e.g,r=e.a,m=e.h,d=e.b,c=e.G,p=e.U,_=e.F,v=e.j,f=e.k,y=e.c,b=e.m,h=e.au,g=e.H,k=e.b0,x=e.J,w=e.i,j=e.ad,N=e._,U=e.aS,V=e.aD,C=e.aE,F=e.e},e=>{O=e.g},e=>{R=e.c},e=>{S=e.a},e=>{T=e.g}],execute:function(){const t=l({__name:"SearchForm",props:{form:{default:()=>({})},dataKey:{default:{year:"implement_year",obj_id:"obj_id"}}},emits:["update:form"],setup(e,{emit:t}){const a=e,l=t,v=n([]),f=n([{text:"进行中",value:1},{text:"已完成",value:2}]),y=o({...a.form});return i(y,e=>{l("update:form",e)},{deep:!0}),i(()=>a.form,e=>{Object.assign(y,e)},{deep:!0,immediate:!0}),s(()=>{S({is_node:"0",id:"914682",deep:1,enbase:1}).then(e=>{v.value=e.map(e=>({text:e.title,value:e.node_id}))})}),(e,t)=>{const a=c,l=p;return r(),u(_,null,[m(a,{modelValue:d(y).name,"onUpdate:modelValue":t[0]||(t[0]=e=>d(y).name=e),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"]),m(l,{value:d(y).violation_type,"onUpdate:value":t[1]||(t[1]=e=>d(y).violation_type=e),columns:v.value,label:"",placeholder:"请选择违章类型"},null,8,["value","columns"]),m(l,{value:d(y).status,"onUpdate:value":t[2]||(t[2]=e=>d(y).status=e),placeholder:"状态",columns:f.value},null,8,["value","columns"])],64)}}}),z=l({__name:"ViolationRecord",setup(e){v();const{routerPush:a}=f(),l=n({name:"",start_date:"",end_state:"",status:"",violation_type:""}),o=[{title:"违章名称",className:"three",key:"violation_event"},{title:"违章类型",className:"three",key:"treeselect_8"},{title:"违章地点",className:"three",key:"violation_place"},{title:"状态",className:"three",key:"status"},{title:"操作",key:"action"}];async function i({pageNum:e}={pageNum:1}){const t={page:e,...l.value},a=await O(t);return{total:Number(a.count)||0,data:a.data||[]}}function s(e){const t=[{label:"事件名称",value:e.violation_event},{label:"违章类型",value:e.treeselect_8},{label:"违章地点",value:e.violation_place},{label:"违章时间",value:e.violation_time},{label:"违章人",value:e.uid_user_name},{label:"处理人",value:e.violation_personnel_user_name},{label:"违章人",value:e.violation_personnel_user_name},{label:"所属部门",value:e.violation_personnel_department_id_depart_name.length>0?e.violation_personnel_department_id_depart_name:"-"},{label:"处理人",value:e.uid_user_name},{label:"违章罚款",value:e.punishment_amount},{label:"处理状态",value:R.trans("job_status_list",e.process_status)}];a("institutionalizedDetail",{detail:JSON.stringify(t)})}return(e,n)=>{const u=g,c=N;return r(),y(c,{columns:o,request:i,onOnRowClick:s,form:d(l),"onUpdate:form":n[1]||(n[1]=e=>h(l)?l.value=e:null),floating:[{icon:"search",key:"search"}]},{"cell-status":b(({row:e})=>[w("div",null,j(e?.statusObj?.label||""),1)]),"cell-action":b(({row:e})=>[m(u,{type:"primary",class:"text-12px",size:"small",onClick:k(t=>{var l;a("task-process",{fid:0,tid:0,transid:(l=e).process_inst_id,task_id:l.id})},["stop"])},{default:b(()=>[...n[2]||(n[2]=[x(" 查看 ",-1)])]),_:1},8,["onClick"])]),searchForm:b(()=>[m(t,{form:d(l),"onUpdate:form":n[0]||(n[0]=e=>h(l)?l.value=e:null)},null,8,["form"])]),_:1},8,["form"])}}}),q=l({__name:"TemplateSearchForm",props:{form:{default:()=>({})},dataKey:{default:{year:"implement_year",obj_id:"obj_id"}}},emits:["update:form"],setup(e,{emit:t}){const a=e,l=t,v=n([]),f=n([{text:"公开",value:2},{text:"私有",value:1}]),y=o({...a.form});return i(y,e=>{l("update:form",e)},{deep:!0}),i(()=>a.form,e=>{Object.assign(y,e)},{deep:!0,immediate:!0}),s(()=>{S({is_node:"0",id:"914682",deep:1,enbase:1}).then(e=>{v.value=e.map(e=>({text:e.title,value:e.node_id}))})}),(e,t)=>{const a=c,l=p;return r(),u(_,null,[m(a,{modelValue:d(y).name,"onUpdate:modelValue":t[0]||(t[0]=e=>d(y).name=e),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"]),m(l,{value:d(y).private,"onUpdate:value":t[1]||(t[1]=e=>d(y).private=e),placeholder:"状态",columns:f.value},null,8,["value","columns"])],64)}}}),K={key:0},P={key:1},D=l({__name:"ViolationTemplate",setup(e){const t=v(),{routerPush:a}=f(),l=[{title:"违章名称",key:"name",width:"20%"},{title:"状态",key:"private",width:"10%"},{title:"制作人",key:"user",width:"20%"},{title:"发布时间",key:"created_at",width:"20%"},{title:"操作",className:"two",key:"action"}],o=n({tpl:1,formid:59,start_date:"",end_date:"",private:"",name:"",status:"",set_etp_id:""});async function i({pageNum:e}={pageNum:1}){const{etp_groups:a}=t.userInfo;console.warn(a);const l={page:e,...o.value},n=await T(l);return{total:Number(n.count)||0,data:n.data||[]}}const s=[{icon:"search",key:"search"}];return(e,n)=>{const c=g,p=N;return r(),y(p,{columns:l,request:i,form:d(o),"onUpdate:form":n[1]||(n[1]=e=>h(o)?o.value=e:null),floating:s},U({"cell-private":b(({row:e})=>["1"===e.private?(r(),u("span",K,"私有")):(r(),u("span",P,"公开"))]),searchForm:b(()=>[m(q,{form:d(o),"onUpdate:form":n[0]||(n[0]=e=>h(o)?o.value=e:null)},null,8,["form"])]),_:2},[d(t)?.getPri("violation-regulations",2)?{name:"cell-action",fn:b(({row:e})=>[m(c,{type:"primary",class:"text-12px",size:"small",onClick:t=>{a("task-process",{task_id:0,app_id:13,tid:e.id})}},{default:b(()=>[...n[2]||(n[2]=[x(" 调用 ",-1)])]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["form"])}}}),J={class:"flex-center h-[100vh] w-100% items-center"},L=e("default",l({__name:"index",setup(e){const t=n("publicTemplate");a("violation-tab",e=>{t.value=e.name});const l=V(()=>({violationTemplate:D,violationRecord:z})),o=V(()=>l.value[t.value]||null);return(e,t)=>(r(),u("div",J,[(r(),y(C(o.value)))]))}}));"function"==typeof F&&F(L)}}});
