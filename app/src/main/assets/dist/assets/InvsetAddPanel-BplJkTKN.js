import{d as k,u as U,k as g,r as p,p as i,o as Y,A as C,g as y,a as c,h as l,m as u,B as I,C as E,D as M,F as x,E as B,c as F,G as N,H as T,J as A,K as S,L as q,M as w,v as L}from"./index-5kp1FiRg.js";const P={class:"content"},j=k({__name:"InvsetAddPanel",setup(G){const d=U(),{routerPush:V}=g(),o=p({year:i().format("YYYY"),mouth:i().format("MM")}),v=p(!1),r=p([]);Y(()=>{C({id:d.query.type==="1"?"SAFE-INVEST":"ENVI-INVEST",deep:1}).then(n=>{r.value=n.map(a=>({id:a.node_id,project:a.node_id,name:a.title,plan_money:"",money:"",remarks:""}))})});function f(){S({type:"add",year:o.value.year,month:o.value.mouth,id:0,cat:d.query.type,types:d.query.type,map:{year:o.value.year,month:o.value.mouth,items:r.value}}).then(()=>{q("保存成功"),V("invest-sys")}).catch(n=>{w(n.message)})}return(n,a)=>{const _=I,h=E,m=M,s=N,b=T;return c(),y("div",P,[l(m,{inset:""},{default:u(()=>[l(_,{modelValue:o.value.year,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.year=e),label:"年度",placeholder:"请选择年度",format:"YYYY"},null,8,["modelValue"]),l(_,{modelValue:o.value.mouth,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.mouth=e),label:"月份",placeholder:"请选择月份",format:"MM"},null,8,["modelValue"]),l(h,{title:"金额",value:"万元"})]),_:1}),(c(!0),y(x,null,B(r.value,e=>(c(),F(m,{key:e.id,class:"item",inset:""},{default:u(()=>[l(s,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,label:"项目名称",disabled:!0},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:e.plan_money,"onUpdate:modelValue":t=>e.plan_money=t,label:"计划资金",type:"number",placeholder:"请输入计划资金"},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:e.money,"onUpdate:modelValue":t=>e.money=t,label:"实际投入",type:"number",placeholder:"请输入实际投入"},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:e.remarks,"onUpdate:modelValue":t=>e.remarks=t,label:"备注",placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128)),l(m,{class:"item"},{default:u(()=>[l(b,{loading:v.value,type:"primary",block:"",onClick:f},{default:u(()=>[...a[2]||(a[2]=[A(" 保存 ",-1)])]),_:1},8,["loading"])]),_:1})])}}}),D=L(j,[["__scopeId","data-v-9f9c91ab"]]);export{D as I};
