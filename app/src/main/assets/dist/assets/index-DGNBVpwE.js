import{u as B}from"./useTabsListener-CnvSNM1v.js";import{d as b,k as T,u as D,r as w,c as k,a as r,m as p,i as l,g as v,ad as h,bB as P,_ as $,h as q,H as R,J as E,aD as g,o as L,aE as S,e as N}from"./index-5kp1FiRg.js";import{a as C,g as V,b as F}from"./workRequest-DyiUB1zZ.js";import{u as M}from"./useTabs-ByRrlohf.js";const j={class:"text-12px"},z={class:"text-12px"},A={class:"juify-around flex w-full"},H=["onClick"],J=["onClick"],K=["onClick"],W={key:1,class:"three color-gray mr-10px text-center"},G=b({__name:"PersonalTemplate",setup(y){const{routerPush:u}=T(),o=D(),d=[{title:"名称",className:"three",key:"name",uname:"",width:80,type:"selection"},{title:"状态",className:"three",key:"private",uname:"",width:80,editable:!1,searchable:!1},{title:"发布时间",className:"three",key:"created_at",uname:"",width:100,editable:!1,searchable:!1},{title:"操作",className:"three",key:"action",uname:"",width:150,editable:!1,searchable:!1}];async function m({pageNum:e}={pageNum:1}){const t={page:e,formid:13,tpl:1,...o.query||{}},a=await V(t);return{total:Number(a.count)||0,data:a.data||[]}}function _(e){u("task-process",{task_id:0,tid:e.id,app_id:e.appid,fid:e.fid})}const n=w(null);function i(e){P({title:"请确认是否删除模板，不可恢复！！"}).then(()=>{e.id;const t=new FormData;t.append("id",e.id),t.append("type","del"),C(t).then(()=>{n.value.loadData(!0)})})}function c(e){const t=Number(e.private)===1?0:1,a=new FormData;a.append("id",e.id),a.append("type","publish"),a.append("private",String(t)),C(a).then(()=>{e.private=String(t)})}return(e,t)=>{const a=$;return r(),k(a,{ref_key:"listRef",ref:n,columns:d,request:m},{"cell-private":p(({row:s})=>[l("div",j,h(Number(s.private)===1?"私有":"公开"),1)]),"cell-created_at":p(({row:s})=>{var f,x;return[l("div",z,h(((x=(f=s.created_at)==null?void 0:f.split(" "))==null?void 0:x[0])||""),1)]}),"cell-action":p(({row:s})=>[l("div",A,[l("div",{class:"three mr-10px",style:{"text-align":"center",color:"rgb(41, 121, 255)"},onClick:f=>_(s)}," 调用 ",8,H),l("div",{class:"three color-red mr-10px text-center",onClick:f=>c(s)},h(Number(s.private)===1?"公开":"私有"),9,J),s.isme==="1"&&Number(s.private)===1?(r(),v("div",{key:0,class:"three color-red text-center",onClick:f=>i(s)}," 删除 ",8,K)):(r(),v("div",W," 删除 "))])]),_:1},512)}}}),I={class:"text-12px"},O=b({__name:"PublicTemplate",setup(y){const{routerPush:u}=T(),o=[{title:"名称",className:"three",key:"note",uname:"",width:"25%",type:"selection"},{title:"使用说明",className:"three",key:"name",uname:"",width:"50%",editable:!1,searchable:!1},{title:"操作",className:"three",key:"action",uname:"",width:80,editable:!1,searchable:!1}],d=[{status:0,name:"进行中"},{status:1,name:"完成"},{status:2,name:"中止"}];async function m({pageNum:n}={pageNum:1}){const c=await F({page:n,tpl:1,formid:13});return{total:Number(c.count)||0,data:c.data||[]}}function _(n){u("task-process",{task_id:0,app_id:8,fid:n.id})}return(n,i)=>{const c=R,e=$;return r(),k(e,{columns:o,request:m},{"cell-status":p(({row:t})=>{var a;return[l("div",I,h(((a=d.find(s=>s.status===t.status))==null?void 0:a.name)||""),1)]}),"cell-action":p(({row:t})=>[q(c,{type:"primary",class:"text-12px",size:"small",onClick:a=>_(t)},{default:p(()=>[...i[0]||(i[0]=[E(" 调用 ",-1)])]),_:1},8,["onClick"])]),_:1})}}}),Q={class:"flex-center h-[100vh] w-100% items-center"},U=b({__name:"index",setup(y){const u=D(),o=w("");B("workRequest-tab",n=>{o.value=n.name});const d=g(()=>({publicTemplate:O,personalTemplate:G})),m=g(()=>d.value[o.value]||null),{setTabs:_}=M();return L(()=>{setTimeout(()=>{_([{title:"公共模板",name:"publicTemplate"},{title:"个人模板",name:"personalTemplate"}],u.query.actionKey||"publicTemplate")},0)}),(n,i)=>(r(),v("div",Q,[(r(),k(S(m.value)))]))}});typeof N=="function"&&N(U);export{U as default};
