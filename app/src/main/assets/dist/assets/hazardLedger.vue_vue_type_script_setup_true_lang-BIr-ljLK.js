import{d as c,k as p,r as d,c as g,a as y,m,h as f,au as t,b as s,_ as z}from"./index-5kp1FiRg.js";import{g as b}from"./healthRecord-nYYKLBYx.js";import{_ as w}from"./SearchForm.vue_vue_type_script_setup_true_lang-NNpuA64h.js";const j=c({__name:"hazardLedger",setup(k){async function o({pageNum:e,form:_}){const a=new FormData;a.append("page",e),a.append("set_etp_id",_.set_etp_id),a.append("page_size",_.page_size),a.append("cat_id",_.cat_id),a.append("search",JSON.stringify({ming_cheng:_.ming_cheng,zhi_ye_wei_hai_yin_su:_.zhi_ye_wei_hai_yin_su}));const i=await b(a);return{total:Number(i.count),data:i.data}}const{routerPush:l}=p(),n=d({set_etp_id:"",page_size:30,cat_id:4,ming_cheng:"",zhi_ye_wei_hai_yin_su:""}),u=[{icon:"search",key:"search"}];function h(e){const _=[{label:"名称",value:e.ming_cheng},{label:"可能导致的职业病",value:e.ke_neng_dao_zhi_de_zhi_ye_bing},{label:"部门",value:e.bu_men},{label:"职业危害因素",value:e.zhi_ye_wei_hai_yin_su},{label:"涉及人数",value:e.she_ji_ren_shu},{label:"职业禁忌症",value:e.zhi_ye_jin_ji_zheng},{label:"防护措施",value:e.fang_hu_cuo_shi},{label:"备注",value:e.bei_zhu!=""?e.bei_zhu:"-"}];l("siteDetail",{detail:JSON.stringify(_)})}const r=[{title:"名称",key:"ming_cheng",width:"25%"},{title:"部门",key:"bu_men",width:"20%"},{title:"职业危害",key:"zhi_ye_wei_hai_yin_su",width:"25%"},{title:"涉及人数",key:"she_ji_ren_shu",width:"20%"}];return(e,_)=>{const a=z;return y(),g(a,{form:s(n),"onUpdate:form":_[1]||(_[1]=i=>t(n)?n.value=i:null),columns:r,request:o,floating:u,onOnRowClick:h},{searchForm:m(()=>[f(w,{form:s(n),"onUpdate:form":_[0]||(_[0]=i=>t(n)?n.value=i:null),"data-key":{ming_cheng:"ming_cheng",zhi_ye_wei_hai_yin_su:"zhi_ye_wei_hai_yin_su"}},null,8,["form"])]),_:1},8,["form"])}}});export{j as _};
