System.register(["./index-legacy-CK9unWWd.js"],function(e,t){"use strict";var a,u,l,o,n,c,s,p,m;return{setters:[e=>{a=e.d,u=e.aD,l=e.c,o=e.a,n=e.au,c=e.b,s=e.bu,p=e.aB,m=e.ag}],execute:function(){e("_",a({__name:"v-uploader",props:{multiple:{type:Boolean},maxCount:{},value:{},modelValue:{},accept:{}},emits:["update:value","update:modelValue"],setup(e,{emit:t}){const a=e,i=t,d=u({get:()=>a.value||a.modelValue||[],set(e){i("update:value",e),i("update:modelValue",e)}}),r=u(()=>d.value.map((e,t)=>"object"==typeof e&&e.url?{...e,status:e.status||"done"}:{url:e,status:"done",uid:`${Date.now()}_${t}`}));function v(e){console.log("file",e.file.type);const t=e.file.type.startsWith("image/");console.log("isImage",t);const u=new FormData;u.append("file",e.file),e.content,r.value,a.maxCount,p.post(t?"/uploader/image":"/uploader/doc",u).then(e=>{m("上传成功");const t=e.data?.url||e.url||"";if(1===a.maxCount)d.value=[t];else{const e=[...d.value];1===a.maxCount?e[0]=t:e.push(t),d.value=e}}).catch(()=>{m("上传失败")})}function f(e,t){const a=t.index,u=[...d.value];u.splice(a,1),d.value=u}return(t,a)=>{const u=s;return o(),l(u,{modelValue:c(r),"onUpdate:modelValue":a[0]||(a[0]=e=>n(r)?r.value=e:null),multiple:e.multiple,"after-read":v,"max-count":e.maxCount,accept:e.accept||"*",onDelete:f},null,8,["modelValue","multiple","max-count","accept"])}}}))}}});
