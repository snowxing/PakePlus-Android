import{aB as v,d as w,r as f,l as b,w as h,o as x,c as y,a as k,G as C,k as S,m as d,h as V,au as _,b as p,i as B,ad as F,_ as N,e as g}from"./index-5kp1FiRg.js";async function R(l){return v.get("/ensafe/warning_list",{params:l})}const D=w({__name:"warningSignSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(l,{emit:c}){const m=l,n=c;f([]);const o=b({...m.form});return h(o,s=>{n("update:form",s)},{deep:!0}),x(()=>{}),(s,i)=>{const u=C;return k(),y(u,{modelValue:o.name,"onUpdate:modelValue":i[0]||(i[0]=e=>o.name=e),type:"text",name:"text",placeholder:"请输入警示标志名称"},null,8,["modelValue"])}}}),O=w({__name:"warningSign",setup(l){async function c({pageNum:e,form:a}){const t=await R({page:e,...a});return{total:Number(t.count),data:t.data}}const{routerPush:m}=S(),n=f({field:"",name:"",type:0}),o=[{icon:"search",key:"search"}];function s(e){var t;const a=[{label:"编号",value:e.no},{label:"警示标志名称",value:e.warning_name},{label:"警示标志类型",value:(t=u.value)==null?void 0:t[e.warning_type]},{label:"备注",value:e.remarks},{label:"图样附件",value:e.files.split(","),renderType:"image"}];m("siteDetail",{detail:JSON.stringify(a)})}const i=[{title:"警示标志名称",key:"warning_name",width:"30%"},{title:"编号",key:"no",width:"30%"},{title:"类型",key:"warning_type",width:"20%"}];let u=f({1:"禁止标志",2:"警告标志",3:"指令标志",4:"提示标志"});return(e,a)=>{const t=N;return k(),y(t,{form:p(n),"onUpdate:form":a[1]||(a[1]=r=>_(n)?n.value=r:null),columns:i,request:c,floating:o,onOnRowClick:s},{"cell-warning_type":d(({row:r})=>[B("div",null,F(p(u)[r.warning_type]),1)]),searchForm:d(()=>[V(D,{form:p(n),"onUpdate:form":a[0]||(a[0]=r=>_(n)?n.value=r:null)},null,8,["form"])]),_:1},8,["form"])}}});typeof g=="function"&&g(O);export{O as default};
