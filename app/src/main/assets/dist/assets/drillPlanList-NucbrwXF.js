import{d as _,r as y,l as b,w as h,o as v,c as g,a as k,G as w,k as x,m as c,h as D,au as p,b as d,i as C,ad as V,_ as F,p as N,e as f}from"./index-5kp1FiRg.js";import{g as R}from"./baoyangManagement-Bkj08ZRC.js";const Y=_({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(m,{emit:u}){const i=m,t=u;y([]);const o=b({...i.form});return h(o,r=>{t("update:form",r)},{deep:!0}),v(()=>{}),(r,s)=>{const e=w;return k(),g(e,{modelValue:o.name,"onUpdate:modelValue":s[0]||(s[0]=a=>o.name=a),type:"text",name:"text",placeholder:"请输入演练名称"},null,8,["modelValue"])}}}),B=_({__name:"drillPlanList",props:{type:{}},setup(m){async function u({pageNum:e,form:a}){const l=await R({page:e,...a});return{total:Number(l.count),data:l.data}}const{routerPush:i}=x(),t=y({id:"",type:"",name:"",equipment_id:0}),o=[{icon:"search",key:"search"}];function r(e){var l;console.log(e.status);const a=[{label:"演练名称",value:e.drill_name},{label:"组织部门",value:e.department},{label:"演练地点",value:e.area_name},{label:"计划时间",value:e.plan_time},{label:"负责人",value:e.staff},{label:"工号",value:(l=e==null?void 0:e.staff_account)==null?void 0:l.slice(4)},{label:"演练方案",value:[e.files_programme],renderType:"image"},{label:"备注",value:e.remarks},{label:"附件",value:[e.files],renderType:"image"}];i("emergencyDetail",{detail:JSON.stringify(a)})}const s=[{title:"演练名称",key:"drill_name",width:"25%"},{title:"地点",key:"area_name",width:"20%"},{title:"组织部门",key:"department",width:"20%"},{title:"计划时间",key:"plan_time",width:"20%",render:e=>e&&!e.startsWith("0000")?N(e).format("YYYY-MM-DD"):e}];return(e,a)=>{const l=F;return k(),g(l,{form:d(t),"onUpdate:form":a[1]||(a[1]=n=>p(t)?t.value=n:null),columns:s,request:u,floating:o,onOnRowClick:r},{"cell-year":c(({row:n})=>[C("div",null,V("".concat(n.year).concat(n.month)),1)]),searchForm:c(()=>[D(Y,{form:d(t),"onUpdate:form":a[0]||(a[0]=n=>p(t)?t.value=n:null)},null,8,["form"])]),_:1},8,["form"])}}});typeof f=="function"&&f(B);export{B as default};
