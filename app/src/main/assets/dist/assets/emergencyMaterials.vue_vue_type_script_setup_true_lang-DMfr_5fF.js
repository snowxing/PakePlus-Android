import{d as g,l as b,w as c,o as h,g as v,a as f,h as i,G as k,F as y,r as w,k as x,c as z,m as F,au as p,b as d,_ as V,b8 as C}from"./index-5kp1FiRg.js";const D=g({__name:"materialsSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(m,{emit:n}){const _=m,r=n,t=b({..._.form});return c(t,o=>{r("update:form",o)},{deep:!0}),c(()=>_.form,o=>{Object.assign(t,o)},{deep:!0,immediate:!0}),h(()=>{}),(o,s)=>{const e=k;return f(),v(y,null,[i(e,{modelValue:t.ming_cheng,"onUpdate:modelValue":s[0]||(s[0]=a=>t.ming_cheng=a),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"]),i(e,{modelValue:t.bu_men,"onUpdate:modelValue":s[1]||(s[1]=a=>t.bu_men=a),type:"text",name:"text",label:"",placeholder:"请输入部门"},null,8,["modelValue"])],64)}}}),N=g({__name:"emergencyMaterials",setup(m){const n=w({name:"",staff_name:"",page_size:30,set_etp_id:"",cat_id:11,ming_cheng:"",bu_men:""});async function _({pageNum:e,form:a}){const l=new FormData;l.append("page",e),l.append("set_etp_id",a.set_etp_id),l.append("page_size",a.page_size),l.append("cat_id",a.cat_id),l.append("search",JSON.stringify({ming_cheng:a.ming_cheng,bu_men:a.bu_men}));const u=await C(l);return{total:Number(u.count),data:u.data}}const{routerPush:r}=x(),t=[{icon:"search",key:"search"}];function o(e){const a=[{label:"公司",value:e.etp_id_name},{label:"部门",value:e.bu_men},{label:"区域",value:e.qu_yu},{label:"具体位置",value:e.ju_ti_wei_zhi},{label:"坐标",value:e.zuo_biao},{label:"型号",value:e.xing_hao},{label:"数量",value:e.shu_liang},{label:"管理责任人",value:e.guan_li_ze_ren_ren},{label:"工号",value:e.gong_hao},{label:"备注",value:e.bei_zhu}];r("emergencyDetail",{detail:JSON.stringify(a)})}const s=[{title:"名称",key:"ming_cheng"},{title:"部门",key:"bu_men"},{title:"具体位置",key:"ju_ti_wei_zhi"}];return(e,a)=>{const l=V;return f(),z(l,{form:d(n),"onUpdate:form":a[1]||(a[1]=u=>p(n)?n.value=u:null),columns:s,request:_,floating:t,onOnRowClick:o},{searchForm:F(()=>[i(D,{form:d(n),"onUpdate:form":a[0]||(a[0]=u=>p(n)?n.value=u:null),"data-key":{ming_cheng:"ming_cheng"}},null,8,["form"])]),_:1},8,["form"])}}});export{N as _};
