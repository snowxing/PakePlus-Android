System.register(["./install-legacy-BpR_-QHD.js"],function(t,e){"use strict";var i,n,a,o,s,r,l,h,u,c,p,d,g,m,y,f,v,b,S,_,x,I,M,w,A,D,N,P,k,L,O,T,C,E,z,G,V,R,Y,X,F,H,B,W,U,Z,q,J,j,K,Q;return{setters:[t=>{i=t._,n=t.a0,a=t.a1,o=t.a2,s=t.Y,r=t.a3,l=t.a4,h=t.K,u=t.L,c=t.J,p=t.Q,d=t.a5,g=t.a6,m=t.F,y=t.O,f=t.N,v=t.a7,b=t.a8,S=t.a9,_=t.aa,x=t.ab,I=t.ac,M=t.ad,w=t.ae,A=t.B,D=t.af,N=t.n,P=t.ag,k=t.ah,L=t.m,O=t.T,T=t.ai,C=t.h,E=t.M,z=t.aj,G=t.H,V=t.ak,R=t.al,Y=t.Z,X=t.am,F=t.an,H=t.A,B=t.ao,W=t.ap,U=t.aq,Z=t.ar,q=t.S,J=t.as,j=t.at,K=t.au,Q=t.av}],execute:function(){t({i:function(t){t.registerChartView(At),t.registerSeriesModel(e),t.registerLayout(Dt("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",i)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Q("line"))},p:Dt});var e=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return i(e,t),e.prototype.getInitialData=function(t){return n(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new a,i=o("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(i),i.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),r="none"===n?"circle":n,l=.8*t.itemHeight,h=o(r,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);e.add(h),h.setStyle(t.itemStyle);var u="inherit"===t.iconRotate?s:t.iconRotate||0;return h.rotation=u*Math.PI/180,h.setOrigin([t.itemWidth/2,t.itemHeight/2]),r.indexOf("empty")>-1&&(h.style.stroke=h.style.fill,h.style.fill="#fff",h.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(s),$=t("a",function(t){function e(e,i,n,a){var o=t.call(this)||this;return o.updateData(e,i,n,a),o}return i(e,t),e.prototype._createSymbol=function(t,e,i,n,a){this.removeAll();var s=o(t,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),s.drift=tt,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){r(this.childAt(0))},e.prototype.downplay=function(){l(this.childAt(0))},e.prototype.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},e.prototype.setDraggable=function(t,e){var i=this.childAt(0);i.draggable=t,i.cursor=!e&&t?"move":i.cursor},e.prototype.updateData=function(t,i,n,a){this.silent=!1;var o=t.getItemVisual(i,"symbol")||"circle",s=t.hostModel,r=e.getSymbolSize(t,i),l=o!==this._symbolType,p=a&&a.disableAnimation;if(l){var d=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(o,t,i,r,d)}else{(m=this.childAt(0)).silent=!1;var g={scaleX:r[0]/2,scaleY:r[1]/2};p?m.attr(g):h(m,g,s,i),u(m)}if(this._updateCommon(t,i,r,n,a),l){var m=this.childAt(0);p||(g={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:m.style.opacity}},m.scaleX=m.scaleY=0,m.style.opacity=0,c(m,g,s,i))}p&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,e,i,n,a){var o,s,r,l,h,u,c,v,b,S=this.childAt(0),x=t.hostModel;if(n&&(o=n.emphasisItemStyle,s=n.blurItemStyle,r=n.selectItemStyle,l=n.focus,h=n.blurScope,c=n.labelStatesModels,v=n.hoverScale,b=n.cursorStyle,u=n.emphasisDisabled),!n||t.hasItemOption){var I=n&&n.itemModel?n.itemModel:t.getItemModel(e),M=I.getModel("emphasis");o=M.getModel("itemStyle").getItemStyle(),r=I.getModel(["select","itemStyle"]).getItemStyle(),s=I.getModel(["blur","itemStyle"]).getItemStyle(),l=M.get("focus"),h=M.get("blurScope"),u=M.get("disabled"),c=p(I),v=M.getShallow("scale"),b=I.getShallow("cursor")}var w=t.getItemVisual(e,"symbolRotate");S.attr("rotation",(w||0)*Math.PI/180||0);var A=d(t.getItemVisual(e,"symbolOffset"),i);A&&(S.x=A[0],S.y=A[1]),b&&S.attr("cursor",b);var D=t.getItemVisual(e,"style"),N=D.fill;if(S instanceof g){var P=S.style;S.useStyle(m({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},D))}else S.__isEmptyBrush?S.useStyle(m({},D)):S.useStyle(D),S.style.decal=null,S.setColor(N,a&&a.symbolInnerColor),S.style.strokeNoScale=!0;var k=t.getItemVisual(e,"liftZ"),L=this._z2;null!=k?null==L&&(this._z2=S.z2,S.z2+=k):null!=L&&(S.z2=L,this._z2=null);var O=a&&a.useNameLabel;y(S,c,{labelFetcher:x,labelDataIndex:e,defaultText:function(e){return O?t.getName(e):_(t,e)},inheritColor:N,defaultOpacity:D.opacity}),this._sizeX=i[0]/2,this._sizeY=i[1]/2;var T=S.ensureState("emphasis");T.style=o,S.ensureState("select").style=r,S.ensureState("blur").style=s;var C=null==v||!0===v?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;T.scaleX=this._sizeX*C,T.scaleY=this._sizeY*C,this.setSymbolScale(1),f(this,l,h,u)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,i){var n=this.childAt(0),a=v(this).dataIndex,o=i&&i.animation;if(this.silent=n.silent=!0,i&&i.fadeLabel){var s=n.getTextContent();s&&b(s,{style:{opacity:0}},e,{dataIndex:a,removeOpt:o,cb:function(){n.removeTextContent()}})}else n.removeTextContent();b(n,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:a,cb:t,removeOpt:o})},e.getSymbolSize=function(t,e){return S(t.getItemVisual(e,"symbolSize"))},e}(a));function tt(t,e){this.parent.drift(t,e)}function et(t,e,i,n){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(n.isIgnore&&n.isIgnore(i))&&!(n.clipShape&&!n.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(i,"symbol")}function it(t){return null==t||I(t)||(t={isIgnore:t}),t||{}}function nt(t){var e=t.hostModel,i=e.getModel("emphasis");return{emphasisItemStyle:i.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:i.get("focus"),blurScope:i.get("blurScope"),emphasisDisabled:i.get("disabled"),hoverScale:i.get("scale"),labelStatesModels:p(e),cursorStyle:e.get("cursor")}}var at=t("S",function(){function t(t){this.group=new a,this._SymbolCtor=t||$}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=it(e);var i=this.group,n=t.hostModel,a=this._data,o=this._SymbolCtor,s=e.disableAnimation,r=nt(t),l={disableAnimation:s},u=e.getSymbolPoint||function(e){return t.getItemLayout(e)};a||i.removeAll(),t.diff(a).add(function(n){var a=u(n);if(et(t,a,n,e)){var s=new o(t,n,r,l);s.setPosition(a),t.setItemGraphicEl(n,s),i.add(s)}}).update(function(c,p){var d=a.getItemGraphicEl(p),g=u(c);if(et(t,g,c,e)){var m=t.getItemVisual(c,"symbol")||"circle",y=d&&d.getSymbolType&&d.getSymbolType();if(!d||y&&y!==m)i.remove(d),(d=new o(t,c,r,l)).setPosition(g);else{d.updateData(t,c,r,l);var f={x:g[0],y:g[1]};s?d.attr(f):h(d,f,n)}i.add(d),t.setItemGraphicEl(c,d)}else i.remove(d)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&e.fadeOut(function(){i.remove(e)},n)}).execute(),this._getSymbolPoint=u,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(e,i){var n=t._getSymbolPoint(i);e.setPosition(n),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=nt(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,i){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=it(i);for(var a=t.start;a<t.end;a++){var o=e.getItemLayout(a);if(et(e,o,a,i)){var s=new this._SymbolCtor(e,a,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),e.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},t.prototype.eachRendered=function(t){x(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)},i.hostModel)}):e.removeAll()},t}());function ot(t,e,i){var n=t.getBaseAxis(),a=t.getOtherAxis(n),o=function(t,e){var i=0,n=t.scale.getExtent();return"start"===e?i=n[0]:"end"===e?i=n[1]:A(e)&&!isNaN(e)?i=e:n[0]>0?i=n[0]:n[1]<0&&(i=n[1]),i}(a,i),s=n.dim,r=a.dim,l=e.mapDimension(r),h=e.mapDimension(s),u="x"===r||"radius"===r?1:0,c=M(t.dimensions,function(t){return e.mapDimension(t)}),p=!1,d=e.getCalculationInfo("stackResultDimension");return w(e,c[0])&&(p=!0,c[0]=d),w(e,c[1])&&(p=!0,c[1]=d),{dataDimsForPoint:c,valueStart:o,valueAxisDim:r,baseAxisDim:s,stacked:!!p,valueDim:l,baseDim:h,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function st(t,e,i,n){var a=NaN;t.stacked&&(a=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(a)&&(a=t.valueStart);var o=t.baseDataOffset,s=[];return s[o]=i.get(t.baseDim,n),s[1-o]=a,e.dataToPoint(s)}var rt=Math.min,lt=Math.max;function ht(t,e){return isNaN(t)||isNaN(e)}function ut(t,e,i,n,a,o,s,r,l){for(var h,u,c,p,d,g,m=i,y=0;y<n;y++){var f=e[2*m],v=e[2*m+1];if(m>=a||m<0)break;if(ht(f,v)){if(l){m+=o;continue}break}if(m===i)t[o>0?"moveTo":"lineTo"](f,v),c=f,p=v;else{var b=f-h,S=v-u;if(b*b+S*S<.5){m+=o;continue}if(s>0){for(var _=m+o,x=e[2*_],I=e[2*_+1];x===f&&I===v&&y<n;)y++,m+=o,x=e[2*(_+=o)],I=e[2*_+1],b=(f=e[2*m])-h,S=(v=e[2*m+1])-u;var M=y+1;if(l)for(;ht(x,I)&&M<n;)M++,x=e[2*(_+=o)],I=e[2*_+1];var w=.5,A=0,D=0,N=void 0,P=void 0;if(M>=n||ht(x,I))d=f,g=v;else{A=x-h,D=I-u;var k=f-h,L=x-f,O=v-u,T=I-v,C=void 0,E=void 0;if("x"===r){var z=A>0?1:-1;d=f-z*(C=Math.abs(k))*s,g=v,N=f+z*(E=Math.abs(L))*s,P=v}else if("y"===r){var G=D>0?1:-1;d=f,g=v-G*(C=Math.abs(O))*s,N=f,P=v+G*(E=Math.abs(T))*s}else C=Math.sqrt(k*k+O*O),d=f-A*s*(1-(w=(E=Math.sqrt(L*L+T*T))/(E+C))),g=v-D*s*(1-w),P=v+D*s*w,N=rt(N=f+A*s*w,lt(x,f)),P=rt(P,lt(I,v)),N=lt(N,rt(x,f)),g=v-(D=(P=lt(P,rt(I,v)))-v)*C/E,d=rt(d=f-(A=N-f)*C/E,lt(h,f)),g=rt(g,lt(u,v)),N=f+(A=f-(d=lt(d,rt(h,f))))*E/C,P=v+(D=v-(g=lt(g,rt(u,v))))*E/C}t.bezierCurveTo(c,p,d,g,f,v),c=N,p=P}else t.lineTo(f,v)}h=f,u=v,m+=o}return y}var ct=function(){this.smooth=0,this.smoothConstraint=!0},pt=function(t){function e(e){var i=t.call(this,e)||this;return i.type="ec-polyline",i}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ct},e.prototype.buildPath=function(t,e){var i=e.points,n=0,a=i.length/2;if(e.connectNulls){for(;a>0&&ht(i[2*a-2],i[2*a-1]);a--);for(;n<a&&ht(i[2*n],i[2*n+1]);n++);}for(;n<a;)n+=ut(t,i,n,a,a,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,n,a=this.path.data,o=N.CMD,s="x"===e,r=[],l=0;l<a.length;){var h=void 0,u=void 0,c=void 0,p=void 0,d=void 0,g=void 0,m=void 0;switch(a[l++]){case o.M:i=a[l++],n=a[l++];break;case o.L:if(h=a[l++],u=a[l++],(m=s?(t-i)/(h-i):(t-n)/(u-n))<=1&&m>=0){var y=s?(u-n)*m+n:(h-i)*m+i;return s?[t,y]:[y,t]}i=h,n=u;break;case o.C:h=a[l++],u=a[l++],c=a[l++],p=a[l++],d=a[l++],g=a[l++];var f=s?P(i,h,c,d,t,r):P(n,u,p,g,t,r);if(f>0)for(var v=0;v<f;v++){var b=r[v];if(b<=1&&b>=0)return y=s?k(n,u,p,g,b):k(i,h,c,d,b),s?[t,y]:[y,t]}i=d,n=g}}},e}(L),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(ct),gt=t("E",function(t){function e(e){var i=t.call(this,e)||this;return i.type="ec-polygon",i}return i(e,t),e.prototype.getDefaultShape=function(){return new dt},e.prototype.buildPath=function(t,e){var i=e.points,n=e.stackedOnPoints,a=0,o=i.length/2,s=e.smoothMonotone;if(e.connectNulls){for(;o>0&&ht(i[2*o-2],i[2*o-1]);o--);for(;a<o&&ht(i[2*a],i[2*a+1]);a++);}for(;a<o;){var r=ut(t,i,a,o,o,1,e.smooth,s,e.connectNulls);ut(t,n,a+r-1,r,o,-1,e.stackedOnSmooth,s,e.connectNulls),a+=r+1,t.closePath()}},e}(L));function mt(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function yt(t){for(var e=1/0,i=1/0,n=-1/0,a=-1/0,o=0;o<t.length;){var s=t[o++],r=t[o++];isNaN(s)||(e=Math.min(s,e),n=Math.max(s,n)),isNaN(r)||(i=Math.min(r,i),a=Math.max(r,a))}return[[e,i],[n,a]]}function ft(t,e){var i=yt(t),n=i[0],a=i[1],o=yt(e),s=o[0],r=o[1];return Math.max(Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]),Math.abs(a[0]-r[0]),Math.abs(a[1]-r[1]))}function vt(t){return A(t)?t:t?.5:0}function bt(t,e,i,n,a){var o=i.getBaseAxis(),s="x"===o.dim||"radius"===o.dim?0:1,r=[],l=0,h=[],u=[],c=[],p=[];if(a){for(l=0;l<t.length;l+=2){var d=e||t;isNaN(d[l])||isNaN(d[l+1])||p.push(t[l],t[l+1])}t=p}for(l=0;l<t.length-2;l+=2)switch(c[0]=t[l+2],c[1]=t[l+3],u[0]=t[l],u[1]=t[l+1],r.push(u[0],u[1]),n){case"end":h[s]=c[s],h[1-s]=u[1-s],r.push(h[0],h[1]);break;case"middle":var g=(u[s]+c[s])/2,m=[];h[s]=m[s]=g,h[1-s]=u[1-s],m[1-s]=c[1-s],r.push(h[0],h[1]),r.push(m[0],m[1]);break;default:h[s]=u[s],h[1-s]=c[1-s],r.push(h[0],h[1])}return r.push(t[l++],t[l++]),r}function St(t,e,i){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var a,o,s=n.length-1;s>=0;s--){var r=t.getDimensionInfo(n[s].dimension);if("x"===(a=r&&r.coordDim)||"y"===a){o=n[s];break}}if(o){var l=e.getAxis(a),h=M(o.stops,function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}}),u=h.length,c=o.outerColors.slice();u&&h[0].coord>h[u-1].coord&&(h.reverse(),c.reverse());var p=function(t,e){var i,n,a=[],o=t.length;function s(t,e,i){var n=t.coord,a=(i-n)/(e.coord-n);return{coord:i,color:J(a,[t.color,e.color])}}for(var r=0;r<o;r++){var l=t[r],h=l.coord;if(h<0)i=l;else{if(h>e){n?a.push(s(n,l,e)):i&&a.push(s(i,l,0),s(i,l,e));break}i&&(a.push(s(i,l,0)),i=null),a.push(l),n=l}}return a}(h,"x"===a?i.getWidth():i.getHeight()),d=p.length;if(!d&&u)return h[0].coord<0?c[1]?c[1]:h[u-1].color:c[0]?c[0]:h[0].color;var g=p[0].coord-10,m=p[d-1].coord+10,y=m-g;if(y<.001)return"transparent";H(p,function(t){t.offset=(t.coord-g)/y}),p.push({offset:d?p[d-1].offset:.5,color:c[1]||"transparent"}),p.unshift({offset:d?p[0].offset:.5,color:c[0]||"transparent"});var f=new B(0,0,0,0,p,!0);return f[a]=g,f[a+"2"]=m,f}}}function _t(t,e,i){var n=t.get("showAllSymbol"),a="auto"===n;if(!n||a){var o=i.getAxesByScale("ordinal")[0];if(o&&(!a||!function(t,e){var i=t.getExtent(),n=Math.abs(i[1]-i[0])/t.scale.count();isNaN(n)&&(n=0);for(var a=e.count(),o=Math.max(1,Math.round(a/5)),s=0;s<a;s+=o)if(1.5*$.getSymbolSize(e,s)[t.isHorizontal()?1:0]>n)return!1;return!0}(o,e))){var s=e.mapDimension(o.dim),r={};return H(o.getViewLabels(),function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);r[e]=1}),function(t){return!r.hasOwnProperty(e.get(s,t))}}}}function xt(t,e){return isNaN(t)||isNaN(e)}function It(t,e){return[t[2*e],t[2*e+1]]}function Mt(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<q.length;e++)if(t.get([q[e],"endLabel","show"]))return!0;return!1}function wt(t,e,i,n){if(W(e,"cartesian2d")){var a=n.getModel("endLabel"),o=a.get("valueAnimation"),s=n.getData(),r={lastFrameIndex:0},l=Mt(n)?function(i,n){t._endLabelOnDuring(i,n,s,r,o,a,e)}:null,h=e.getBaseAxis().isHorizontal(),u=U(e,i,n,function(){var e=t._endLabel;e&&i&&null!=r.originalX&&e.attr({x:r.originalX,y:r.originalY})},l);if(!n.get("clip",!0)){var c=u.shape,p=Math.max(c.width,c.height);h?(c.y-=p,c.height+=2*p):(c.x-=p,c.width+=2*p)}return l&&l(1,u),u}return Z(e,i,n)}var At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){var t=new a,e=new at;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t,this._changePolyState=O(this._changePolyState,this)},e.prototype.render=function(t,e,i){var n=t.coordinateSystem,a=this.group,o=t.getData(),s=t.getModel("lineStyle"),r=t.getModel("areaStyle"),l=o.getLayout("points")||[],h="polar"===n.type,u=this._coordSys,p=this._symbolDraw,d=this._polyline,g=this._polygon,m=this._lineGroup,y=!e.ssr&&t.get("animation"),b=!r.isEmpty(),S=r.get("origin"),_=ot(n,o,S),x=b&&function(t,e,i){if(!i.valueDim)return[];for(var n=e.count(),a=D(2*n),o=0;o<n;o++){var s=st(i,t,e,o);a[2*o]=s[0],a[2*o+1]=s[1]}return a}(n,o,_),I=t.get("showSymbol"),M=t.get("connectNulls"),w=I&&!h&&_t(t,o,n),A=this._data;A&&A.eachItemGraphicEl(function(t,e){t.__temp&&(a.remove(t),A.setItemGraphicEl(e,null))}),I||p.remove(),a.add(m);var N,P=!h&&t.get("step");n&&n.getArea&&t.get("clip",!0)&&(null!=(N=n.getArea()).width?(N.x-=.1,N.y-=.1,N.width+=.2,N.height+=.2):N.r0&&(N.r0-=.5,N.r+=.5)),this._clipShapeForSymbol=N;var k=St(o,n,i)||o.getVisual("style")[o.getVisual("drawType")];if(d&&u.type===n.type&&P===this._step){b&&!g?g=this._newPolygon(l,x):g&&!b&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(t,n,T(k));var L=m.getClipPath();if(L){var O=wt(this,n,!1,t);c(L,{shape:O.shape},t)}else m.setClipPath(wt(this,n,!0,t));I&&p.updateData(o,{isIgnore:w,clipShape:N,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),mt(this._stackedOnPoints,x)&&mt(this._points,l)||(y?this._doUpdateAnimation(o,x,n,i,P,S,M):(P&&(x&&(x=bt(x,l,n,P,M)),l=bt(l,null,n,P,M)),d.setShape({points:l}),g&&g.setShape({points:l,stackedOnPoints:x})))}else I&&p.updateData(o,{isIgnore:w,clipShape:N,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),y&&this._initSymbolLabelAnimation(o,n,N),P&&(x&&(x=bt(x,l,n,P,M)),l=bt(l,null,n,P,M)),d=this._newPolyline(l),b?g=this._newPolygon(l,x):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(t,n,T(k)),m.setClipPath(wt(this,n,!0,t));var z=t.getModel("emphasis"),G=z.get("focus"),V=z.get("blurScope"),R=z.get("disabled");d.useStyle(C(s.getLineStyle(),{fill:"none",stroke:k,lineJoin:"bevel"})),E(d,t,"lineStyle"),d.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(d.getState("emphasis").style.lineWidth=+d.style.lineWidth+1),v(d).seriesIndex=t.seriesIndex,f(d,G,V,R);var Y=vt(t.get("smooth")),X=t.get("smoothMonotone");if(d.setShape({smooth:Y,smoothMonotone:X,connectNulls:M}),g){var F=o.getCalculationInfo("stackedOnSeries"),H=0;g.useStyle(C(r.getAreaStyle(),{fill:k,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),F&&(H=vt(F.get("smooth"))),g.setShape({smooth:Y,stackedOnSmooth:H,smoothMonotone:X,connectNulls:M}),E(g,t,"areaStyle"),v(g).seriesIndex=t.seriesIndex,f(g,G,V,R)}var B=this._changePolyState;o.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=B)}),this._polyline.onHoverStateChange=B,this._data=o,this._coordSys=n,this._stackedOnPoints=x,this._points=l,this._step=P,this._valueOrigin=S,t.get("triggerLineEvent")&&(this.packEventData(t,d),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,e){v(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,i,n){var a=t.getData(),o=z(a,n);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var s=a.getLayout("points"),r=a.getItemGraphicEl(o);if(!r){var l=s[2*o],h=s[2*o+1];if(isNaN(l)||isNaN(h))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,h))return;var u=t.get("zlevel")||0,c=t.get("z")||0;(r=new $(a,o)).x=l,r.y=h,r.setZ(u,c);var p=r.getSymbolPath().getTextContent();p&&(p.zlevel=u,p.z=c,p.z2=this._polyline.z2+1),r.__temp=!0,a.setItemGraphicEl(o,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else G.prototype.highlight.call(this,t,e,i,n)},e.prototype.downplay=function(t,e,i,n){var a=t.getData(),o=z(a,n);if(this._changePolyState("normal"),null!=o&&o>=0){var s=a.getItemGraphicEl(o);s&&(s.__temp?(a.setItemGraphicEl(o,null),this.group.remove(s)):s.downplay())}else G.prototype.downplay.call(this,t,e,i,n)},e.prototype._changePolyState=function(t){var e=this._polygon;V(this._polyline,t),e&&V(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new pt({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new gt({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,e,i){var n,a,o=e.getBaseAxis(),s=o.inverse;"cartesian2d"===e.type?(n=o.isHorizontal(),a=!1):"polar"===e.type&&(n="angle"===o.dim,a=!0);var r=t.hostModel,l=r.get("animationDuration");R(l)&&(l=l(null));var h=r.get("animationDelay")||0,u=R(h)?h(null):h;t.eachItemGraphicEl(function(t,o){var r=t;if(r){var c=[t.x,t.y],p=void 0,d=void 0,g=void 0;if(i)if(a){var m=i,y=e.pointToCoord(c);n?(p=m.startAngle,d=m.endAngle,g=-y[1]/180*Math.PI):(p=m.r0,d=m.r,g=y[0])}else{var f=i;n?(p=f.x,d=f.x+f.width,g=t.x):(p=f.y+f.height,d=f.y,g=t.y)}var v=d===p?0:(g-p)/(d-p);s&&(v=1-v);var b=R(h)?h(o):l*v+u,S=r.getSymbolPath(),_=S.getTextContent();r.attr({scaleX:0,scaleY:0}),r.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:b}),S.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,i){var n=t.getModel("endLabel");if(Mt(t)){var a=t.getData(),o=this._polyline,s=a.getLayout("points");if(!s)return o.removeTextContent(),void(this._endLabel=null);var r=this._endLabel;r||((r=this._endLabel=new Y({z2:200})).ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var l=function(t){for(var e=t.length/2;e>0&&xt(t[2*e-2],t[2*e-1]);e--);return e-1}(s);l>=0&&(y(o,p(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:l,defaultText:function(t,e,i){return null!=i?j(a,i):_(a,t)},enableTextSetter:!0},function(t,e){var i=e.getBaseAxis(),n=i.isHorizontal(),a=i.inverse,o=n?a?"right":"left":"center",s=n?"middle":a?"top":"bottom";return{normal:{align:t.get("align")||o,verticalAlign:t.get("verticalAlign")||s}}}(n,e)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,i,n,a,o,s){var r=this._endLabel,l=this._polyline;if(r){t<1&&null==n.originalX&&(n.originalX=r.x,n.originalY=r.y);var h=i.getLayout("points"),u=i.hostModel,c=u.get("connectNulls"),p=o.get("precision"),d=o.get("distance")||0,g=s.getBaseAxis(),m=g.isHorizontal(),y=g.inverse,f=e.shape,v=y?m?f.x:f.y+f.height:m?f.x+f.width:f.y,b=(m?d:0)*(y?-1:1),S=(m?0:-d)*(y?-1:1),_=m?"x":"y",x=function(t,e,i){for(var n,a,o=t.length/2,s="x"===i?0:1,r=0,l=-1,h=0;h<o;h++)if(a=t[2*h+s],!isNaN(a)&&!isNaN(t[2*h+1-s]))if(0!==h){if(n<=e&&a>=e||n>=e&&a<=e){l=h;break}r=h,n=a}else n=a;return{range:[r,l],t:(e-n)/(a-n)}}(h,v,_),I=x.range,M=I[1]-I[0],w=void 0;if(M>=1){if(M>1&&!c){var A=It(h,I[0]);r.attr({x:A[0]+b,y:A[1]+S}),a&&(w=u.getRawValue(I[0]))}else{(A=l.getPointOn(v,_))&&r.attr({x:A[0]+b,y:A[1]+S});var D=u.getRawValue(I[0]),N=u.getRawValue(I[1]);a&&(w=X(i,p,D,N,x.t))}n.lastFrameIndex=I[0]}else{var P=1===t||n.lastFrameIndex>0?I[0]:0;A=It(h,P),a&&(w=u.getRawValue(P)),r.attr({x:A[0]+b,y:A[1]+S})}if(a){var k=F(r);"function"==typeof k.setLabelText&&k.setLabelText(w)}}},e.prototype._doUpdateAnimation=function(t,e,i,n,a,o,s){var r=this._polyline,l=this._polygon,u=t.hostModel,c=function(t,e,i,n,a,o,s){for(var r=function(t,e){var i=[];return e.diff(t).add(function(t){i.push({cmd:"+",idx:t})}).update(function(t,e){i.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){i.push({cmd:"-",idx:t})}).execute(),i}(t,e),l=[],h=[],u=[],c=[],p=[],d=[],g=[],m=ot(a,e,s),y=t.getLayout("points")||[],f=e.getLayout("points")||[],v=0;v<r.length;v++){var b=r[v],S=!0,_=void 0,x=void 0;switch(b.cmd){case"=":_=2*b.idx,x=2*b.idx1;var I=y[_],M=y[_+1],w=f[x],A=f[x+1];(isNaN(I)||isNaN(M))&&(I=w,M=A),l.push(I,M),h.push(w,A),u.push(i[_],i[_+1]),c.push(n[x],n[x+1]),g.push(e.getRawIndex(b.idx1));break;case"+":var N=b.idx,P=m.dataDimsForPoint,k=a.dataToPoint([e.get(P[0],N),e.get(P[1],N)]);x=2*N,l.push(k[0],k[1]),h.push(f[x],f[x+1]);var L=st(m,a,e,N);u.push(L[0],L[1]),c.push(n[x],n[x+1]),g.push(e.getRawIndex(N));break;case"-":S=!1}S&&(p.push(b),d.push(d.length))}d.sort(function(t,e){return g[t]-g[e]});var O=l.length,T=D(O),C=D(O),E=D(O),z=D(O),G=[];for(v=0;v<d.length;v++){var V=d[v],R=2*v,Y=2*V;T[R]=l[Y],T[R+1]=l[Y+1],C[R]=h[Y],C[R+1]=h[Y+1],E[R]=u[Y],E[R+1]=u[Y+1],z[R]=c[Y],z[R+1]=c[Y+1],G[v]=p[V]}return{current:T,next:C,stackedOnCurrent:E,stackedOnNext:z,status:G}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin),p=c.current,d=c.stackedOnCurrent,g=c.next,m=c.stackedOnNext;if(a&&(d=bt(c.stackedOnCurrent,c.current,i,a,s),p=bt(c.current,null,i,a,s),m=bt(c.stackedOnNext,c.next,i,a,s),g=bt(c.next,null,i,a,s)),ft(p,g)>3e3||l&&ft(d,m)>3e3)return r.stopAnimation(),r.setShape({points:g}),void(l&&(l.stopAnimation(),l.setShape({points:g,stackedOnPoints:m})));r.shape.__points=c.current,r.shape.points=p;var y={shape:{points:g}};c.current!==p&&(y.shape.__points=c.next),r.stopAnimation(),h(r,y,u),l&&(l.setShape({points:p,stackedOnPoints:d}),l.stopAnimation(),h(l,{shape:{stackedOnPoints:m}},u),r.shape.points!==l.shape.points&&(l.shape.points=r.shape.points));for(var f=[],v=c.status,b=0;b<v.length;b++)if("="===v[b].cmd){var S=t.getItemGraphicEl(v[b].idx1);S&&f.push({el:S,ptIdx:b})}r.animators&&r.animators.length&&r.animators[0].during(function(){l&&l.dirtyShape();for(var t=r.shape.__points,e=0;e<f.length;e++){var i=f[e].el,n=2*f[e].ptIdx;i.x=t[n],i.y=t[n+1],i.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,n){t.__temp&&(e.remove(t),i.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(G);function Dt(t,e){return{seriesType:t,plan:K(),reset:function(t){var i=t.getData(),n=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(n){var s=M(n.dimensions,function(t){return i.mapDimension(t)}).slice(0,2),r=s.length,l=i.getCalculationInfo("stackResultDimension");w(i,s[0])&&(s[0]=l),w(i,s[1])&&(s[1]=l);var h=i.getStore(),u=i.getDimensionIndex(s[0]),c=i.getDimensionIndex(s[1]);return r&&{progress:function(t,e){for(var i=t.end-t.start,a=o&&D(i*r),s=[],l=[],p=t.start,d=0;p<t.end;p++){var g=void 0;if(1===r){var m=h.get(u,p);g=n.dataToPoint(m,null,l)}else s[0]=h.get(u,p),s[1]=h.get(c,p),g=n.dataToPoint(s,null,l);o?(a[d++]=g[0],a[d++]=g[1]):e.setItemLayout(p,g.slice())}o&&e.setLayout("points",a)}}}}}}}}});
