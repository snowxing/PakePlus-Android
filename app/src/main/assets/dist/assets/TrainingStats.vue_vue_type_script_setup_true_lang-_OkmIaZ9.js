import{d as y,c as f,a as c,_ as $,r as o,aD as C,o as w,a6 as x,w as k,g as _,h as v,i as b,C as D,b as A,aj as L,b5 as S,v as E,F as B}from"./index-5kp1FiRg.js";import{g as F,a as R,b as P,c as W,d as O,e as N}from"./trainingStatistics-Dmh4PdZ9.js";/* empty css              */import"./index-1VOhhtK2.js";import{e as z}from"./install-CoVyZzHx.js";const me=y({__name:"DeptRank",setup(g){const i=[{title:"年度",key:"year",width:"25%"},{title:"部门名称",key:"department_name",width:"25%"},{title:"平均成绩",key:"average_score",width:"25%"},{title:"全厂排名",key:"plant_ranking",width:"25%"}];async function e({pageNum:s}={pageNum:1}){const l=await F({page:s});return{total:Number(l.count)||0,data:l||[]}}return(s,u)=>{const l=$;return c(),f(l,{columns:i,request:e})}}}),M={class:"chart-container"},I={class:"chart-wrapper"},V=y({__name:"PassRateChart",setup(g){const i=o();let e=null;const s=o({categories:[],series:[]}),u=o({}),l=()=>{i.value&&(e&&e.dispose(),e=z(i.value),r())},r=()=>{if(!e)return;const a={color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],tooltip:{trigger:"axis"},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s.value.categories,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:s.value.series.map(t=>({name:t.name,type:"line",data:t.data,smooth:!0,lineStyle:{width:2},symbol:"circle",symbolSize:6,itemStyle:{borderWidth:1}}))};e.setOption(a)},d=()=>{e==null||e.resize()},p=C(()=>s.value.series.length>0||s.value.categories.length>0),m=async()=>{try{const a=await R(u.value);a.data&&(s.value={categories:a.data.map(t=>t.name),series:[{name:"及格率",data:a.data.map(t=>t.ratio)}]},L(()=>{!e&&p.value?l():r()}))}catch(a){console.error("获取数据失败:",a)}};return w(()=>{m(),window.addEventListener("resize",d)}),x(()=>{window.removeEventListener("resize",d),e&&e.dispose()}),k(s,()=>{r()},{deep:!0}),(a,t)=>{const n=D,h=S;return c(),_("div",M,[v(n,{title:"及格率统计",class:"title-cell"}),b("div",I,[A(p)?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(h,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),j=E(V,[["__scopeId","data-v-5c67f80a"]]),q={class:"chart-container"},H={class:"chart-content"},J=y({__name:"FullScoreRate",setup(g){const i=o(null),e=o(null),s=o({categories:[],series:[]}),u=o({}),l=o({color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],legend:{show:!1},xAxis:{axisLine:{lineStyle:{color:"#ccc"}},axisTick:{alignWithLabel:!0}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:[{type:"line",lineStyle:{width:2},symbol:"circle",symbolSize:6,itemStyle:{borderWidth:1}}]}),r=C(()=>s.value.series.length>0||s.value.categories.length>0),d=()=>{i.value&&(e.value&&e.value.dispose(),e.value=z(i.value),p())},p=()=>{if(!e.value)return;const t={...l.value,xAxis:{...l.value.xAxis,type:"category",data:s.value.categories},series:s.value.series.map(n=>({...l.value.series[0],name:n.name,data:n.data}))};e.value.setOption(t)},m=()=>{var t;(t=e.value)==null||t.resize()},a=async()=>{try{const t=await P(u.value);t.status==="ok"&&(s.value={categories:t.data.map(n=>n.name),series:t.data.map(n=>({name:n.name,data:t.data.map(h=>h.ratio)}))},L(()=>{!e.value&&r.value?d():p()}))}catch(t){console.error("数据加载失败:",t)}};return w(()=>{a(),window.addEventListener("resize",m)}),x(()=>{var t;window.removeEventListener("resize",m),(t=e.value)==null||t.dispose()}),k(s,()=>{p()},{deep:!0}),(t,n)=>{const h=D,T=S;return c(),_("div",q,[v(h,{title:"满分率统计",class:"title-cell"}),b("div",H,[A(r)?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(T,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),U=E(J,[["__scopeId","data-v-202bc7b6"]]),G={class:"chart-container"},K={class:"chart-wrapper"},Q=y({__name:"perCapitaPerMonthChart",setup(g){const i=o();let e=null;const s=o({categories:[],series:[]}),u=o({}),l=()=>{i.value&&(e&&e.dispose(),e=z(i.value),r())},r=()=>{if(!e)return;const a={color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],tooltip:{trigger:"axis"},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s.value.categories,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:s.value.series.map(t=>({name:t.name,type:"line",data:t.data,smooth:!0,lineStyle:{width:2},symbol:"circle",symbolSize:6,itemStyle:{borderWidth:1}}))};e.setOption(a)},d=()=>{e==null||e.resize()},p=C(()=>s.value.categories.length>0),m=async()=>{try{const a=await W(u.value);a.data&&a.status==="ok"&&(s.value={categories:a.data.map(t=>t.month+"月"),series:[{name:"学习时长",data:a.data.map(t=>t.study_minutes)}]},L(()=>{!e&&p.value?l():r()}))}catch(a){console.error("获取数据失败:",a)}};return w(()=>{m(),window.addEventListener("resize",d)}),x(()=>{window.removeEventListener("resize",d),e&&e.dispose()}),k(s,()=>{r()},{deep:!0}),(a,t)=>{const n=D,h=S;return c(),_("div",G,[v(n,{title:"每月人均学习时长统计(小时)",class:"title-cell"}),b("div",K,[p.value?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(h,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),X=E(Q,[["__scopeId","data-v-38e13ce9"]]),Y={class:"chart-container"},Z={class:"chart-wrapper"},ee=y({__name:"participationRateStatisticsChart",setup(g){const i=o();let e=null;const s=o({categories:[],series:[]}),u=o({}),l=()=>{i.value&&(e&&e.dispose(),e=z(i.value),r())},r=()=>{if(!e)return;const a={color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],tooltip:{trigger:"axis"},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s.value.categories,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",min:0,max:100,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:s.value.series.map(t=>({name:t.name,type:"line",data:t.data,smooth:!0,lineStyle:{width:2},symbol:"circle",symbolSize:6,itemStyle:{borderWidth:1}}))};e.setOption(a)},d=()=>{e==null||e.resize()},p=C(()=>s.value.series.length>0||s.value.categories.length>0),m=async()=>{try{const a=await O(u.value);a.data&&a.status==="ok"&&(s.value={categories:a.data.map(t=>t.name),series:[{name:"参与率",data:a.data.map(t=>t.ratio)}]},L(()=>{!e&&p.value?l():r()}))}catch(a){console.error("获取数据失败:",a)}};return w(()=>{m(),window.addEventListener("resize",d)}),x(()=>{window.removeEventListener("resize",d),e&&e.dispose()}),k(s,()=>{r()},{deep:!0}),(a,t)=>{const n=D,h=S;return c(),_("div",Y,[v(n,{title:"参与率统计",class:"title-cell"}),b("div",Z,[A(p)?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(h,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),te=E(ee,[["__scopeId","data-v-ed8de6c0"]]),ae={class:"chart-container"},se={class:"chart-wrapper"},ie=y({__name:"distributionChart",setup(g){const i=o();let e=null;const s=o({series:[]}),u=o({}),l=()=>{i.value&&(e&&e.dispose(),e=z(i.value),r())},r=()=>{var t,n;if(!e)return;const a={color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:((t=s.value.series[0])==null?void 0:t.data.map(h=>h.name))||[]},series:[{name:"及格率分布",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"16",fontWeight:"bold"}},labelLine:{show:!1},data:((n=s.value.series[0])==null?void 0:n.data)||[]}]};e.setOption(a)},d=()=>{e==null||e.resize()},p=C(()=>{var a,t;return s.value.series.length>0&&((t=(a=s.value.series[0])==null?void 0:a.data)==null?void 0:t.length)>0}),m=async()=>{try{const a=await N(u.value);a.data&&a.status==="ok"&&(s.value={series:[{data:a.data.map(t=>({name:t.is_pass==1?"及格":"不及格",value:t.ratio}))}]},L(()=>{!e&&p.value?l():r()}))}catch(a){console.error("获取数据失败:",a)}};return w(()=>{m(),window.addEventListener("resize",d)}),x(()=>{window.removeEventListener("resize",d),e&&e.dispose()}),k(s,()=>{r()},{deep:!0}),(a,t)=>{const n=D,h=S;return c(),_("div",ae,[v(n,{title:"及格率分布率统计",class:"title-cell"}),b("div",se,[p.value?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(h,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),re=E(ie,[["__scopeId","data-v-07eebc52"]]),ne={class:"chart-container"},oe={class:"chart-wrapper"},ce=y({__name:"departmentRankingChart",setup(g){const i=o();let e=null;const s=o({categories:[],series:[]}),u=o({page:1,page_size:1e4}),l=()=>{i.value&&(e&&e.dispose(),e=z(i.value),r())},r=()=>{if(!e)return;const a={color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],tooltip:{trigger:"axis"},legend:{show:!0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s.value.categories,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:s.value.series.map(t=>({name:t.name,type:"bar",data:t.data,barWidth:"30%",itemStyle:{borderRadius:[3,3,0,0]}}))};e.setOption(a)},d=()=>{e==null||e.resize()},p=C(()=>s.value.series.length>0||s.value.categories.length>0),m=async()=>{try{const a=await F(u.value);a&&(s.value={categories:a.map(t=>t.department_name),series:[{name:"平均成绩",data:a.map(t=>t.average_score)},{name:"全厂排名",data:a.map(t=>t.plant_ranking)}]},L(()=>{!e&&p.value?l():r()}))}catch(a){console.error("获取数据失败:",a)}};return w(()=>{m(),window.addEventListener("resize",d)}),x(()=>{window.removeEventListener("resize",d),e&&e.dispose()}),k(s,()=>{r()},{deep:!0}),(a,t)=>{const n=D,h=S;return c(),_("div",ne,[v(n,{title:"部门排名",class:"title-cell"}),b("div",oe,[p.value?(c(),_("div",{key:0,ref_key:"chartDom",ref:i,class:"chart",style:{height:"250px"}},null,512)):(c(),f(h,{key:1,description:"暂无数据",class:"empty-state"}))])])}}}),le=E(ce,[["__scopeId","data-v-452adb19"]]),ve=y({__name:"TrainingStats",setup(g){return(i,e)=>(c(),_(B,null,[v(j),v(U),v(te),v(re),v(X),v(le)],64))}});export{ve as _,me as a};
