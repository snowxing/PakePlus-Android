import{d as p,k as g,r as m,c as d,a as b,m as i,h as f,au as s,b as l,i as y,ad as z,_ as k}from"./index-5kp1FiRg.js";import{g as v}from"./healthRecord-nYYKLBYx.js";import{_ as w}from"./SearchForm.vue_vue_type_script_setup_true_lang-DetJ7zG1.js";const R=p({__name:"occupation",setup(C){async function o({pageNum:n,form:e}){const a=new FormData;a.append("page",n),a.append("set_etp_id",e.set_etp_id),a.append("page_size",e.page_size),a.append("cat_id",e.cat_id),a.append("name",e.name),a.append("search",JSON.stringify({bu_men:e.bu_men,zhi_ye_bing_fang_hu_she_shi_ming_cheng:e.zhi_ye_bing_fang_hu_she_shi_ming_cheng,ze_ren_ren:e.ze_ren_ren}));const _=await v(a);return{total:Number(_.count),data:_.data}}const{routerPush:u}=g(),t=m({set_etp_id:"",page_size:30,cat_id:7,name:"",zhi_ye_bing_fang_hu_she_shi_ming_cheng:"",bu_men:""}),r=[{icon:"search",key:"search"}];function c(n){const e=[{label:"部门",value:n.bu_men},{label:"区域",value:n.qu_yu},{label:"安装位置",value:n.an_zhuang_wei_zhi},{label:"职业病防护设施名称",value:n.zhi_ye_bing_fang_hu_she_shi_ming_cheng},{label:"类型",value:n.lei_xing_name},{label:"防护用途",value:n.fang_hu_yong_tu},{label:"责任人",value:n.ze_ren_ren},{label:"工号",value:n.gong_hao},{label:"备注",value:n.bei_zhu}];u("siteDetail",{detail:JSON.stringify(e)})}const h=[{title:"部门",key:"bu_men",width:"30%"},{title:"区域",key:"qu_yu",width:"25%"},{title:"职业病防护",key:"zhi_ye_bing_fang_hu_she_shi_ming_cheng",width:"25%"},{title:"责任人",key:"ze_ren_ren",width:"20%"}];return(n,e)=>{const a=k;return b(),d(a,{form:l(t),"onUpdate:form":e[1]||(e[1]=_=>s(t)?t.value=_:null),columns:h,request:o,floating:r,onOnRowClick:c},{"cell-month":i(({row:_})=>[y("div",null,z(_.plan_time),1)]),searchForm:i(()=>[f(w,{form:l(t),"onUpdate:form":e[0]||(e[0]=_=>s(t)?t.value=_:null),"data-key":{bumen:"bumen",name:"name",zerenren:"zerenren"}},null,8,["form"])]),_:1},8,["form"])}}});export{R as _};
