import{aB as C,d as N,k as $,r as D,w as B,g as f,a as x,h as e,m as s,au as m,b,aY as S,aZ as J,i as d,ad as l,b0 as O,_ as R,e as v}from"./index-5kp1FiRg.js";import{_ as q}from"./SearchForm.vue_vue_type_script_setup_true_lang-CYW76ZBj.js";import"./index-BpTLWCN6.js";const L=c=>C.get("/annualplan/train_plan_list",{params:c}),P={class:"todo-list"},T=["data-index","data-id","onClick"],U={class:"text-14px font-600 mb-10px text-left break-words"},V=["onClick"],E={class:"text-12px mb-10px break-words"},F={class:"text-12px mb-10px text-right break-words"},M={class:"text-10px mb-10px text-left break-words"},Y={class:"text-12px mb-10px text-left break-words"},Z={class:"text-12px mb-10px text-right break-words"},j=N({__name:"index",setup(c){const{routerPush:p}=$(),r=D({year:"",department_id:"",staff_id:"",set_etp_id:""}),k=[{icon:"search",key:"search"}];async function h({pageNum:a}){var i,_;console.log("pageNum",a);const n=JSON.parse(JSON.stringify(r.value));n.department_id=((_=(i=n.department_id)==null?void 0:i[0])==null?void 0:_.value)||"";const o=await L({page:a,...n})||{};return{total:Number(o.count||0),data:o.data||[]}}function w(a){console.warn("item",a),Number(a.exe_process_inst_id)>0?p("task-process",{task_id:a.id,app_id:5,transid:a.exe_process_inst_id}):p("task-process",{task_id:0,app_id:5,param:"plan_task|".concat(a.train_name,"-1-").concat(a.id)})}function g(a){const n=[{value:a.train_name,label:"培训项目"},{value:a.train,label:"培训对象"},{value:a.train_period,label:"培训学时"},{value:a.department,label:"组织部门"},{value:a.staff,label:"责任人"},{value:"".concat(a.year,"-").concat(a.month),label:"计划时间"},{value:a.remarks,label:"备注"}];p("eduDetail",{detail:JSON.stringify(n)})}return B(r,a=>{console.log("form changed:",a)}),(a,n)=>{const o=J,i=S,_=R;return x(),f("div",P,[e(_,{form:b(r),"onUpdate:form":n[1]||(n[1]=t=>m(r)?r.value=t:null),request:h,floating:k},{row:s(({item:t,index:u})=>[(x(),f("div",{key:u,class:"item mx-15px mt-15px p-10px rounded-10px bg-white","data-index":u,"data-id":t.id,onClick:y=>g(t)},[e(i,null,{default:s(()=>[e(o,{span:"16"},{default:s(()=>[d("div",U,l(t.etp_id_name||"-"),1)]),_:2},1024),e(o,{span:"8"},{default:s(()=>[d("div",{class:"text-12px text-blue-400 text-right cursor-pointer break-words",onClick:O(y=>w(t),["stop"])},l(Number(t.exe_process_inst_id)>0?"已指派":"执行任务"),9,V)]),_:2},1024)]),_:2},1024),e(i,null,{default:s(()=>[e(o,{span:"16"},{default:s(()=>[d("div",E,l(t.department||"-"),1)]),_:2},1024),e(o,{span:"8"},{default:s(()=>[d("div",F,l(t.train||"-"),1)]),_:2},1024)]),_:2},1024),e(i,null,{default:s(()=>[e(o,{span:"24"},{default:s(()=>[d("div",M,l(t.train_name||"-"),1)]),_:2},1024),e(o,{span:"12"},{default:s(()=>[d("div",Y,l(t.year)+l(t.month),1)]),_:2},1024),e(o,{span:"12"},{default:s(()=>[d("div",Z,l(t.train_period||"-"),1)]),_:2},1024)]),_:2},1024)],8,T))]),searchForm:s(()=>[e(q,{form:b(r),"onUpdate:form":n[0]||(n[0]=t=>m(r)?r.value=t:null)},null,8,["form"])]),_:1},8,["form"])])}}});typeof v=="function"&&v(j);export{j as default};
