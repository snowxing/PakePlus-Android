import{u as j}from"./useTabsListener-CnvSNM1v.js";import{d as B,j as q,r as v,l as J,w as D,o as V,g as R,a as i,h as g,G as $,U as L,F as T,k as h,c as d,m as f,au as m,b as t,i as N,av as w,aw as k,ad as O,_ as S,ax as C,y as x,e as F}from"./index-5kp1FiRg.js";import{c as M}from"./config-BiPkORWZ.js";const U=[{title:"名称",className:"three",key:"name",uname:"",width:160,type:"selection"},{title:"危险源",className:"three",key:"risk_name_id",width:100,uname:"",type:"selection"},{title:"风险等级",className:"three",key:"level_name",uname:"",width:90,type:"selection"}],b={1:{label:"重大风险",color:"red"},2:{label:"较大风险",color:"#ff6100"},3:{label:"一般风险",color:"#cccc21"},4:{label:"低风险",color:"#0000e1"}},P=B({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(y,{emit:s}){const a=y,c=s;q();const _=v([]);v([]),v([]),v({label:"title",value:"node_id",children:"child"});const r=J({...a.form});return D(r,e=>{c("update:form",e)},{deep:!0}),D(()=>a.form,e=>{Object.assign(r,e)},{deep:!0,immediate:!0}),V(()=>{_.value=M.get("risk_type").map(e=>({text:e.name,value:e.id}))}),(e,l)=>{const o=$,n=L;return i(),R(T,null,[g(o,{modelValue:r.name,"onUpdate:modelValue":l[0]||(l[0]=u=>r.name=u),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"]),g(n,{value:r.level_id,"onUpdate:value":l[1]||(l[1]=u=>r.level_id=u),placeholder:"风险级别",columns:_.value},null,8,["value","columns"])],64)}}}),z={__name:"DeviceBox",setup(y){const{routerPush:s}=h(),a=v({name:"",level_id:""}),c=[{icon:"search",key:"search"}];async function _({pageNum:e}={pageNum:1}){const l={page:e,doc_type:43,sign:1,...a.value},o=await C(l);return{total:Number(o.count)||0,data:o.data||[]}}function r(e){var o;e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"检查项目",value:e.task_step},{label:"风险值",value:e.level_num},{label:"风险等级",value:(o=k[e.level_id])==null?void 0:o.label},{label:"危险源",value:e.risk_name_id},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"责任岗位",value:e.post_name},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"备注",value:e.note},{label:"附件",value:e.files,renderType:"image"}];s("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,l)=>{const o=S;return i(),d(o,{form:t(a),"onUpdate:form":l[1]||(l[1]=n=>m(a)?a.value=n:null),columns:t(U),request:_,floating:c,onOnRowClick:r},{"cell-level_name":f(({row:n})=>{var u,p;return[N("div",{class:"text-12 text-white px-2 py-1 rounded",style:w({color:((u=t(k)[n.level_id])==null?void 0:u.color)||"#ccc"})},O((p=t(k)[n.level_id])==null?void 0:p.label),5)]}),searchForm:f(()=>[g(P,{form:t(a),"onUpdate:form":l[0]||(l[0]=n=>m(a)?a.value=n:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},E={__name:"WorkBox",setup(y){const{routerPush:s}=h(),a=v({name:"",level_id:""}),c=[{icon:"search",key:"search"}];async function _({pageNum:e}={pageNum:1}){const l={page:e,doc_type:40,sign:1,...a.value},o=await C(l);return{total:Number(o.count)||0,data:o.data||[]}}function r(e){var o;e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"作业步骤",value:e.task_step},{label:"风险值",value:e.level_num},{label:"风险等级",value:(o=b[e.level_id])==null?void 0:o.label},{label:"危险源",value:e.risk_name_id},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"责任岗位",value:e.post_name},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"备注",value:e.note},{label:"附件",value:e.files,type:"img"}];s("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,l)=>{const o=S;return i(),d(o,{form:t(a),"onUpdate:form":l[1]||(l[1]=n=>m(a)?a.value=n:null),columns:t(U),request:_,floating:c,onOnRowClick:r},{"cell-level_name":f(({row:n})=>{var u,p;return[N("div",{class:"text-12px text-white px-2 py-1 rounded",style:w({color:((u=t(b)[n.level_id])==null?void 0:u.color)||"#ccc"})},O((p=t(b)[n.level_id])==null?void 0:p.label),5)]}),searchForm:f(()=>[g(P,{form:t(a),"onUpdate:form":l[0]||(l[0]=n=>m(a)?a.value=n:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},G={__name:"RegionBox",setup(y){const{routerPush:s}=h(),a=v({name:"",level_id:""}),c=[{icon:"search",key:"search"}];async function _({pageNum:e}={pageNum:1}){const l={page:e,category_id:6814682,sign:1,...a.value},o=await C(l);return{total:Number(o.count)||0,data:o.data||[]}}function r(e){var o;e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"风险值",value:e.level_num},{label:"危险源",value:e.risk_name_id},{label:"作业步骤",value:e.task_step},{label:"风险等级",value:(o=b[e.level_id])==null?void 0:o.label},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"责任岗位",value:e.post_name},{label:"备注",value:e.note},{label:"附件",value:e.files,renderType:"image"}];s("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,l)=>{const o=S;return i(),d(o,{form:t(a),"onUpdate:form":l[1]||(l[1]=n=>m(a)?a.value=n:null),columns:t(U),request:_,floating:c,onOnRowClick:r},{"cell-level_name":f(({row:n})=>{var u,p;return[N("div",{class:"text-12px text-white px-2 py-1 rounded",style:w({color:((u=t(b)[n.level_id])==null?void 0:u.color)||"#ccc"})},O((p=t(b)[n.level_id])==null?void 0:p.label),5)]}),searchForm:f(()=>[g(P,{form:t(a),"onUpdate:form":l[0]||(l[0]=n=>m(a)?a.value=n:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},W={class:"flex-center w-100% items-center"},A=B({__name:"index",setup(y){const s=v("risk-devicelist");return j("risk-click-tab",a=>{s.value=a.name}),(a,c)=>(i(),R("div",W,[t(s)==="risk-devicelist"?(i(),d(z,{key:0})):x("",!0),t(s)==="job-list"?(i(),d(E,{key:1})):x("",!0),t(s)==="risk-arealist"?(i(),d(G,{key:2})):x("",!0)]))}});typeof F=="function"&&F(A);export{A as default};
