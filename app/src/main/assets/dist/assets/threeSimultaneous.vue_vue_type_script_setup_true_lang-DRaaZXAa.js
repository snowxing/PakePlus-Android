import{d as m,j,r as g,l as T,w as c,o as k,g as V,a as y,h as r,G as w,B as h,F as x,k as C,c as F,m as f,au as b,b as v,I as U,_ as S}from"./index-5kp1FiRg.js";import{a as B}from"./projectManagement-Dldudrka.js";import{g as O}from"./index-BpTLWCN6.js";import{c as R}from"./config-BiPkORWZ.js";const D=m({__name:"threeSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(p,{emit:_}){const s=p,o=_;j();const d=g([]),t=T({...s.form});c(t,e=>{o("update:form",e)},{deep:!0}),c(()=>s.form,e=>{Object.assign(t,e)},{deep:!0,immediate:!0});async function i(){const e=await O();d.value=e.data||[]}return R.get("project_type").map(e=>({text:e.name,value:e.id})),k(()=>{i()}),(e,l)=>{const n=w,u=h;return y(),V(x,null,[r(n,{modelValue:t.project_name,"onUpdate:modelValue":l[0]||(l[0]=a=>t.project_name=a),type:"text",name:"text",label:"",placeholder:"请输入项目名称"},null,8,["modelValue"]),r(u,{modelValue:t.start_date,"onUpdate:modelValue":l[1]||(l[1]=a=>t.start_date=a),label:"开始时间"},null,8,["modelValue"]),r(u,{modelValue:t.end_date,"onUpdate:modelValue":l[2]||(l[2]=a=>t.end_date=a),label:"结束时间"},null,8,["modelValue"])],64)}}}),$=m({__name:"threeSimultaneous",setup(p){async function _({pageNum:e,form:l}){const n=await B({page:e,...l});return{total:Number(n.count),data:n.data}}const{routerPush:s}=C(),o=g({start_date:"",end_date:"",doc_type:"2",project_name:"",set_etp_id:""}),d=[{icon:"search",key:"search"}];function t(e){const l=[{label:"项目名称",value:e.project_name},{label:"项目类型",value:e.project_type},{label:"建设工期-起始时间",value:e.start_build_term},{label:"建设工期-结束时间",value:e.end_build_term},{label:"安全-评价单位",value:e.safe_evaluate},{label:"安全-评价时间(年/月)",value:e.safe_evaluate_date},{label:"附件",renderType:"image",value:e.safe_evaluate_file.split(",")},{label:"安全-设计单位",value:e.safe_design},{label:"安全-设计时间(年/月)",value:e.safe_design_date},{label:"附件",renderType:"image",value:e.safe_design_file.split(",")},{label:"安全-施工单位",value:e.safe_construction},{label:"安全-施工时间(年/月)",value:e.safe_construction_date},{label:"附件",renderType:"image",value:e.safe_construction_file.split(",")},{label:"安全-验收单位",value:e.safe_test},{label:"安全-验收时间(年/月)",value:e.safe_test_date},{label:"附件",renderType:"image",value:e.safe_test_file.split(",")},{label:"职业卫生-评价单位",value:e.job_evaluate},{label:"职业卫生-评价时间(年/月)",value:e.job_evaluate_date},{label:"附件",renderType:"image",value:e.job_evaluate_file_.split(",")},{label:"职业卫生-设计单位",value:e.job_design},{label:"职业卫生-设计时间(年/月)",value:e.job_design_date},{label:"附件",renderType:"image",value:e.job_design_file.split(",")},{label:"职业卫生-施工单位",value:e.job_construction},{label:"职业卫生-施工时间(年/月)",value:e.job_construction_date},{label:"附件",renderType:"image",value:e.job_construction_file.split(",")},{label:"职业卫生-验收单位",value:e.job_control},{label:"职业卫生-验收时间(年/月)",value:e.job_control_date},{label:"附件",renderType:"image",value:e.job_test_file.split(",")},{label:"消防-评价单位",value:e.fire_evaluate},{label:"消防-评价时间(年/月)",value:e.fire_evaluate_date},{label:"附件",renderType:"image",value:e.fire_evaluate_file.split(",")},{label:"消防-设计单位",value:e.fire_design},{label:"消防-设计时间(年/月)",value:e.fire_design_date},{label:"附件",renderType:"image",value:e.fire_design_file_.split(",")},{label:"消防-施工单位",value:e.fire_construction},{label:"消防-施工时间(年/月)",value:e.fire_construction_date},{label:"附件",renderType:"image",value:e.fire_construction_file.split(",")},{label:"消防-验收单位",value:e.fire_test},{label:"消防-验收时间(年/月)",value:e.fire_test_date},{label:"附件",renderType:"image",value:e.fire_test_file.split(",")},{label:"环保-评价单位",value:e.protect_name},{label:"环保-评价时间(年/月)",value:e.protect_name_date},{label:"附件",renderType:"image",value:e.protect_name_file_.split(",")},{label:"环保-设计单位",value:e.project_design},{label:"环保-设计时间(年/月)",value:e.project_design_date},{label:"附件",renderType:"image",value:e.protect_design_file.split(",")},{label:"环保-施工单位",value:e.protect_construction},{label:"环保-施工时间(年/月)",value:e.protect_construction_date},{label:"附件",renderType:"image",value:e.protect_construction_file.split(",")},{label:"环保-验收单位",value:e.protect_test},{label:"环保-验收时间(年/月)",value:e.protect_test_date},{label:"附件",renderType:"image",value:e.protect_test_file.split(",")},{label:"备注",value:e.remarks}];s("siteDetail",{detail:JSON.stringify(l)})}const i=[{title:"项目名称",key:"project_name",width:"30%"},{title:"开始时间",key:"start_build_term",width:"22%"},{title:"结束时间",key:"end_build_term",width:"22%"},{title:"项目类型",key:"project_type",width:"15%"}];return(e,l)=>{const n=U,u=S;return y(),F(u,{form:v(o),"onUpdate:form":l[1]||(l[1]=a=>b(o)?o.value=a:null),columns:i,request:_,floating:d,onOnRowClick:t},{"cell-files":f(({row:a})=>[r(n,{"class-prefix":"iconfujian",class:"iconfont menu-icon",name:"extra",alt:a.files},null,8,["alt"])]),searchForm:f(()=>[r(D,{form:v(o),"onUpdate:form":l[0]||(l[0]=a=>b(o)?o.value=a:null)},null,8,["form"])]),_:1},8,["form"])}}});export{$ as _};
