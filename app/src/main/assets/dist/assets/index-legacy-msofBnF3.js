System.register(["./useSystemTheme-legacy-DCvxHL70.js","./index-legacy-CK9unWWd.js","./accident-legacy-DUrK_x9m.js","./cloneDeep-legacy-SwJ5tWQB.js","./install-legacy-BpR_-QHD.js","./install-legacy-CxeYzW-1.js","./install-legacy-B99kKqGh.js","./install-legacy-DLtSJaar.js","./createSeriesDataSimply-legacy-BROSo_wZ.js"],function(e,t){"use strict";var l,a,o,n,s,r,i,u,c,m,d,p,f,v,y,h,g,Y,b,x,_,w,M,S,j,C,U,k,V,A,z,F,D,E,H,G,$,q,B,I,O;return{setters:[e=>{l=e.u,a=e.E},e=>{o=e.d,n=e.r,s=e.w,r=e.o,i=e.g,u=e.a,c=e.i,m=e.h,d=e.b,p=e.p,f=e.v,v=e.l,y=e.y,h=e.F,g=e.E,Y=e.c,b=e.by,x=e.m,_=e.a2,w=e.aU,M=e.H,S=e.J,j=e.aq,C=e.U,U=e.B,k=e.e},e=>{V=e.g,A=e.c,z=e.e},e=>{F=e.c},e=>{D=e.u,E=e.i,H=e.a,G=e.b,$=e.c,q=e.d},e=>{B=e.i},e=>{I=e.h},e=>{O=e.i},null],execute:function(){const t=f(o({__name:"ReportChart",props:{form:{}},setup(e){const t=e;l(),D([E,B,H,G,$,q,I,O]);const o={tooltip:{trigger:"item"},legend:{orient:"horizontal",left:"center",bottom:0},grid:{top:20},series:[{name:"",type:"pie",radius:"50%",center:["50%","40%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},f=n(F(o)),v=n(F(o)),y=n(F(o)),h=n({tooltip:{trigger:"axis"},legend:{data:["Email","Union Ads","Video Ads","Direct","Search Engine"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]});function g(e){const t=p(e.date).format("YYYY"),l=p(e.date).format("MM");V({level:e.level,Y:t,M:l}).then(e=>{f.value.series[0].data=e.map(e=>({name:e.title,value:e.value}))}),A({level:e.level,Y:t,M:l,type:3}).then(e=>{v.value.series[0].data=e.map(e=>({name:e.title,value:e.value}))}),A({level:e.level,Y:t,M:l,type:0}).then(e=>{y.value.series[0].data=e.map(e=>({name:e.title,value:e.value}))}),z({level:e.level,Y:t,M:l,type:0}).then(e=>{h.value.xAxis.data=e.data.map(e=>e.name),h.value.series=e.data?.map(e=>({...e,type:"line"}))})}return s(()=>t.form,e=>{g(e)},{deep:!0}),r(()=>{g(t.form)}),(e,t)=>(u(),i("div",null,[t[0]||(t[0]=c("div",{class:"title"}," 部门事故事件数量统计 ",-1)),m(d(a),{class:"chart",option:f.value,autoresize:""},null,8,["option"]),t[1]||(t[1]=c("div",{class:"title"}," 事故事件等级数量统计 ",-1)),m(d(a),{class:"chart",option:v.value,autoresize:""},null,8,["option"]),t[2]||(t[2]=c("div",{class:"title"}," 事故分类统计 ",-1)),m(d(a),{class:"chart",option:y.value,autoresize:""},null,8,["option"]),t[3]||(t[3]=c("div",{class:"title"}," 事故统计趋势图 ",-1)),m(d(a),{class:"chart",option:h.value,autoresize:""},null,8,["option"])]))}}),[["__scopeId","data-v-35016490"]]),P={style:{padding:"10px",display:"flex"}},R=o({__name:"ProSearchForm",props:{floating:{},form:{}},emits:["update:form","onClose"],setup(e,{emit:t}){const l=e,a=t,o=document.querySelector("section").offsetWidth-80,s=window.innerHeight-150;v({...l.form});const r=n(null),d=n(!1);function p(){a("onClose",{})}function f(){d.value=!1}return(t,l)=>{const a=b,n=M,v=_,C=j;return u(),i("div",null,[e.floating?(u(!0),i(h,{key:0},g(e.floating.slice().reverse(),(e,t)=>(u(),Y(a,{key:e.key,offset:{x:o,y:s-80*t},teleport:r.value,icon:e.icon,onClick:e=>function(e){e.stopPropagation(),d.value=!0}(e)},null,8,["offset","teleport","icon","onClick"]))),128)):y("",!0),m(C,{show:d.value,"onUpdate:show":l[0]||(l[0]=e=>d.value=e),position:"bottom",onClose:p},{default:x(()=>[m(v,{onSubmit:f},{default:x(()=>[w(t.$slots,"searchForm",{form:e.form}),c("div",P,[m(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:x(()=>[...l[1]||(l[1]=[S(" 查询 ",-1)])]),_:1})])]),_:3})]),_:3},8,["show"])])}}}),J=o({__name:"ReportSearch",props:{form:{}},emits:["update:form"],setup(e,{emit:t}){const l=t,a=v({...e.form}),o=n(Array.from({length:5}).fill(0).map((e,t)=>({text:`${t}`,value:`${t}`})));function s(){l("update:form",a)}return(e,t)=>{const l=C,n=U,r=R;return u(),Y(r,{form:d(a),floating:[{icon:"search",key:"search"}],onOnClose:s},{searchForm:x(()=>[m(l,{modelValue:d(a).level,"onUpdate:modelValue":t[0]||(t[0]=e=>d(a).level=e),label:"事故等级",columns:d(o),placeholder:"请选择事故等级"},null,8,["modelValue","columns"]),m(n,{modelValue:d(a).date,"onUpdate:modelValue":t[1]||(t[1]=e=>d(a).date=e),format:"YYYY-MM",label:"发生时间",placeholder:"请选择"},null,8,["modelValue"])]),_:1},8,["form"])}}}),L={class:"flex-center w-100% items-center"},N=e("default",o({__name:"index",setup(e){const l=n({level:"0",date:p(new Date).format("YYYY-MM")});return(e,a)=>{const o=J,n=t;return u(),i("div",L,[m(o,{form:l.value,"onUpdate:form":a[0]||(a[0]=e=>l.value=e)},null,8,["form"]),m(n,{form:l.value,"onUpdate:form":a[1]||(a[1]=e=>l.value=e)},null,8,["form"])])}}}));"function"==typeof k&&k(N)}}});
