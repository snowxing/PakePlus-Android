System.register(["./index-legacy-CK9unWWd.js","./detail-legacy-CpAOJIgJ.js","./improve-legacy-BlrZto5R.js","./useTabsListener-legacy-BqsF0NKt.js","./Detail-legacy-Hfctf5Uv.js","./Detail.vue_vue_type_style_index_0_scoped_de43671c_lang-legacy-CnvmjJHj.js"],function(e,a){"use strict";var t,l,n,r,u,m,o,s,i,c,d,p,y,v,k,f,_,b,g,h,w;return{setters:[e=>{t=e.d,l=e.l,n=e.w,r=e.c,u=e.a,m=e.b,o=e.B,s=e.r,i=e.g,c=e.h,d=e._,p=e.m,y=e.aq,v=e.p,k=e.x,f=e.z,_=e.e},e=>{b=e.default},e=>{g=e.r,h=e.a},e=>{w=e.u},null,null],execute:function(){const a=t({__name:"ReportListSearchForm",props:{form:{}},emits:["update:form"],setup(e,{emit:a}){const t=a,s=l({...e.form});return n(s,e=>{t("update:form",e)},{deep:!0}),(e,a)=>{const t=o;return u(),r(t,{modelValue:m(s).date,"onUpdate:modelValue":a[0]||(a[0]=e=>m(s).date=e),label:"年度",placeholder:"请选择年度",format:"YYYY"},null,8,["modelValue"])}}}),T=t({__name:"ReportList",setup(e){async function t({pageNum:e,form:a}){const t={};a.date&&(t.start_date=a.date,t.end_date=Number(a.date)+1);const l=await g({page:e,...t});return{total:Number(l.count),data:l.data}}const l=[{title:"报表名称",key:"title",width:"60%",align:"center"},{title:"报表时间",key:"updated_at",width:"30%",render:e=>v(e).format("YYYY-MM-DD")}],n=s(!1),r=s([]);function m(e){return e?JSON.parse(e):{}}function o(e,a){return e.map(e=>`\n        ${e.name}: ${a[e.key]||0}\n      `)}function k(e){n.value=!0,h({id:e.id}).then(e=>{const a=e.dangerous?JSON.parse(e.dangerous):{},t=`\n      较大风险数量：${a.count}\n      同比变化：${a.percent}\n    `,l=m(e.risk),n=o([{key:"count",name:"事故数"},{key:"die_count",name:"死亡人数"},{key:"hert_count",name:"受伤人数"},{key:"die_percent",name:"事故下降"},{key:"hert_percent",name:"死亡下降"},{key:"count_percent",name:"受伤下降"}],m(e.accident)),u=o([{key:"name",name:"名称"},{key:"time",name:"演练时间"},{key:"num",name:"参加人数"},{key:"note",name:"备注"}],m(e.emergency)),s=o([{key:"name",name:"名称"},{key:"time",name:"培训时间"},{key:"num",name:"参加人数"},{key:"note",name:"备注"}],m(e.train)),i=o([{key:"title",name:"区域"},{key:"percent",name:"排查率"}],l.department),c=o([{key:"title",name:"区域"},{key:"num",name:"数量"}],l.department),d=o([{key:"title",name:"区域"},{key:"num",name:"数量"}],l.area);r.value=[{label:"报告名称",value:e.title},{label:"时间区间",value:e.time_range},{label:"风险情况",value:t,renderType:"list"},{label:"各责任部门风险情况",value:e.larmRules},{label:"各区域风险情况",value:e.alarmVal},{label:"各部门风险排查率",value:e.alarmTime},{label:"较大隐患数量",value:l?.count},{label:"同比变化",value:l.percent},{label:"部门隐患发现情况",value:d,renderType:"list"},{label:"区域隐患发现情况",value:c,renderType:"list"},{label:"部门隐患冶理率",value:i,renderType:"list"},{label:"教育培训",value:s,renderType:"list"},{label:"应急演练",value:u,renderType:"list"},{label:"事故情况",value:n,renderType:"list"},{label:"情况总结",value:e.result},{label:"存在问题",value:e.issue},{label:"工作建议",value:e.advice}]})}const f=s({date:""});return(e,m)=>{const o=d,s=y;return u(),i("div",null,[c(o,{form:f.value,"onUpdate:form":m[1]||(m[1]=e=>f.value=e),columns:l,request:t,floating:[{icon:"search",key:"search"}],onOnRowClick:k},{searchForm:p(()=>[c(a,{form:f.value,"onUpdate:form":m[0]||(m[0]=e=>f.value=e)},null,8,["form"])]),_:1},8,["form"]),c(s,{show:n.value,"onUpdate:show":m[2]||(m[2]=e=>n.value=e),position:"bottom",style:{height:"70%"}},{default:p(()=>[c(b,{items:r.value},null,8,["items"])]),_:1},8,["show"])])}}}),Y={class:"flex-center h-[100vh] w-100% items-center"},j=e("default",t({__name:"index",setup(e){const a=s("");return w("improveReport-click-tab",e=>{a.value=e.name}),(e,t)=>(u(),i("div",Y,[k(c(T,null,null,512),[[f,"1"===a.value]])]))}}));"function"==typeof _&&_(j)}}});
