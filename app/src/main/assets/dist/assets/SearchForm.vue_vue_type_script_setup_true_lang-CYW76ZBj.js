import{d as C,j as F,r as l,l as U,w,o as x,g as Y,a as j,F as k,h as a,B,T as S,$ as b,G as D}from"./index-5kp1FiRg.js";import{g as O,a as $}from"./index-BpTLWCN6.js";const I=C({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(m,{emit:p}){const r=m,u=p,c=F(),s=l([]),d=l([]),_=l({label:"title",value:"node_id",children:"child"}),o=U({...r.form});w(o,n=>{u("update:form",n)},{deep:!0});async function f(){const n=await O();s.value=n.data||[]}async function v(){const{etp_id:n}=c.userInfo,e=await $({id:n,deep:2,enbase:1,is_node:1});d.value=[{title:"全部",node_id:"all",child:e||[]}]}return x(()=>{f(),v()}),(n,e)=>{const y=B,g=S,V=b,h=D;return j(),Y(k,null,[a(y,{"model-value":o.year,format:"YYYY",placeholder:"请选择年度","onUpdate:modelValue":e[0]||(e[0]=t=>t&&(o.year=t))},null,8,["model-value"]),a(g,{"model-value":o.set_etp_id,"form-create-inject":{options:s.value},placeholder:"请选择公司","onUpdate:modelValue":e[1]||(e[1]=t=>o.set_etp_id=t)},null,8,["model-value","form-create-inject"]),a(V,{"model-value":o.department_id,options:d.value,"field-names":_.value,placeholder:"请选择部门","onUpdate:modelValue":e[2]||(e[2]=t=>{var i;return o.department_id=(i=t==null?void 0:t[0])==null?void 0:i.value})},null,8,["model-value","options","field-names"]),a(h,{modelValue:o.staff_id,"onUpdate:modelValue":e[3]||(e[3]=t=>o.staff_id=t),type:"text",name:"text",placeholder:"请输入责任人"},null,8,["modelValue"])],64)}}});export{I as _};
