System.register(["./useTabsListener-legacy-BqsF0NKt.js","./index-legacy-CK9unWWd.js","./keyControlMeasures-legacy-DRLQFakY.js","./config-legacy-CMljs_xA.js"],function(e,a){"use strict";var t,l,s,n,c,o,r,i,p,u,x,d,m,y,f,v,g,_,h,b,k,w,N,C,L,S,j,U,q,z;return{setters:[e=>{t=e.u},e=>{l=e.d,s=e.j,n=e.r,c=e.l,o=e.w,r=e.o,i=e.c,p=e.a,u=e.G,x=e.k,d=e.g,m=e.h,y=e.m,f=e.au,v=e.b,g=e.i,_=e.av,h=e.ad,b=e._,k=e.F,w=e.E,N=e.H,C=e.J,L=e.aq,S=e.y,j=e.e},e=>{U=e.g,q=e.a},e=>{z=e.c}],execute:function(){const a=l({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:a}){const t=e,l=a;s();const x=n([]);n([]),n([]),n({label:"title",value:"node_id",children:"child"});const d=c({...t.form});return o(d,e=>{l("update:form",e)},{deep:!0}),o(()=>t.form,e=>{Object.assign(d,e)},{deep:!0,immediate:!0}),r(()=>{x.value=z.get("risk_type").map(e=>({text:e.name,value:e.id}))}),(e,a)=>{const t=u;return p(),i(t,{modelValue:d.name,"onUpdate:modelValue":a[0]||(a[0]=e=>d.name=e),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"])}}}),F={class:"p-[10px] relative"},O={class:"pr-[4px] h-[calc(100%-50px)] overflow-y-auto"},P={class:"text-[14px] text-blue-500 mb-[2px] pl-[2px]"},V={class:"gap-2 grid grid-cols-2"},D={class:"flex flex-col"},H={class:"text-[14px]"},J={class:"flex flex-col"},R={class:"text-[14px]"},T={class:"flex flex-col"},E={class:"text-[14px]"},G={class:"flex flex-col"},K={class:"text-[14px]"},M={class:"flex flex-col"},A={class:"text-[14px]"},B={class:"flex flex-col"},I={class:"text-[14px]"},Q={class:"flex flex-col"},W={class:"text-[14px]"},X={class:"flex flex-col"},Y={class:"text-[14px]"},Z={class:"flex flex-col"},$={class:"text-[14px]"},ee={class:"flex flex-col"},ae={class:"text-[14px]"},te={class:"flex flex-col"},le={class:"text-[14px]"},se={__name:"LimitedSpaceLedger",setup(e){const{routerPush:t}=x(),l=n({page:1,pageSize:30,name:""}),s=[{title:"有限空间名称",className:"three",key:"limited_space_name",uname:"",width:"30%",type:"selection"},{title:"位置",className:"three",key:"location",width:"20%",uname:"",type:"selection"},{title:"可能导致事故",className:"three",key:"possible_accidents",uname:"",width:"20%",type:"selection"},{title:"责任人",className:"three",key:"responsible_person_user_name",width:"18%"}];async function c({pageNum:e}={pageNum:1}){const a={...l.value,page:e,total:0},t=await U(a);return{total:Number(t.count)||0,data:t.data||[]}}const o=n(!1),r=n({});function i(e){const a=[{value:e.limited_space_name,label:"有限空间名称"},{value:e.number,label:"编号"},{value:e.risk_factors,label:"危险因素"},{value:e.possible_accidents,label:"可能导致的事故"},{value:e.safety_protection_measures,label:"安全防护措施"},{value:e.location,label:"位置"},{value:e.emergency_measures,label:"应急措施"},{value:e.account,label:"工号"},{value:e.note,label:"备注"},{value:e.responsible_person_user_name,label:"责任人"},{value:e.files,label:"附件",renderType:"image"}];t("doublePreventionDetail",{detail:JSON.stringify(a)})}return(e,t)=>{const n=b,u=N,x=L;return p(),d(k,null,[m(n,{columns:s,request:c,onOnRowClick:i,form:v(l),"onUpdate:form":t[1]||(t[1]=e=>f(l)?l.value=e:null),floating:[{icon:"search",key:"search"}]},{"cell-level_name":y(({row:a})=>[g("div",{class:"text-12 text-white px-2 py-1 rounded",style:_({color:e.levelColor[a.level_id].color||"#ccc"})},h(e.levelColor[a.level_id].label),5)]),searchForm:y(()=>[m(a,{form:v(l),"onUpdate:form":t[0]||(t[0]=e=>f(l)?l.value=e:null)},null,8,["form"])]),_:1},8,["form"]),m(x,{show:v(o),"onUpdate:show":t[3]||(t[3]=e=>f(o)?o.value=e:null),position:"bottom",round:"",style:{height:"80%"}},{default:y(()=>[g("div",F,[t[16]||(t[16]=g("div",{class:"text-[16px] font-bold mb-[4px] bg-white top-0 sticky"}," 管控措施 ",-1)),g("div",O,[(p(!0),d(k,null,w(v(r),(e,a)=>(p(),d("div",{key:a,class:"mb-[6px]"},[g("div",P," 检查项目："+h(e.task_step),1),(p(!0),d(k,null,w(e.policy,(e,a)=>(p(),d("div",{key:a,class:"mb-[4px] p-[2px] border border-gray-300 rounded-lg"},[g("div",V,[g("div",D,[t[4]||(t[4]=g("span",{class:"text-[14px] text-gray-500"},"危险源",-1)),g("span",H,h(e.risk_name_id),1)]),g("div",J,[t[5]||(t[5]=g("span",{class:"text-[14px] text-gray-500"},"风险值",-1)),g("span",R,h(e.level_num),1)]),g("div",T,[t[6]||(t[6]=g("span",{class:"text-[14px] text-gray-500"},"风险等级",-1)),g("span",E,h(e.level_id),1)]),g("div",G,[t[7]||(t[7]=g("span",{class:"text-[14px] text-gray-500"},"主要后果",-1)),g("span",K,h(e.main_res),1)]),g("div",M,[t[8]||(t[8]=g("span",{class:"text-[14px] text-gray-500"},"工程措施",-1)),g("span",A,h(e.project_policy),1)]),g("div",B,[t[9]||(t[9]=g("span",{class:"text-[14px] text-gray-500"},"教育培训措施",-1)),g("span",I,h(e.stardard),1)]),g("div",Q,[t[10]||(t[10]=g("span",{class:"text-[14px] text-gray-500"},"管理措施",-1)),g("span",W,h(e.policy),1)]),g("div",X,[t[11]||(t[11]=g("span",{class:"text-[14px] text-gray-500"},"个人安全措施",-1)),g("span",Y,h(e.safe_policy),1)]),g("div",Z,[t[12]||(t[12]=g("span",{class:"text-[14px] text-gray-500"},"应急处置措施",-1)),g("span",$,h(e.emergency_policy),1)]),g("div",ee,[t[13]||(t[13]=g("span",{class:"text-[14px] text-gray-500"},"管控层级",-1)),g("span",ae,h(e.control_name),1)]),g("div",te,[t[14]||(t[14]=g("span",{class:"text-[14px] text-gray-500"},"检查频次",-1)),g("span",le,h(e.frequency),1)])])]))),128))]))),128))]),m(u,{block:"",type:"primary",class:"mt-4",onClick:t[2]||(t[2]=e=>o.value=!1)},{default:y(()=>[...t[15]||(t[15]=[C(" 关闭 ",-1)])]),_:1})])]),_:1},8,["show"])],64)}}},ne={__name:"HazardousChemicalsLedger",setup(e){const{routerPush:t}=x(),l=n({page:1,pageSize:30,name:""}),s=[{title:"部门",className:"three",key:"department_name",uname:"",width:150,type:"selection"},{title:"危化品名称",className:"three",key:"name",uname:"",width:150,type:"selection"},{title:"所在区域",className:"three",key:"area_name",width:100,uname:"",type:"selection"}];async function c({pageNum:e}={pageNum:1}){const a={...l.value,page:e,department_id:0,type:4},t=await q(a);return{total:Number(t.count)||0,data:t.data||[]}}const o=e=>{t("controlDetail",{id:e.id})};return(e,t)=>{const n=b;return p(),i(n,{columns:s,request:c,onOnRowClick:o,form:v(l),"onUpdate:form":t[1]||(t[1]=e=>f(l)?l.value=e:null),floating:[{icon:"search",key:"search"}]},{searchForm:y(()=>[m(a,{form:v(l),"onUpdate:form":t[0]||(t[0]=e=>f(l)?l.value=e:null)},null,8,["form"])]),_:1},8,["form"])}}},ce={class:"flex-center h-[100vh] w-100% items-center relative"},oe=e("default",l({__name:"index",setup(e){const a=n("limitedSpaceLedger");return t("keyControl-click-tab",e=>{a.value=e.name}),(e,t)=>(p(),d("div",ce,["limitedSpaceLedger"===v(a)?(p(),i(se,{key:0})):"hazardousChemicalsLedger"===v(a)?(p(),i(ne,{key:1})):S("",!0)]))}}));"function"==typeof j&&j(oe)}}});
