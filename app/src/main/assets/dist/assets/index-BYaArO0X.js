import{d as f,aD as P,p as N,g as C,a as p,bF as j,bG as E,ad as g,c as b,C as G,b as o,m as d,i as y,y as V,ae as S,h as i,ao as I,J as O,v as J,r as v,F as q,G as B,bH as A,l as K,w as Q,o as H,bI as W,U as X,_ as T,au as _,b3 as U,bJ as Z,bK as ee,bL as te,bM as ne,bN as oe,j as ae,aG as L,aj as se,ay as le,x as D,z as F,e as z}from"./index-5kp1FiRg.js";import{u as re}from"./useTabsListener-CnvSNM1v.js";/* empty css              */import{u as h}from"./useTaskProcessClick-D9hNHbDn.js";import{f as $,g as R}from"./utils-MExYihyT.js";const ue=f({name:"TimeDisplay",__name:"TimeDisplay",props:{time:{},format:{}},setup(s){const l=s,c=P(()=>{if(!l.time)return"--";const n=N(l.time);return n.isValid()?n.format(l.format||"YYYY-MM-DD HH:mm:ss"):"--"});return(n,r)=>(p(),C("span",j(E(n.$attrs)),g(c.value),17))}}),ie={class:"index"},ce={class:"title"},me={style:{"font-size":"15px","font-weight":"bold"}},de={style:{"font-size":"13px",color:"#666"}},pe={class:"label"},_e={key:1,class:"last"},fe=f({__name:"RowComponent",props:{index:{},type:{},typeText:{},title:{},node_name:{},send_user_name:{},app_name:{},created_at:{},customType:{},id:{},process_inst_id:{}},setup(s){const l=s,{handleRowClick:c}=h();return(n,r)=>{const t=I,a=ue,u=G;return p(),b(u,{clickable:!0,border:!1,class:"row",onClick:r[0]||(r[0]=()=>o(c)({key:"detail"},l))},{icon:d(()=>[y("div",ie,[y("span",null,g(s.index),1)])]),title:d(()=>[y("div",ce,[y("span",me,g(s.title),1),y("span",de,g(s.app_name),1)])]),label:d(()=>[y("div",pe,[y("div",{class:S([s.customType?"label-child last-child-full-width":"label-child last-child-width"])},[i(t,{type:s.type,round:""},{default:d(()=>[O(g(s.node_name),1)]),_:1},8,["type"]),y("span",null,g(s.send_user_name),1),s.customType?V("",!0):(p(),b(a,{key:0,class:"last",time:s.created_at,format:"MM-DD HH:mm"},null,8,["time"])),s.customType?(p(),C("span",_e,g(s.customType),1)):V("",!0)],2),s.customType?V("",!0):(p(),b(t,{key:0,type:s.type,round:""},{default:d(()=>[O(g(s.typeText),1)]),_:1},8,["type"]))])]),_:1})}}}),M=J(fe,[["__scopeId","data-v-704f38a6"]]),ve=f({__name:"v-picker",props:{label:{},placeholder:{},readonly:{type:Boolean}},emits:["update:value"],setup(s,{emit:l}){const c=l,n=v(""),r=v(!1),t=u=>N(u).format("MM/DD");function a(u){const[e,m]=u;r.value=!1,n.value="".concat(t(e)," - ").concat(t(m)),c("update:value",[N(e).format("YYYY-MM-DD"),N(m).format("YYYY-MM-DD")])}return(u,e)=>{const m=B,w=A;return p(),C(q,null,[i(m,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=k=>n.value=k),class:S({"van-field-readonly":s.readonly}),"is-link":"",readonly:"",label:s.label,placeholder:s.placeholder,onClick:e[1]||(e[1]=k=>r.value=!0)},null,8,["modelValue","class","label","placeholder"]),i(w,{show:r.value,"onUpdate:show":e[2]||(e[2]=k=>r.value=k),"min-date":new Date(2e3,0,1),type:"range",onConfirm:a},null,8,["show","min-date"])],64)}}}),Y=f({__name:"SearchForm",props:{form:{}},emits:["update:form"],setup(s,{emit:l}){const c=s,n=l,r=[{label:"全部",value:0},{label:"待处理",value:1},{label:"已完成",value:2}].map(u=>({text:u.label,value:u.value})),t=K({...c.form});Q(t,u=>{n("update:form",u)},{deep:!0});const a=v([]);return H(()=>{W({_cache:!0}).then(u=>{const e=[];u.forEach(m=>{m.app_list.forEach(w=>{e.push({value:w.id,text:w.name})})}),a.value=e})}),(u,e)=>{const m=X,w=B,k=ve;return p(),C(q,null,[i(m,{value:o(t).status,"onUpdate:value":e[0]||(e[0]=x=>o(t).status=x),columns:o(r),label:"任务状态",placeholder:"请选择任务状态"},null,8,["value","columns"]),i(m,{value:o(t).type,"onUpdate:value":e[1]||(e[1]=x=>o(t).type=x),columns:a.value,label:"任务类型",placeholder:"请选择任务类型"},null,8,["value","columns"]),i(w,{modelValue:o(t).sender,"onUpdate:modelValue":e[2]||(e[2]=x=>o(t).sender=x),type:"text",name:"text",label:"发送人",placeholder:"发送人"},null,8,["modelValue"]),i(k,{value:o(t).start,"onUpdate:value":e[3]||(e[3]=x=>o(t).start=x),label:"时间",placeholder:"请选择时间"},null,8,["value"])],64)}}}),ye={class:"todo-list"},ge=f({__name:"ToDoList",setup(s){const{handleRowClick:l}=h();async function c({pageNum:r,form:t}){const a=await Z({page:r,status:-1,...R(t)});return{total:Number(a.count),data:a.list}}const n=v({status:"",type:"",sender:"",start:"",end:""});return(r,t)=>{const a=M,u=T;return p(),C("div",ye,[i(u,{form:o(n),"onUpdate:form":t[1]||(t[1]=e=>_(n)?n.value=e:null),request:c,floating:o($),onOnFloatingClick:o(l)},{row:d(({item:e,index:m})=>[i(a,U({type:"warning",index:m+1},e,{"type-text":"进度"}),null,16,["index"])]),searchForm:d(()=>[i(Y,{form:o(n),"onUpdate:form":t[0]||(t[0]=e=>_(n)?n.value=e:null)},null,8,["form"])]),_:1},8,["form","floating","onOnFloatingClick"])])}}}),xe=f({__name:"SendList",setup(s){const{handleRowClick:l}=h();async function c({pageNum:r,form:t}){const a=await ee({page:r,status:0,del:0,...R(t)});return{total:Number(a.count),data:a.list}}const n=v({status:"",type:"",sender:"",start:"",end:""});return(r,t)=>{const a=M,u=T;return p(),b(u,{form:o(n),"onUpdate:form":t[1]||(t[1]=e=>_(n)?n.value=e:null),request:c,floating:o($),onOnFloatingClick:o(l)},{row:d(({item:e,index:m})=>[i(a,U({type:e.process_status==="0"?"warning":"success",index:m+1},e,{"type-text":"进度"}),null,16,["type","index"])]),searchForm:d(()=>[i(Y,{form:o(n),"onUpdate:form":t[0]||(t[0]=e=>_(n)?n.value=e:null)},null,8,["form"])]),_:1},8,["form","floating","onOnFloatingClick"])}}}),be=f({__name:"FinishedList",setup(s){const{handleRowClick:l}=h();async function c({pageNum:r,form:t}){const a=await te({page:r,status:-1,...R(t)});return{total:Number(a.count),data:a.list}}const n=v({status:"",type:"",sender:"",start:"",end:""});return(r,t)=>{const a=M,u=T;return p(),b(u,{form:o(n),"onUpdate:form":t[1]||(t[1]=e=>_(n)?n.value=e:null),request:c,floating:o($),onOnFloatingClick:o(l)},{row:d(({item:e,index:m})=>[i(a,U({type:"success",index:m+1},e,{"type-text":"进度"}),null,16,["index"])]),searchForm:d(()=>[i(Y,{form:o(n),"onUpdate:form":t[0]||(t[0]=e=>_(n)?n.value=e:null)},null,8,["form"])]),_:1},8,["form","floating","onOnFloatingClick"])}}}),we=f({__name:"NoticeList",setup(s){const{handleRowClick:l}=h();async function c({pageNum:r,form:t}){const a=await ne({page:r,status:0,del:0,...R(t)});return{total:Number(a.count),data:a.list}}const n=v({status:"",type:"",sender:"",start:"",end:""});return(r,t)=>{const a=M,u=T;return p(),b(u,{form:o(n),"onUpdate:form":t[1]||(t[1]=e=>_(n)?n.value=e:null),request:c,floating:o($),onOnFloatingClick:o(l)},{row:d(({item:e,index:m})=>[i(a,U({type:e.process_status==="0"?"warning":"success",index:m+1},e,{"type-text":"进度",send_user_name:e.user_name}),null,16,["type","index","send_user_name"])]),searchForm:d(()=>[i(Y,{form:o(n),"onUpdate:form":t[0]||(t[0]=e=>_(n)?n.value=e:null)},null,8,["form"])]),_:1},8,["form","floating","onOnFloatingClick"])}}}),ke=f({__name:"TimingList",setup(s){const{handleRowClick:l}=h();async function c({pageNum:r,form:t}){const a=await oe({page:r,page_size:20,type:4,...R(t)});return{total:Number(a.count),data:a.data}}const n=v({status:"",type:"",sender:"",start:"",end:""});return(r,t)=>{const a=M,u=T;return p(),b(u,{form:o(n),"onUpdate:form":t[1]||(t[1]=e=>_(n)?n.value=e:null),request:c,floating:o($),onOnFloatingClick:o(l)},{row:d(({item:e,index:m})=>[i(a,U({type:"success",index:m+1},e,{"custom-type":e.user_name,created_at:e.user_name,node_name:"".concat(e.begin_date,"~").concat(e.end_date),send_user_name:e.send_time}),null,16,["index","custom-type","created_at","node_name","send_user_name"])]),searchForm:d(()=>[i(Y,{form:o(n),"onUpdate:form":t[0]||(t[0]=e=>_(n)?n.value=e:null)},null,8,["form"])]),_:1},8,["form","floating","onOnFloatingClick"])}}}),Ce={class:"flex-center h-[100vh] w-100% items-center"},he=f({__name:"index",setup(s){const l=v("todo");return ae(),re("task-click-tab",c=>{l.value=c.name}),H(()=>{L(),se(()=>{l.value="todo"})}),le(()=>{L()}),(c,n)=>(p(),C("div",Ce,[D(i(be,null,null,512),[[F,o(l)==="finished"]]),D(i(ge,null,null,512),[[F,o(l)==="todo"]]),D(i(xe,null,null,512),[[F,o(l)==="send"]]),D(i(we,null,null,512),[[F,o(l)==="notice"]]),D(i(ke,null,null,512),[[F,o(l)==="timing"]])]))}});typeof z=="function"&&z(he);export{he as default};
