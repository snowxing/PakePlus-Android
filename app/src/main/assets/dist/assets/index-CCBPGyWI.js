import{u as A}from"./useTabsListener-CnvSNM1v.js";import{d as $,j,r as g,l as L,w as T,o as D,aW as M,g as y,a as b,F,h as l,T as N,U as q,b as h,G as P,B as S,k as B,m as f,au as k,aY as O,aZ as Y,i as s,ad as x,b0 as I,_ as E,aB as G,aD as C,c as J,aE as W,e as U}from"./index-5kp1FiRg.js";import{a as Z}from"./trainingLedger-BE-H7NAp.js";import{g as R}from"./index-BpTLWCN6.js";import{c as z}from"./config-BiPkORWZ.js";const H=$({__name:"ledgerSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(v,{emit:_}){const a=v,m=_;j();const c=g([]);g([]);const i=g([]),u=z.get("workflow_status_list").map(o=>({text:o.name,value:o.id}));g({label:"title",value:"node_id",children:"child"});const e=L({...a.form});T(e,o=>{m("update:form",o)},{deep:!0});async function n(){const o=await R();c.value=o.data||[]}return D(async()=>{n(),i.value=(await M.TRAINING_TYPE()).map(o=>({text:o.title,value:o.id}))}),(o,r)=>{const d=N,t=q,w=P,V=S;return b(),y(F,null,[l(d,{"model-value":e.set_etp_id,"form-create-inject":{options:c.value},placeholder:"请选择公司","onUpdate:modelValue":r[0]||(r[0]=p=>e.set_etp_id=p)},null,8,["model-value","form-create-inject"]),l(t,{value:e.type,"onUpdate:value":r[1]||(r[1]=p=>e.type=p),columns:i.value,placeholder:"请选择培训类型"},null,8,["value","columns"]),l(t,{value:e.status,"onUpdate:value":r[2]||(r[2]=p=>e.status=p),columns:h(u),placeholder:"请选择培训状态"},null,8,["value","columns"]),l(w,{modelValue:e.name,"onUpdate:modelValue":r[3]||(r[3]=p=>e.name=p),type:"text",name:"text",placeholder:"请输入培训项目"},null,8,["modelValue"]),l(V,{"model-value":e.year,format:"YYYY",placeholder:"请选择年度","onUpdate:modelValue":r[4]||(r[4]=p=>p&&(e.year=p))},null,8,["model-value"])],64)}}}),K={class:"todo-list"},Q=["data-index","data-id"],X={class:"flex flex-col w-full"},ee={class:"flex w-full items-center justify-between"},te={class:"text-14px font-bold"},ae={class:"text-13px text-gray-600 mb-10px mt-15px"},ne={class:"mr-15px"},oe={class:"text-13px flex w-full items-center justify-between"},se={class:"text-gray-500"},le={class:"text-13px flex w-full items-center justify-between"},ie={class:"text-gray-500"},re={class:"text-13px flex w-full items-center justify-between"},de={class:"text-gray-500"},ue=["onClick"],ce=$({__name:"TrainingLedger",setup(v){const{routerPush:_}=B(),a=g({set_etp_id:"",type:0,status:"",name:"",is_online:""}),m=[{icon:"search",key:"search"}];async function c({pageNum:e}){const{...n}=a.value,o=await Z({page:e,...n})||{};return{total:Number(o.count||0),data:o.data||[]}}function i(e){const n=[{value:e.category,label:"培训类型"},{value:e.name,label:"培训名称"},{value:e.target,label:"培训主题"},{value:e.subject,label:"培训科目"},{value:e.start_time,label:"培训时间"},{value:e.location,label:"培训地点"},{value:e.department,label:"组织部门"},{value:e.responsible,label:"责任人"},{value:e.status_name,label:"培训状态"},{value:e.input_content,label:"培训内容"},{value:e.is_online,label:"培训方式"}];_("eduDetail",{detail:JSON.stringify(n)})}function u(e){console.warn("item",e),_("scoreList",{id:e.id})}return(e,n)=>{const o=Y,r=O,d=E;return b(),y("div",K,[l(d,{form:h(a),"onUpdate:form":n[1]||(n[1]=t=>k(a)?a.value=t:null),request:c,floating:m},{row:f(({item:t,index:w})=>[(b(),y("div",{key:w,class:"item mx-15px mt-15px p-10px rounded-10px bg-white","data-index":w,"data-id":t.id},[l(r,null,{default:f(()=>[l(o,{span:"18",onClick:V=>i(t)},{default:f(()=>[s("div",X,[s("div",ee,[s("div",te,x(t.name),1)]),s("div",ae,[s("span",ne,x(t.target),1)]),s("div",oe,[s("div",se,x(t.category),1)]),s("div",le,[s("div",ie,x(t.is_online),1)]),s("div",re,[s("div",de,x(t.start_time),1)])])]),_:2},1032,["onClick"]),l(o,{span:"6",class:"items-center !flex"},{default:f(()=>[s("div",{class:"text-13px text-white rounded-10px bg-blue-600 flex h-25px w-90% cursor-pointer items-center justify-center",onClick:I(V=>u(t),["stop"])}," 学员名单 ",8,ue)]),_:2},1024)]),_:2},1024)],8,Q))]),searchForm:f(()=>[l(H,{form:h(a),"onUpdate:form":n[0]||(n[0]=t=>k(a)?a.value=t:null)},null,8,["form"])]),_:1},8,["form"])])}}}),_e=v=>G.get("/task/delay_list",{params:v}),pe=$({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(v,{emit:_}){const a=v,m=_;j();const c=g([]),i=L({...a.form});T(i,e=>{m("update:form",e)},{deep:!0});async function u(){const e=await R();c.value=e.data||[]}return D(()=>{u()}),(e,n)=>{const o=N,r=S,d=P;return b(),y(F,null,[l(o,{"model-value":i.set_etp_id,"form-create-inject":{options:c.value},placeholder:"请选择公司","onUpdate:modelValue":n[0]||(n[0]=t=>i.set_etp_id=t)},null,8,["model-value","form-create-inject"]),l(r,{modelValue:i.begin,"onUpdate:modelValue":n[1]||(n[1]=t=>i.begin=t),label:"开始时间"},null,8,["modelValue"]),l(r,{modelValue:i.end,"onUpdate:modelValue":n[2]||(n[2]=t=>i.end=t),label:"结束时间"},null,8,["modelValue"]),l(d,{modelValue:i.name,"onUpdate:modelValue":n[3]||(n[3]=t=>i.name=t),type:"text",name:"text",placeholder:"请输入培训项目"},null,8,["modelValue"])],64)}}}),me={class:"todo-list"},fe=["data-index","data-id"],ve={class:"flex flex-col w-full"},xe={class:"flex w-full items-center justify-between"},ge={class:"text-14px font-bold"},be={class:"text-13px flex w-full items-center justify-between"},ye={class:"text-gray-500"},we={class:"text-13px flex w-full items-center justify-between"},he={class:"text-gray-500"},$e=$({__name:"TrainingTasks",setup(v){const{routerPush:_}=B(),a=g({type:5,name:"",begin:"",end:"",set_etp_id:""}),m=[{icon:"search",key:"search"}];async function c({pageNum:u}){const e=await _e({page:u,...a.value})||{};return{total:Number(e.count||0),data:e.data||[]}}function i(u){const e=[{value:u.app_name,label:"名称"},{value:u.title,label:"任务类型"},{value:"".concat(u.begin_date,"至").concat(u.end_date),label:"时间起止"},{value:u.user_name,label:"接收人"},{value:u.send_time,label:"发送时间"}];_("eduDetail",{detail:JSON.stringify(e)})}return(u,e)=>{const n=Y,o=O,r=E;return b(),y("div",me,[l(r,{form:h(a),"onUpdate:form":e[1]||(e[1]=d=>k(a)?a.value=d:null),request:c,floating:m},{row:f(({item:d,index:t})=>[(b(),y("div",{key:t,class:"item mx-15px mt-15px p-10px rounded-10px bg-white","data-index":t,"data-id":d.id},[l(o,null,{default:f(()=>[l(n,{span:"18",onClick:w=>i(d)},{default:f(()=>[s("div",ve,[s("div",xe,[s("div",ge,x(d.title),1)]),s("div",be,[s("div",ye,x(d.app_name),1)]),s("div",we,[s("div",he,x("".concat(d.begin_date," 至 ").concat(d.end_date)),1)])])]),_:2},1032,["onClick"])]),_:2},1024)],8,fe))]),searchForm:f(()=>[l(pe,{form:h(a),"onUpdate:form":e[0]||(e[0]=d=>k(a)?a.value=d:null)},null,8,["form"])]),_:1},8,["form"])])}}}),ke={class:"flex-center h-[100vh] w-100% items-center"},Ve=$({__name:"index",setup(v){const _=g("trainingLedger");A("training-manage",c=>{_.value=c.name});const a=C(()=>({trainingLedger:ce,trainingTasks:$e})),m=C(()=>a.value[_.value]||null);return(c,i)=>(b(),y("div",ke,[(b(),J(W(m.value)))]))}});typeof U=="function"&&U(Ve);export{Ve as default};
