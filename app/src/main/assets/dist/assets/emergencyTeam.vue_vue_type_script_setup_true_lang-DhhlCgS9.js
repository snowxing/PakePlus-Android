import{d as b,l as v,w as d,o as g,g as k,a as y,h as m,G as h,F as x,k as V,r as w,c as F,m as f,au as _,b as i,i as N,ad as C,_ as B,b7 as R}from"./index-5kp1FiRg.js";const T=b({__name:"TeamSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(p,{emit:c}){const r=p,l=c,t=v({...r.form});return d(t,n=>{l("update:form",n)},{deep:!0}),d(()=>r.form,n=>{Object.assign(t,n)},{deep:!0,immediate:!0}),g(()=>{}),(n,o)=>{const e=h;return y(),k(x,null,[m(e,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.name=a),type:"text",name:"text",label:"",placeholder:"请输入关联预案"},null,8,["modelValue"]),m(e,{modelValue:t.staff_name,"onUpdate:modelValue":o[1]||(o[1]=a=>t.staff_name=a),type:"text",name:"text",label:"",placeholder:"请输入责任人"},null,8,["modelValue"])],64)}}}),j=b({__name:"emergencyTeam",setup(p){async function c({pageNum:e,form:a}){const u=await R({page:e,...a});return{total:Number(u.count),data:u.data}}const{routerPush:r}=V(),l=w({page_size:30,name:"",staff_name:"",plan_id:0}),t=[{icon:"search",key:"search"}];function n(e){const a=[{label:"公司",value:e.etp_id_name},{label:"关联预案",value:e.plan_name},{label:"责任人",value:e.boss},{label:"职务",value:e.job==="0"?"责任人":e.job==="1"?"执行人":"其它"},{label:"区域位置",value:(e==null?void 0:e.area_name)||(e==null?void 0:e.area)},{label:"职责",value:e.duty},{label:"联系方式",value:e.contact},{label:"值班电话",value:e.phone},{label:"备注",value:e.note},{label:"附件",value:e.files.split(","),renderType:"image"}];r("emergencyDetail",{detail:JSON.stringify(a)})}const o=[{title:"关联预案",key:"plan_name",uname:"",type:"selection"},{title:"责任人",className:"three",key:"boss",uname:"",type:"selection"},{title:"联系方式",className:"three",key:"contact",uname:"",type:"selection"}];return(e,a)=>{const u=B;return y(),F(u,{form:i(l),"onUpdate:form":a[1]||(a[1]=s=>_(l)?l.value=s:null),columns:o,request:c,floating:t,onOnRowClick:n},{"cell-record":f(({row:s})=>[N("div",null,C(s.record==="2"?"已备案":"未备案"),1)]),searchForm:f(()=>[m(T,{form:i(l),"onUpdate:form":a[0]||(a[0]=s=>_(l)?l.value=s:null)},null,8,["form"])]),_:1},8,["form"])}}});export{j as _};
