System.register(["./index-legacy-CK9unWWd.js","./healthRecord-legacy-BCtFxycv.js","./index-legacy-DKq8HLyK.js","./config-legacy-CMljs_xA.js"],function(e,a){"use strict";var t,l,n,o,i,d,r,u,s,c,p,m,f,_,h,g,v,y,b,k,w,x,j,S,V;return{setters:[e=>{t=e.d,l=e.j,n=e.r,o=e.l,i=e.w,d=e.o,r=e.g,u=e.a,s=e.h,c=e.G,p=e.$,m=e.F,f=e.k,_=e.c,h=e.m,g=e.au,v=e.b,y=e.i,b=e.ad,k=e._,w=e.bp,x=e.e},e=>{j=e.g},e=>{S=e.a},e=>{V=e.c}],execute:function(){const a=t({__name:"HealthSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:a}){const t=e,f=a,_=l();n([]);const h=n([]),g=n({label:"title",value:"node_id",children:"child"}),v=o({...t.form});return i(v,e=>{f("update:form",e)},{deep:!0}),i(()=>t.form,e=>{Object.assign(v,e)},{deep:!0,immediate:!0}),d(()=>{!async function(){const{etp_id:e}=_.userInfo,a=await S({id:e,deep:2,enbase:1,is_node:1});h.value=[{title:"全部",node_id:"all",child:a||[]}]}()}),(e,a)=>{const t=c,l=p;return u(),r(m,null,[s(t,{modelValue:v.k,"onUpdate:modelValue":a[0]||(a[0]=e=>v.k=e),type:"text",name:"text",placeholder:"请输入工号"},null,8,["modelValue"]),s(t,{modelValue:v.name,"onUpdate:modelValue":a[1]||(a[1]=e=>v.name=e),type:"text",name:"text",placeholder:"请输入姓名"},null,8,["modelValue"]),s(l,{value:v.department_id,"onUpdate:value":a[2]||(a[2]=e=>v.department_id=e),options:h.value,"field-names":g.value,placeholder:"请选择部门",onChange:a[3]||(a[3]=e=>v.department_id=e)},null,8,["value","options","field-names"])],64)}}}),U=e("default",t({__name:"healthRecord",setup(e){async function t({pageNum:e,form:a}){const t=new FormData;t.append("page",e),t.append("page_size",a.page_size),t.append("cat_id",a.cat_id),t.append("search",JSON.stringify({k:a.k,department_id:a.department_id?.[0]?.value||"",post_id:a.post_id,name:a.name}));const l=await j(t);return{total:Number(l.count),data:l.data}}const{routerPush:l}=f(),o=n({id:"",page_size:30,cat_id:6,type:"",name:"",k:"",department_id:"",post_id:""}),i=[{icon:"search",key:"search"}];function d(e){const a=[{label:"工号",value:e.account},{label:"姓名",value:e.name},{label:"部门",value:e.department},{label:"岗位",value:e.position},{label:"年龄",value:e.age},{label:"入职时间",value:e.start_year},{label:"性别",value:"1"===e.gender?"男":"女"},{label:"身份证号",value:e.card_id},{label:"学历",value:w.find(a=>a.id.toString()===e?.edu?.toString())?.name},{label:"体检附件",value:[e.photo],renderType:"image"}];l("siteDetail",{detail:JSON.stringify(a)})}const r=[{title:"姓名",key:"name",width:"25%"},{title:"工号",key:"account",width:"20%"},{title:"部门",key:"department",width:"20%"},{title:"岗位职务",key:"position",width:"25%"}];return(e,l)=>{const n=k;return u(),_(n,{form:v(o),"onUpdate:form":l[1]||(l[1]=e=>g(o)?o.value=e:null),columns:r,request:t,floating:i,onOnRowClick:d},{"cell-special":h(({row:e})=>[y("div",null,b(v(V).trans("equipment_type",e.special)),1)]),searchForm:h(()=>[s(a,{form:v(o),"onUpdate:form":l[0]||(l[0]=e=>g(o)?o.value=e:null)},null,8,["form"])]),_:1},8,["form"])}}}));"function"==typeof x&&x(U)}}});
