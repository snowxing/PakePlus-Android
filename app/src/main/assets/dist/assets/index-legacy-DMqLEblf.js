System.register(["./index-legacy-CK9unWWd.js","./useTabsListener-legacy-BqsF0NKt.js","./config-legacy-CMljs_xA.js","./index-legacy-DKq8HLyK.js"],function(e,t){"use strict";var a,u,l,n,s,o,r,d,c,i,m,p,y,f,_,v,g,h,k,w,x,V,j,R,b,U,P,F;return{setters:[e=>{a=e.aB,u=e.d,l=e.j,n=e.r,s=e.l,o=e.w,r=e.o,d=e.g,c=e.a,i=e.h,m=e.b,p=e.G,y=e.U,f=e.F,_=e.k,v=e.c,g=e.m,h=e.au,k=e.i,w=e.ad,x=e._,V=e.M,j=e.aD,R=e.aE,b=e.e},e=>{U=e.u},e=>{P=e.c},e=>{F=e.a}],execute:function(){const t=u({__name:"SearchForm",props:{form:{default:()=>({})},dataKey:{default:{year:"implement_year",obj_id:"obj_id"}}},emits:["update:form"],setup(e,{emit:t}){l();const a=e,u=t,_=n(P.get("duty_status").map(e=>({text:e.name,value:e.id}))),v=n([]),g=s({...a.form});return o(g,e=>{u("update:form",e)},{deep:!0}),r(()=>{(async()=>{const e=await F({id:"106"});v.value=(e||[]).map(e=>({text:e.title,value:e.node_id}))})()}),(e,t)=>{const a=p,u=y;return c(),d(f,null,[i(a,{modelValue:m(g).name,"onUpdate:modelValue":t[0]||(t[0]=e=>m(g).name=e),placeholder:"请输入值班名称"},null,8,["modelValue"]),i(u,{modelValue:m(g).type,"onUpdate:modelValue":t[1]||(t[1]=e=>m(g).type=e),columns:v.value,placeholder:"请选择值班类型"},null,8,["modelValue","columns"]),i(u,{modelValue:m(g).status,"onUpdate:modelValue":t[2]||(t[2]=e=>m(g).status=e),columns:_.value,placeholder:"请选择值班状态"},null,8,["modelValue","columns"])],64)}}}),N={class:"text-12px"},D=u({__name:"DutyRecord",setup(e){const{routerPush:u}=_(),s=l(),o=[{icon:"search",key:"search"}],r=n({name:"",type:"",status:""}),d=[{title:"值班名称",key:"name",width:"50%"},{title:"值班类型",key:"type",width:"25%"},{title:"值班状态",key:"status",width:"25%"}];async function p({pageNum:e}={pageNum:1}){const t={page:e,...r.value},u=await async function(e){return a.get("/ensafe/turn_list",{params:e})}(t);return{total:Number(u?.count)||0,data:u?.data||[]}}function y(e){s.getPri("duty-record",1)?u("task-process",{appid:3,transid:e.process_inst_id,task_id:e.id}):V("暂无权限")}return(e,a)=>{const u=x;return c(),v(u,{form:m(r),"onUpdate:form":a[1]||(a[1]=e=>h(r)?r.value=e:null),columns:d,floating:o,request:p,onOnRowClick:y},{"cell-status":g(({row:e})=>[k("div",N,w(m(P).trans("duty_status",e.status)),1)]),searchForm:g(()=>[i(t,{form:m(r),"onUpdate:form":a[0]||(a[0]=e=>h(r)?r.value=e:null)},null,8,["form"])]),_:1},8,["form"])}}}),K={class:"flex-center h-[100vh] w-100% items-center"},L=e("default",u({__name:"index",setup(e){const t=l(),a=n("dutyRecord"),{routerPush:u}=_();U("duty-tab",e=>{a.value=e.name});const s=j(()=>({dutyRecord:D})),o=j(()=>"dutyRecord"===a.value?s.value.dutyRecord:t.getPri("duty-record",1)?(u("task-process",{app_id:3,task_id:0}),null):(V("暂无权限"),s.value.dutyRecord));return(e,t)=>(c(),d("div",K,[(c(),v(R(o.value)))]))}}));"function"==typeof b&&b(L)}}});
