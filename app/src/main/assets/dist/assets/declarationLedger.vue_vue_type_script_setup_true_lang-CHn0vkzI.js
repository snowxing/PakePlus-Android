import{d as h,k as p,r as d,c as m,a as b,m as t,h as f,au as s,b as o,i as k,ad as v,_ as y}from"./index-5kp1FiRg.js";import{g as w}from"./healthRecord-nYYKLBYx.js";import{_ as x}from"./SearchForm.vue_vue_type_script_setup_true_lang-NNpuA64h.js";const N=h({__name:"declarationLedger",setup(j){async function l({pageNum:e,form:a}){const n=new FormData;n.append("page",e),n.append("set_etp_id",a.set_etp_id),n.append("page_size",a.page_size),n.append("cat_id",a.cat_id),n.append("search",JSON.stringify({xiang_mu_ming_cheng:a.xiang_mu_ming_cheng,shen_bao_shi_jian:a.shen_bao_shi_jian}));const _=await w(n);return{total:Number(_.count),data:_.data}}const{routerPush:r}=p(),i=d({set_etp_id:"@",page_size:30,cat_id:1,xiang_mu_ming_cheng:"",shen_bao_shi_jian:""}),u=[{icon:"search",key:"search"}];function g(e){const a=[{label:"项目名称",value:e.xiang_mu_ming_cheng},{label:"责任人",value:e.ze_ren_ren},{label:"申报类别",value:e.shen_bao_lei_bie},{label:"员工人数",value:e.yuan_gong_ren_shu},{label:"委外人数",value:e.wei_wai_ren_shu},{label:"执行情况",value:e.zhi_hang_qing_kuang},{label:"申报时间",value:e.shen_bao_shi_jian},{label:"备注",value:e.bei_zhu},{label:"附件",value:e.fu_jian.split(","),renderType:"image"}];r("siteDetail",{detail:JSON.stringify(a)})}const c=[{title:"项目名称",key:"xiang_mu_ming_cheng",width:"30%"},{title:"责任人",key:"ze_ren_ren",width:"20%"},{title:"执行情况",key:"zhi_hang_qing_kuang",width:"20%"},{title:"申报时间",key:"shen_bao_shi_jian",width:"20%"}];return(e,a)=>{const n=y;return b(),m(n,{form:o(i),"onUpdate:form":a[1]||(a[1]=_=>s(i)?i.value=_:null),columns:c,request:l,floating:u,onOnRowClick:g},{"cell-month":t(({row:_})=>[k("div",null,v(_.plan_time),1)]),searchForm:t(()=>[f(x,{form:o(i),"onUpdate:form":a[0]||(a[0]=_=>s(i)?i.value=_:null),"data-key":{xiang_mu_ming_cheng:"xiang_mu_ming_cheng",shen_bao_shi_jian:"shen_bao_shi_jian"}},null,8,["form"])]),_:1},8,["form"])}}});export{N as _};
