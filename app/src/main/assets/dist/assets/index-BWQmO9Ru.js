import{u as x}from"./useTabsListener-CnvSNM1v.js";import{aB as U,d as w,j as F,r as p,l as V,w as v,o as C,g as b,a as c,F as B,h as g,G as M,U as N,k as L,c as u,_ as O,m as h,i as $,ad as S,a6 as j,y as q,b as _,e as R}from"./index-5kp1FiRg.js";import{g as D}from"./index-BpTLWCN6.js";import{c as z}from"./config-BiPkORWZ.js";async function E(r){return U.get("/ensafe/check_record_list",{params:r})}const G=w({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(r,{emit:s}){const n=r,m=s;F();const i=p([]),a=V({...n.form}),d=p([]);p([]),v(a,e=>{m("update:form",e)},{deep:!0}),v(()=>n.form,e=>{Object.assign(a,e)},{deep:!0,immediate:!0});async function y(){const e=await D();i.value=e.data||[]}return C(()=>{y(),d.value=z.get("safety_check_status").map(e=>({text:e.name,value:e.id}))}),(e,t)=>{const l=M,o=N;return c(),b(B,null,[g(l,{modelValue:a.inspect_name,"onUpdate:modelValue":t[0]||(t[0]=k=>a.inspect_name=k),type:"text",name:"text",label:"",placeholder:"请输入检查名称"},null,8,["modelValue"]),g(o,{value:a.status,"onUpdate:value":t[1]||(t[1]=k=>a.status=k),placeholder:"检查状态",columns:d.value},null,8,["value","columns"])],64)}}}),f=w({__name:"list",props:{inspect_type:{}},setup(r){const s=r;async function n({pageNum:e,form:t}){const l=await E({...t,page:e,inspect_type:Number(s.inspect_type)});return{total:Number(l.count),data:l.data}}const{routerPush:m}=L(),i=p({page:1,page_size:30,inspect_name:"",inspect_type:0,status:-1,year:"",set_etp_id:"",type:void 0}),a=[{icon:"search",key:"search"}];function d(e){m("task-process",{task_id:0,app_id:14,param:"launch|3-".concat(e.id)})}const y=[{title:"检查名称",key:"inspect_name",width:"30%"},{title:"发起人",key:"send",width:"20%"},{title:"接收人",key:"candidate",width:"25%"},{title:"状态",key:"status",width:"20%"}];return(e,t)=>{const l=O;return c(),u(l,{form:i.value,"onUpdate:form":t[1]||(t[1]=o=>i.value=o),columns:y,request:n,floating:a,onOnRowClick:d},{"cell-status":h(({row:o})=>[$("div",null,S(o.status=="1"?"已完成":"进行中"),1)]),searchForm:h(()=>[g(G,{form:i.value,"onUpdate:form":t[0]||(t[0]=o=>i.value=o)},null,8,["form"])]),_:1},8,["form"])}}}),I={class:"absolute inset-0"},P={__name:"index",setup(r){let s=p("inspectRecords");return x("message-click-tab",n=>{s.value=n.name}),C(()=>{}),j(()=>{}),(n,m)=>(c(),b("div",I,[_(s)==="inspectRecords"?(c(),u(f,{key:0,ref:"myMsgRef",inspect_type:"0"},null,512)):_(s)==="investigationRecords"?(c(),u(f,{key:1,ref:"myMsgRef2",inspect_type:"6814612"},null,512)):_(s)==="XunchaRecords"?(c(),u(f,{key:2,ref:"myMsgRef3",inspect_type:"6813441"},null,512)):_(s)==="selfCheck"?(c(),u(f,{key:3,ref:"myMsgRef4",inspect_type:"6813440"},null,512)):q("",!0)]))}};typeof R=="function"&&R(P);export{P as default};
