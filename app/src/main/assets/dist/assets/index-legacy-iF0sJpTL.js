System.register(["./index-legacy-CK9unWWd.js","./login-legacy-KFVPtnqQ.js"],function(e,l){"use strict";var a,t,s,n,i,o,r,d,u,c,m,g,b,v,f,y,p,h,w,_,x,q,S,V,U;return{setters:[e=>{a=e.d,t=e.f,s=e.j,n=e.r,i=e.l,o=e.aD,r=e.a6,d=e.o,u=e.g,c=e.a,m=e.i,g=e.h,b=e.b,v=e.a9,f=e.m,y=e.G,p=e.H,h=e.J,w=e.ad,_=e.a2,x=e.bc,q=e.bf,S=e.v,V=e.e},e=>{U=e.l}],execute:function(){const j=""+new URL("logo1-sMjQXvfZ.png",l.meta.url).href,k={class:"m-x-a text-center w-7xl"},I={class:"mb-32 mt-20"},M={class:"rounded-3xl overflow-hidden"},$={class:"mt-16 rounded-3xl overflow-hidden"},z={class:"mt-16"},C=a({__name:"index",setup(e){const l=t(),a=s(),S=n(!1);n(!1);const V=i({mobile:"",code:""}),C=i({mobile:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],code:[{required:!0,message:"请输入验证码"}]}),D=n(!1),E=n(0);let P=null;n(!1);const R=o(()=>E.value>0?`${E.value}秒后重新获取`:D.value?"获取中...":"获取验证码");async function B(){if(V.mobile)if(/^1[3-9]\d{9}$/.test(V.mobile)){D.value=!0;try{const e=await q({type:3,mobile:Number(V.mobile)});console.log(e),1==e?(x({type:"success",message:"验证码已发送，请注意查收短信"}),E.value=120,P=setInterval(()=>{E.value--,E.value<=0&&clearInterval(P)},1e3)):x({type:"danger",message:e.message||"获取验证码失败"})}catch(e){x({type:"danger",message:e.message||"获取验证码失败"})}finally{D.value=!1}}else x({type:"warning",message:"请输入正确的手机号"});else x({type:"warning",message:"请输入手机号"})}function G(){l.push({name:"new-register"})}async function H(e){try{const t=a.getEidUser(),s={mobile:e.mobile,code:e.code,eid:t.eid};S.value=!0,await a.newSigninSms(s),await a.setMenus(),a.activeOnlineTimer();let{redirect:n,...i}=l.currentRoute.value.query;"404"===n&&(n="chatPage"),l.push({name:n||"chatPage",query:{...i}})}finally{S.value=!1}}return r(()=>{P&&clearInterval(P)}),d(async()=>{a.setEidUser({})}),(e,l)=>{const a=v,t=y,s=p,n=_;return c(),u("div",k,[m("div",I,[g(a,{src:b(j),class:"h-60 w-60",alt:"brand logo"},null,8,["src"]),l[2]||(l[2]=m("div",{style:{color:"#008fd7","font-weight":"900","font-style":"italic"}}," DeepSafety ",-1))]),g(n,{model:b(V),rules:b(C),"validate-trigger":"onSubmit",onSubmit:H},{default:f(()=>[m("div",M,[g(t,{modelValue:b(V).mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>b(V).mobile=e),label:"手机号",required:"",rules:b(C).mobile,name:"mobile",placeholder:"请输入手机号"},null,8,["modelValue","rules"])]),m("div",$,[g(t,{modelValue:b(V).code,"onUpdate:modelValue":l[1]||(l[1]=e=>b(V).code=e),modelModifiers:{trim:!0},rules:b(C).code,required:"",name:"code",label:"验证码",placeholder:"请输入验证码"},{button:f(()=>[g(s,{size:"small",type:"primary",plain:"",disabled:b(E)>0||b(D),loading:b(D),onClick:B},{default:f(()=>[h(w(b(R)),1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue","rules"])]),m("div",z,[g(s,{loading:b(S),type:"primary","native-type":"submit",round:"",block:""},{default:f(()=>[...l[3]||(l[3]=[h(" 登录 ",-1)])]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),g(s,{class:"no-boder-button",size:"small",plain:"",type:"primary",onClick:G},{default:f(()=>[...l[4]||(l[4]=[h(" 还没有账号？点击注册 ",-1)])]),_:1}),m("div",null,[g(a,{class:"mt-16 h-196 w-256",src:b(U),fit:"cover",alt:"login background"},null,8,["src"])])])}}});"function"==typeof V&&V(C),e("default",S(C,[["__scopeId","data-v-a5fbaf85"]]))}}});
