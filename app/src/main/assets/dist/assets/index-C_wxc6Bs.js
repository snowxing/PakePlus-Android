import{v as k,_ as x}from"./inline-px-to-vw-fKV0BGSA.js";import{d as q,a7 as B,f as M,j as N,r as v,l as y,aD as U,g as D,a as G,h as t,m as n,i,G as T,b as e,H as z,J as c,ad as f,a2 as F,av as R,bc as w,e as h}from"./index-5kp1FiRg.js";import"./toNumber-CHkHQ8jj.js";const j={class:"m-x-a text-center w-7xl"},H={class:"rounded-3xl overflow-hidden"},I={class:"mt-16 rounded-3xl overflow-hidden"},J={class:"mt-16 rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16"},K=q({__name:"index",setup(O){const{t:r}=B(),V=M(),g=N(),m=v(!1),s=y({email:"",code:"",password:"",confirmPassword:""}),b=o=>o===s.password,l=y({email:[{required:!0,message:r("forgot-password.pleaseEnterEmail")}],code:[{required:!0,message:r("forgot-password.pleaseEnterCode")}],password:[{required:!0,message:r("forgot-password.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:r("forgot-password.pleaseEnterConfirmPassword")},{required:!0,validator:b,message:r("forgot-password.passwordsDoNotMatch")}]});async function C(){try{m.value=!0,(await g.reset()).code===0&&(w({type:"success",message:r("forgot-password.passwordResetSuccess")}),V.push({name:"login"}))}finally{m.value=!1}}const p=v(!1),P=U(()=>p.value?r("forgot-password.gettingCode"):r("forgot-password.getCode"));async function E(){if(!s.email){w({type:"warning",message:r("forgot-password.pleaseEnterEmail")});return}p.value=!0;const o=await g.getCode();o.code===0&&w({type:"success",message:"".concat(r("forgot-password.sendCodeSuccess"),": ").concat(o.result)}),p.value=!1}return(o,a)=>{const u=T,_=z,S=F,$=x;return G(),D("div",j,[t(S,{model:e(s),rules:e(l),"validate-trigger":"onSubmit",onSubmit:C},{default:n(()=>[i("div",H,[t(u,{modelValue:e(s).email,"onUpdate:modelValue":a[0]||(a[0]=d=>e(s).email=d),modelModifiers:{trim:!0},rules:e(l).email,name:"email",placeholder:o.$t("forgot-password.email")},null,8,["modelValue","rules","placeholder"])]),i("div",I,[t(u,{modelValue:e(s).code,"onUpdate:modelValue":a[1]||(a[1]=d=>e(s).code=d),modelModifiers:{trim:!0},rules:e(l).code,name:"code",placeholder:o.$t("forgot-password.code")},{button:n(()=>[t(_,{size:"small",type:"primary",plain:"",onClick:E},{default:n(()=>[c(f(e(P)),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),i("div",J,[t(u,{modelValue:e(s).password,"onUpdate:modelValue":a[2]||(a[2]=d=>e(s).password=d),modelModifiers:{trim:!0},type:"password",rules:e(l).password,name:"password",placeholder:o.$t("forgot-password.password")},null,8,["modelValue","rules","placeholder"])]),i("div",L,[t(u,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=d=>e(s).confirmPassword=d),modelModifiers:{trim:!0},type:"password",rules:e(l).confirmPassword,name:"confirmPassword",placeholder:o.$t("forgot-password.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),i("div",A,[t(_,{loading:e(m),type:"primary","native-type":"submit",round:"",block:""},{default:n(()=>[c(f(o.$t("forgot-password.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t($,{to:"login",block:"",style:R({"margin-top":e(k)(8)})},{default:n(()=>[c(f(o.$t("forgot-password.backToLogin")),1)]),_:1},8,["style"])])}}});typeof h=="function"&&h(K);export{K as default};
