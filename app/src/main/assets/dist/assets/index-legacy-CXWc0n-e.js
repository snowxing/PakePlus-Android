System.register(["./useTabsListener-legacy-BqsF0NKt.js","./index-legacy-CK9unWWd.js","./Detail-legacy-Hfctf5Uv.js","./config-legacy-CMljs_xA.js","./HazardListSearchForm.vue_vue_type_script_setup_true_lang-legacy-Cqh8BITg.js","./Detail.vue_vue_type_style_index_0_scoped_de43671c_lang-legacy-CnvmjJHj.js"],function(e,a){"use strict";var l,t,n,s,u,o,i,r,c,m,d,p,_,v,f,h,y,b,g,k,w,x,N,U,V,O,C,j,F,R,z;return{setters:[e=>{l=e.u},e=>{t=e.aB,n=e.d,s=e.j,u=e.r,o=e.l,i=e.w,r=e.o,c=e.g,m=e.a,d=e.F,p=e.h,_=e.G,v=e.U,f=e.k,h=e.m,y=e.au,b=e.b,g=e.i,k=e.ad,w=e._,x=e.aq,N=e.H,U=e.J,V=e.aD,O=e.c,C=e.aE,j=e.e},e=>{F=e.D},e=>{R=e.c},e=>{z=e._},null],execute:function(){const a=n({__name:"MyReportSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:a}){const l=e,t=a;s(),u([]);const n=o({...l.form}),f=u([]),h=u([]);return i(n,e=>{t("update:form",e)},{deep:!0}),i(()=>l.form,e=>{Object.assign(n,e)},{deep:!0,immediate:!0}),r(()=>{f.value=[{value:1,text:"待审核"},{value:2,text:"确认"},{value:3,text:"退回"}],h.value=R.get("hidden_level_list").map(e=>({text:e.name,value:e.id}))}),(e,a)=>{const l=_,t=v;return m(),c(d,null,[p(l,{modelValue:n.location,"onUpdate:modelValue":a[0]||(a[0]=e=>n.location=e),type:"text",name:"text",label:"",placeholder:"请输入隐患地点"},null,8,["modelValue"]),p(l,{modelValue:n.desc,"onUpdate:modelValue":a[1]||(a[1]=e=>n.desc=e),type:"text",name:"text",label:"",placeholder:"请输入隐患描述"},null,8,["modelValue"]),p(t,{value:n.status,"onUpdate:value":a[2]||(a[2]=e=>n.status=e),placeholder:"状态",columns:f.value},null,8,["value","columns"])],64)}}}),S={class:"text-12px"},M=n({__name:"MyReport",setup(e){const{routerPush:l}=f(),n=[{title:"地点",className:"created_at",key:"input_2",width:"30%"},{title:"隐患描述",key:"input_3",width:"30%"},{title:"状态",className:"three",key:"radio_6",width:"30%"}],s=[{status:0,name:"退回"},{status:1,name:"确认"},{status:2,name:"待审核"}],o=u({pageSize:30,name:"",sort:"zh",status:"",level:"",set_etp_id:"",start_date:"",end_date:"",location:"",desc:""});async function i({pageNum:e}={pageNum:1}){const a={page:e,...o.value},l=await async function(e){return t.get("/ensafe/report_risk_list",{params:e})}(a);return{total:Number(l.count)||0,data:l.data||[]}}const r=u(!1),d=u([]);function _(e){l("task-process",{taskid:"",transid:e.process_inst_id,appid:0})}return(e,l)=>{const t=w,u=F,v=x;return m(),c("div",null,[p(t,{form:b(o),"onUpdate:form":l[1]||(l[1]=e=>y(o)?o.value=e:null),columns:n,request:i,floating:[{icon:"search",key:"search"}],onOnRowClick:_},{"cell-radio_6":h(({row:e})=>[g("div",S,k(s.find(a=>a.status==e.radio_6)?.name||""),1)]),searchForm:h(()=>[p(a,{form:b(o),"onUpdate:form":l[0]||(l[0]=e=>y(o)?o.value=e:null)},null,8,["form"])]),_:1},8,["form"]),p(v,{show:b(r),"onUpdate:show":l[2]||(l[2]=e=>y(r)?r.value=e:null),position:"bottom",style:{height:"70%"}},{default:h(()=>[p(u,{items:b(d)},null,8,["items"])]),_:1},8,["show"])])}}}),T=n({__name:"MyCheckSearchForm",props:{form:{default:{}},checkTypeOptions:{}},emits:["update:form"],setup(e,{emit:a}){const l=e,t=a;s(),u([]);const n=o({...l.form}),f=u([]);return i(n,e=>{t("update:form",e)},{deep:!0}),i(()=>l.form,e=>{Object.assign(n,e)},{deep:!0,immediate:!0}),r(()=>{f.value=R.get("safety_check_status").map(e=>({text:e.name,value:e.id}))}),(e,a)=>{const l=_,t=v;return m(),c(d,null,[p(l,{modelValue:n.inspect_name,"onUpdate:modelValue":a[0]||(a[0]=e=>n.inspect_name=e),type:"text",name:"text",label:"",placeholder:"请输入检查名称"},null,8,["modelValue"]),p(t,{value:n.status,"onUpdate:value":a[1]||(a[1]=e=>n.status=e),placeholder:"检查状态",columns:f.value},null,8,["value","columns"])],64)}}}),q={class:"text-12px"},D=n({__name:"MyCheck",setup(e){const{routerPush:a}=f(),l=u({page_size:30,inspect_name:"",inspect_type:0,status:-1,year:"",set_etp_id:"",type:void 0}),n=[{title:"检查名称",className:"three",key:"inspect_name",width:"50%",uname:"",type:"selection"},{title:"检查状态",className:"three",key:"status",uname:"",width:"20%",editable:!1,searchable:!1},{title:"操作",className:"three",key:"call",uname:"",width:"20%",editable:!1,searchable:!1}],s=[{status:0,name:"进行中"},{status:1,name:"已完成"},{status:2,name:"中止"}],o=u([]);async function i({pageNum:e}={pageNum:1}){const a={page:e,status:-1,...l.value},n=await async function(e){return t.get("/ensafe/check_record_list",{params:e})}(a);return o.value=(n.inspect_type||[]).map(e=>({text:e.title,value:e.node_id})),{total:Number(n.count)||0,data:n.data||[]}}const r=u(!1),d=u([]);function _(e){r.value=!0,d.value=[{label:"公司",value:e.etp_id_name},{label:"检查名称",value:e.inspect_name},{label:"检查类型",value:e.inspect_type},{label:"发起人",value:e.send},{label:"接收人",value:e.candidate},{label:"发送时间",value:e.send_time},{label:"计划完成时间",value:e.finished_time||"-"},{label:"处理状态",value:s.find(a=>a.status==e.status)?.name||""},{label:"备注",value:e.remarks}]}return(e,t)=>{const u=N,v=w,f=F,V=x;return m(),c("div",null,[p(v,{columns:n,request:i,onOnRowClick:_,form:b(l),"onUpdate:form":t[1]||(t[1]=e=>y(l)?l.value=e:null),floating:[{icon:"search",key:"search"}]},{"cell-status":h(({row:e})=>[g("div",q,k(s.find(a=>a.status==e.status)?.name||""),1)]),"cell-call":h(({row:e})=>[p(u,{type:"primary",size:"small",onClick:l=>{a("task-process",{task_id:0,app_id:12,param:`launch_check|4_${e.process_inst_id}`})}},{default:h(()=>[...t[3]||(t[3]=[U(" 调用 ",-1)])]),_:1},8,["onClick"])]),searchForm:h(()=>[p(T,{form:b(l),"onUpdate:form":t[0]||(t[0]=e=>y(l)?l.value=e:null),checkTypeOptions:b(o)},null,8,["form","checkTypeOptions"])]),_:1},8,["form"]),p(V,{show:b(r),"onUpdate:show":t[2]||(t[2]=e=>y(r)?r.value=e:null),position:"bottom",style:{height:"70%"}},{default:h(()=>[p(f,{items:b(d)},null,8,["items"])]),_:1},8,["show"])])}}}),H={class:"text-12px"},P={class:"text-12px"},A={class:"text-12px"},L=n({__name:"MyRectification",setup(e){const{routerPush:a}=f(),l=[{title:"隐患地点",key:"place",width:"18%"},{title:"隐患描述",key:"desc",width:"18%"},{title:"隐患级别",key:"level",width:"18%"},{title:"状态",key:"status",width:"15%"},{title:"来源",key:"sources",width:"15%"}],n=[{value:10,label:"5S"},{value:11,label:"脚手搭设"},{value:12,label:"个人防护"},{value:13,label:"动能皮带"},{value:14,label:"脚手点检"},{value:15,label:"脚手定置"},{value:16,label:"定置管理"},{value:17,label:"安全用电"},{value:18,label:"管线架空"},{value:19,label:"设备设施"},{value:20,label:"作业安全"},{value:21,label:"设备点检"},{value:22,label:"安全监护"},{value:23,label:"私搭私拆"},{value:24,label:"目视管理"},{value:25,label:"作业审批"},{value:26,label:"通风照明"},{value:27,label:"脚手材料"},{value:28,label:"消防管理"},{value:29,label:"违章吸烟"},{value:30,label:"火灾"},{value:31,label:"皮带出舱"},{value:32,label:"攀爬脚手"},{value:33,label:"环保"},{value:34,label:"高空抛物"},{value:35,label:"其他"},{value:36,label:"设备保护"},{value:37,label:"跑冒滴漏"}],s=[{name:"",id:0},{name:"重大",id:1},{name:"较大",id:2},{name:"一般",id:3}],o=u({inspect_name:"",inspect_type:0,status:-1,sort:"zh",location:"",desc:"",level:"",set_etp_id:"",start_date:"",end_date:""});async function i({pageNum:e}={pageNum:1}){const a={...o.value,page:e},l=await async function(e){return t.get("/ensafe/risk_record_list",{params:e})}(a);return{total:Number(l.count)||0,data:l.data||[]}}const r=u(!1),d=u([]);function _(e){r.value=!0;let a=R.trans("zhenggai_status",e.status);0==e.status&&"1"==e.sign&&(a="超纳期");const l=[{label:"隐患地点",value:e.place},{label:"隐患级别",value:R.trans("hidden_level_list",e.level)},{label:"隐患描述",value:e.desc},{label:"整改要求及措施",value:e.fix_policy},{label:"责任部门",value:e.fixman_uid_department_id_depart_name},{label:"状态",value:a},{label:"隐患类别",value:n.find(a=>a.value===e.risk_value)?.label||""},{label:"责任人",value:e.fixman_uid_user_name},{label:"整改纳期",value:e.need_fix_time},{label:"资金投入",value:e.money},{label:"整改验收人",value:e.fixman},{label:"发现地点",value:e.place},{label:"发现时间",value:e.find_time},{label:"整改前图片",value:e.before_image,renderType:"image"},{label:"整改后图片",value:e.after_image,renderType:"image"}];d.value=l}return(e,t)=>{const u=N,v=w,f=F,V=x;return m(),c("div",null,[p(v,{form:b(o),"onUpdate:form":t[1]||(t[1]=e=>y(o)?o.value=e:null),columns:l,request:i,floating:[{icon:"search",key:"search"}],onOnRowClick:_},{"cell-select_7":h(({row:e})=>[g("div",H,k(n.find(a=>a.value==e.risk_value)?.label||""),1)]),"cell-level":h(({row:e})=>[g("div",P,k(s.find(a=>a.id==e.level)?.name||""),1)]),"cell-status":h(({row:e})=>[g("div",A,k("0"===e.status&&"1"===e.sign?"超纳期":b(R).trans("zhenggai_status",e.status)),1)]),"cell-sources":h(({row:e})=>[p(u,{type:"primary",size:"small",onClick:l=>{var t;a("task-process",{appid:0,transid:(t=e).process_inst_id,task_id:t.id})}},{default:h(()=>[...t[3]||(t[3]=[U(" 进度 ",-1)])]),_:1},8,["onClick"])]),searchForm:h(()=>[p(z,{form:b(o),"onUpdate:form":t[0]||(t[0]=e=>y(o)?o.value=e:null)},null,8,["form"])]),_:1},8,["form"]),p(V,{show:b(r),"onUpdate:show":t[2]||(t[2]=e=>y(r)?r.value=e:null),position:"bottom",style:{height:"70%"}},{default:h(()=>[p(f,{items:b(d)},null,8,["items"])]),_:1},8,["show"])])}}}),W=n({__name:"MyWorkSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:a}){const l=e,t=a;s(),u([]);const n=o({...l.form}),f=u([]);return i(n,e=>{t("update:form",e)},{deep:!0}),i(()=>l.form,e=>{Object.assign(n,e)},{deep:!0,immediate:!0}),r(()=>{f.value=["动火作业","受限空间作业","高处作业","临时用电作业","吊装作业","盲板抽堵作业","动土作业","断路作业"].map(e=>({value:e,text:e}))}),(e,a)=>{const l=v,t=_;return m(),c(d,null,[p(l,{value:n.name,"onUpdate:value":a[0]||(a[0]=e=>n.name=e),placeholder:"作业类型",columns:f.value},null,8,["value","columns"]),p(t,{modelValue:n.no,"onUpdate:modelValue":a[1]||(a[1]=e=>n.no=e),type:"text",name:"text",label:"",placeholder:"请输入作业编号"},null,8,["modelValue"])],64)}}}),J=n({__name:"MyWork",setup(e){const{routerPush:a}=f(),l=u({page_size:30,name:"",power_name:"",no:""}),n=[{title:"作业类型",className:"three",width:"40%",key:"type"},{title:"作业编号",width:"35%",key:"no"},{title:"申请人",key:"send_user_name"}];async function s({pageNum:e}={pageNum:1}){const a={page:e,department_id:0,level:0,sign:2,my_self:1,...l.value},n=await async function(e){return t.get("/ensafe/lisense_list",{params:e})}(a);return{total:Number(n.count)||0,data:n.data||[]}}function o(e){a("task-process",{app_id:8,transid:e.process_inst_id})}return(e,a)=>{const t=w;return m(),c("div",null,[p(t,{form:b(l),"onUpdate:form":a[1]||(a[1]=e=>y(l)?l.value=e:null),columns:n,request:s,floating:[{icon:"search",key:"search"}],onOnRowClick:o},{searchForm:h(()=>[p(W,{form:b(l),"onUpdate:form":a[0]||(a[0]=e=>y(l)?l.value=e:null)},null,8,["form"])]),_:1},8,["form"])])}}}),B=n({__name:"AccidentSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:a}){const l=e,t=a,n=o({...l.form}),s=u([]);return i(n,e=>{t("update:form",e)},{deep:!0}),i(()=>l.form,e=>{Object.assign(n,e)},{deep:!0,immediate:!0}),r(()=>{s.value=R.get("accident_type").map(e=>({text:e.name,value:e.id}))}),(e,a)=>{const l=_,t=v;return m(),c(d,null,[p(l,{modelValue:n.name,"onUpdate:modelValue":a[0]||(a[0]=e=>n.name=e),type:"text",name:"text",label:"",placeholder:"请输入事故名称"},null,8,["modelValue"]),p(t,{value:n.types,"onUpdate:value":a[1]||(a[1]=e=>n.types=e),placeholder:"事故类型",columns:s.value},null,8,["value","columns"]),p(l,{modelValue:n.staff_name,"onUpdate:modelValue":a[2]||(a[2]=e=>n.staff_name=e),type:"text",name:"text",label:"",placeholder:"请输入责任人名称"},null,8,["modelValue"])],64)}}}),E=n({__name:"AccidentHandling",setup(e){const a=[{title:"事故名称",className:"three",key:"input_1",width:"30%",uname:"",type:"selection"},{title:"事故地点",className:"three",key:"input_location",uname:"",width:"30%",editable:!1,searchable:!1},{title:"事故时间",className:"three",key:"date_2",uname:"",width:"30%",editable:!1,searchable:!1}],l=u({type:0,types:"",name:"",staff_name:"",doc_type:1,set_etp_id:""});async function n({pageNum:e}={pageNum:1}){const a={page:e,...l.value},n=await async function(e){return t.get("/ensafe/accident_list",{params:e})}(a);return{total:Number(n.count)||0,data:n.data||[]}}const s=u(!1),o=u([]);function i(e){s.value=!0,o.value=[{label:"公司",value:e.etp_id_name},{label:"事故时间",value:e.date_2},{label:"事故名称",value:e.input_1},{label:"事故类型",value:R.trans("accident_type",e.select_3)},{label:"整改措施",value:e.input_4},{label:"责任人",value:e.treeselect_5},{label:"备注",value:e.input_8},{label:"附件",value:JSON.parse(e.upload_10),renderType:"image"}]}return(e,t)=>{const u=w,r=F,d=x;return m(),c("div",null,[p(u,{form:b(l),"onUpdate:form":t[1]||(t[1]=e=>y(l)?l.value=e:null),columns:a,request:n,floating:[{icon:"search",key:"search"}],onOnRowClick:i},{searchForm:h(()=>[p(B,{form:b(l),"onUpdate:form":t[0]||(t[0]=e=>y(l)?l.value=e:null)},null,8,["form"])]),_:1},8,["form"]),p(d,{show:b(s),"onUpdate:show":t[2]||(t[2]=e=>y(s)?s.value=e:null),position:"bottom",style:{height:"70%"}},{default:h(()=>[p(r,{items:b(o)},null,8,["items"])]),_:1},8,["show"])])}}}),G={class:"flex-center h-[100vh] w-100% items-center"},K=e("default",n({__name:"index",setup(e){const a=u("basic");l("securityAffairs-tab",e=>{a.value=e.name});const t=V(()=>({myReport:M,myCheck:D,myRectification:L,myWork:J,accidentHandling:E})),n=V(()=>t.value[a.value]||null);return(e,a)=>(m(),c("div",G,[(m(),O(C(n.value)))]))}}));"function"==typeof j&&j(K)}}});
