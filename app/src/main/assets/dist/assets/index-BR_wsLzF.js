import{u as A}from"./useTabsListener-CnvSNM1v.js";import{d as g,j as E,r as b,l as R,w as C,o as U,aW as B,g as f,a as x,F as V,h as l,T as F,U as q,G as P,f as J,k as T,m as d,au as $,b as k,D,C as M,H as G,b0 as z,J as H,_ as O,aD as w,c as I,aE as W,e as j}from"./index-5kp1FiRg.js";import{g as N}from"./examinationManagement-BquIePsd.js";import{g as S}from"./index-BpTLWCN6.js";const X=g({__name:"ExamSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(v,{emit:i}){const s=v,r=i;E();const m=b([]),u=b([]),t=R({...s.form});C(t,e=>{r("update:form",e)},{deep:!0}),C(()=>s.form,e=>{Object.assign(t,e)},{deep:!0,immediate:!0});async function n(){const e=await S();m.value=e.data||[]}return U(async()=>{n(),u.value=(await B.EXAM_TYPE()).map(e=>({text:e.title,value:e.alias}))}),(e,a)=>{const c=F,o=q,y=P;return x(),f(V,null,[l(c,{"model-value":t.set_etp_id,"form-create-inject":{options:m.value},placeholder:"请选择公司","onUpdate:modelValue":a[0]||(a[0]=_=>t.set_etp_id=_)},null,8,["model-value","form-create-inject"]),l(o,{value:t.exam_type,"onUpdate:value":a[1]||(a[1]=_=>t.exam_type=_),columns:u.value,placeholder:"请选择考试类型"},null,8,["value","columns"]),l(y,{modelValue:t.name,"onUpdate:modelValue":a[2]||(a[2]=_=>t.name=_),type:"text",name:"text",placeholder:"请输入考试名称"},null,8,["modelValue"])],64)}}}),Y={class:"todo-list"},K=["data-index","data-id","onClick"],Q=g({__name:"ExamRecords",setup(v){const i=J(),{routerPush:s}=T(),r=b({set_etp_id:"",type:0,exam_type:0,get_type:"all",name:"",tab_type:2}),m=[{icon:"search",key:"search"}];async function u({pageNum:e}){const{...a}=r.value,c=await N({page:e,...a})||{};return{total:Number(c.count||0),data:c.data||[]}}function t(e){i.push({name:"examPeopleResult",query:{id:e.eid}})}function n(e){const a=[{value:e.exam_type==="3"?"外部考试":e.exam_type==="2"?"正式考试":"模拟考试",label:"考试类型"},{value:e.title,label:"考试名称"},{value:e.exam_object,label:"考试对象"},{value:e.note,label:"考试内容"},{value:e.begin_time,label:"开始时间"},{value:e.end_time,label:"结束时间"},{value:e.exam_place,label:"考试地点"},{value:e.department_name?e.department_name:"-",label:"责任部门"},{value:e.exam_status,label:"考试状态"}];s("eduDetail",{detail:JSON.stringify(a)})}return(e,a)=>{const c=M,o=D,y=G,_=O;return x(),f("div",Y,[l(_,{form:k(r),"onUpdate:form":a[1]||(a[1]=p=>$(r)?r.value=p:null),request:u,floating:m},{row:d(({item:p,index:h})=>[(x(),f("div",{key:h,class:"item mx-15px mt-15px p-10px rounded-10px bg-white","data-index":h,"data-id":p.id,onClick:L=>n(p)},[l(o,{class:"exam-item"},{default:d(()=>[l(c,{"title-class":"bold text-14px",title:"考试名称：".concat(p.title)},null,8,["title"])]),_:2},1024),l(c,{class:"text-13px text-gray-600",title:"考试对象：".concat(p.exam_object)},null,8,["title"]),l(c,{class:"text-13px text-gray-600",title:"考试类型：".concat(p.exam_type==="3"?"外部考试":p.exam_type==="2"?"正式考试":"模拟考试")},null,8,["title"]),l(c,{class:"text-13px text-gray-500",title:"".concat(p.begin_time," 至 ").concat(p.end_time)},null,8,["title"]),l(c,{class:"text-14px",title:"成绩统计:"},{extra:d(()=>[l(y,{size:"small",type:"primary",onClick:z(L=>t(p),["stop"])},{default:d(()=>[...a[2]||(a[2]=[H(" 学员名单 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)],8,K))]),searchForm:d(()=>[l(X,{form:k(r),"onUpdate:form":a[0]||(a[0]=p=>$(r)?r.value=p:null)},null,8,["form"])]),_:1},8,["form"])])}}}),Z=g({__name:"TestPaperSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(v,{emit:i}){const s=v,r=i;E();const m=b([]),u=R({...s.form});C(u,n=>{r("update:form",n)},{deep:!0}),C(()=>s.form,n=>{Object.assign(u,n)},{deep:!0,immediate:!0});async function t(){const n=await S();m.value=n.data||[]}return U(async()=>{t()}),(n,e)=>{const a=F,c=P;return x(),f(V,null,[l(a,{"model-value":u.set_etp_id,"form-create-inject":{options:m.value},placeholder:"请选择公司","onUpdate:modelValue":e[0]||(e[0]=o=>u.set_etp_id=o)},null,8,["model-value","form-create-inject"]),l(c,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=o=>u.name=o),type:"text",name:"text",placeholder:"请输入考试名称"},null,8,["modelValue"])],64)}}}),ee={class:"todo-list"},te=["data-index","data-id","onClick"],ae=g({__name:"TestPaperManagement",setup(v){const{routerPush:i}=T(),s=b({set_etp_id:"",exam_type:"1",get_type:"all",name:""}),r=[{icon:"search",key:"search"}];async function m({pageNum:t}){const{...n}=s.value,e=await N({page:t,...n})||{};return{total:Number(e.count||0),data:e.data||[]}}function u(t){const n=[{value:t.exam_type==="3"?"外部考试":t.exam_type==="2"?"正式考试":"模拟考试",label:"考试类型"},{value:t.title,label:"考试名称"},{value:t.exam_object,label:"考试对象"},{value:t.note,label:"考试内容"},{value:t.begin_time,label:"开始时间"},{value:t.end_time,label:"结束时间"},{value:t.exam_place,label:"考试地点"},{value:t.department_name?t.department_name:"-",label:"责任部门"},{value:t.exam_status,label:"考试状态"}];i("eduDetail",{detail:JSON.stringify(n)})}return(t,n)=>{const e=M,a=D,c=O;return x(),f("div",ee,[l(c,{form:k(s),"onUpdate:form":n[1]||(n[1]=o=>$(s)?s.value=o:null),request:m,floating:r},{row:d(({item:o,index:y})=>[(x(),f("div",{key:y,class:"item mx-15px mt-15px p-10px rounded-10px bg-white","data-index":y,"data-id":o.id,onClick:_=>u(o)},[l(a,{class:"exam-item"},{default:d(()=>[l(e,{"title-class":"bold text-14px",title:"考试名称：".concat(o.title)},null,8,["title"])]),_:2},1024),l(e,{class:"text-13px text-gray-600",title:"考试对象：".concat(o.exam_object)},null,8,["title"]),l(e,{class:"text-13px text-gray-500",title:"".concat(o.begin_time," 至 ").concat(o.end_time)},null,8,["title"])],8,te))]),searchForm:d(()=>[l(Z,{form:k(s),"onUpdate:form":n[0]||(n[0]=o=>$(s)?s.value=o:null)},null,8,["form"])]),_:1},8,["form"])])}}}),le={class:"flex-center h-[100vh] w-100% items-center"},ne=g({__name:"index",setup(v){const i=b("ExamRecords");A("exam-manage",m=>{i.value=m.name});const s=w(()=>({ExamRecords:Q,TestPaperManagement:ae})),r=w(()=>s.value[i.value]||null);return(m,u)=>(x(),f("div",le,[(x(),I(W(r.value)))]))}});typeof j=="function"&&j(ne);export{ne as default};
