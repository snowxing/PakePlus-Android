import{d as v,l as y,w as m,o as g,g as k,a as b,h as p,G as x,F as V,k as w,r as F,c as h,m as d,au as f,b as _,i as C,ad as B,_ as N,b9 as R}from"./index-5kp1FiRg.js";const U=v({__name:"evacuationSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(i,{emit:c}){const s=i,t=c,l=y({...s.form});return m(l,n=>{t("update:form",n)},{deep:!0}),m(()=>s.form,n=>{Object.assign(l,n)},{deep:!0,immediate:!0}),g(()=>{}),(n,o)=>{const e=x;return b(),k(V,null,[p(e,{modelValue:l.evacuation_plan,"onUpdate:modelValue":o[0]||(o[0]=a=>l.evacuation_plan=a),type:"text",name:"text",label:"",placeholder:"请输入应急预案名称"},null,8,["modelValue"]),p(e,{modelValue:l.evacuation_site,"onUpdate:modelValue":o[1]||(o[1]=a=>l.evacuation_site=a),type:"text",name:"text",label:"",placeholder:"请输入疏散地点"},null,8,["modelValue"])],64)}}}),O=v({__name:"evacuation",setup(i){async function c({pageNum:e,form:a}){const u=await R({page:e,...a});return{total:Number(u.count),data:u.data}}const{routerPush:s}=w(),t=F({type:0,field:"",value:"",evacuation_plan:"",evacuation_site:"",plan_id:""}),l=[{icon:"search",key:"search"}];function n(e){const a=[{label:"编号",value:e.no},{label:"应急预案名称",value:e.plan_name},{label:"疏散地点",value:e.place},{label:"责任部门",value:e==null?void 0:e.department},{label:"责任人",value:e.staff_name},{label:"联系方式",value:e.contact},{label:"备注",value:e.remarks},{label:"疏散计划附件",value:e.files,renderType:"image"},{label:"疏散计划图",value:[e.map],renderType:"image"}];s("emergencyDetail",{detail:JSON.stringify(a)})}const o=[{title:"应急预案名称",key:"plan_name"},{title:"疏散地点",key:"place",type:"selection"},{title:"责任人",key:"staff_name"}];return(e,a)=>{const u=N;return b(),h(u,{form:_(t),"onUpdate:form":a[1]||(a[1]=r=>f(t)?t.value=r:null),columns:o,request:c,floating:l,onOnRowClick:n},{"cell-record":d(({row:r})=>[C("div",null,B(r.record==="2"?"已备案":"未备案"),1)]),searchForm:d(()=>[p(U,{form:_(t),"onUpdate:form":a[0]||(a[0]=r=>f(t)?t.value=r:null)},null,8,["form"])]),_:1},8,["form"])}}});export{O as _};
