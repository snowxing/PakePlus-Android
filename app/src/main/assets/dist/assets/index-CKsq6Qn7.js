import{u as w}from"./useTabsListener-CnvSNM1v.js";import{aB as g,d as v,r as d,l as x,w as C,o as V,c as l,a as n,G as B,k as F,_ as N,b,au as k,m as R,h as U,g as q,y as m,e as h}from"./index-5kp1FiRg.js";import{c as D}from"./config-BiPkORWZ.js";async function L(o){return g.get("/enpartner/related_parties_list?",{params:o})}const O=v({__name:"SearchForm",props:{form:{default:{}},dataKey:{}},emits:["update:form"],setup(o,{emit:a}){const r=o,u=a;d([]),d([]);const t=x({...r.form});return C(t,c=>{u("update:form",c)},{deep:!0}),V(()=>{}),(c,p)=>{const f=B;return n(),l(f,{modelValue:t.name,"onUpdate:modelValue":p[0]||(p[0]=e=>t.name=e),type:"text",name:"text",placeholder:"请输入单位名称"},null,8,["modelValue"])}}}),_=v({__name:"list",props:{type:{}},setup(o){const a=o;async function r({pageNum:e,form:s}){const i=await L({page:e,...s,business_type:a.type});return{total:Number(i.count),data:i.data}}const{routerPush:u}=F(),t=d({name:"",type:"0",project:"",department_id:"",staff_id:"",set_etp_id:"",business_type:""}),c=[{icon:"search",key:"search"}];function p(e){const s=[{label:"单位名称",value:e.company_name},{label:"责任人",value:e.staff},{label:"工号",value:e.account.slice(4)},{label:"业务类型",value:D.trans("business_type",e.business_type)},{label:"主要业务",value:e.main_business},{label:"入厂时间",value:e.start_date},{label:"合同期限",value:e.contract_term},{label:"对接部门",value:e.department},{label:"备注",value:e.remarks},{label:"附件",value:e.files.split(","),renderType:"image"}];u("siteDetail",{detail:JSON.stringify(s)})}const f=[{title:"单位名称",key:"company_name",width:"35%"},{title:"主要业务",key:"main_business",width:"30%"},{title:"合同期限",key:"contract_term",width:"20%"}];return(e,s)=>{const i=N;return n(),l(i,{form:b(t),"onUpdate:form":s[1]||(s[1]=y=>k(t)?t.value=y:null),columns:f,request:r,floating:c,onOnRowClick:p},{searchForm:R(()=>[U(O,{form:b(t),"onUpdate:form":s[0]||(s[0]=y=>k(t)?t.value=y:null)},null,8,["form"])]),_:1},8,["form"])}}}),S={class:"flex-center h-[100vh] w-100% items-center"},T=v({__name:"index",setup(o){const a=d("");return w("stakeholder-tab",r=>{a.value=r.name}),(r,u)=>(n(),q("div",S,[a.value==="stakeholder"?(n(),l(_,{key:0,type:"0"})):m("",!0),a.value==="contractor"?(n(),l(_,{key:1,type:"1"})):m("",!0),a.value==="supplier"?(n(),l(_,{key:2,type:"2"})):m("",!0),a.value==="operator"?(n(),l(_,{key:3,type:"3"})):m("",!0)]))}});typeof h=="function"&&h(T);export{T as default};
