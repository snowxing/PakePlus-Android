import{v as S,_ as x}from"./inline-px-to-vw-fKV0BGSA.js";import{d as q,a7 as M,f as N,j as U,r as _,l as y,aD as B,g as D,a as G,h as l,m,i as n,G as T,b as e,H as z,J as p,ad as g,a2 as F,av as j,bc as f,e as h}from"./index-5kp1FiRg.js";import"./toNumber-CHkHQ8jj.js";const H={class:"m-x-a text-center w-7xl"},I={class:"rounded-3xl overflow-hidden"},J={class:"mt-16 rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16 rounded-3xl overflow-hidden"},K={class:"mt-16"},O=q({__name:"index",setup(Q){const{t:r}=M(),V=N(),w=U(),u=_(!1),s=y({email:"",code:"",nickname:"",password:"",confirmPassword:""}),k=o=>o===s.password,d=y({email:[{required:!0,message:r("register.pleaseEnterEmail")}],code:[{required:!0,message:r("register.pleaseEnterCode")}],nickname:[{required:!0,message:r("register.pleaseEnterNickname")}],password:[{required:!0,message:r("register.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:r("register.pleaseEnterConfirmPassword")},{required:!0,validator:k,message:r("register.passwordsDoNotMatch")}]});async function b(){try{u.value=!0,(await w.register()).code===0&&(f({type:"success",message:r("register.registerSuccess")}),V.push({name:"login"}))}finally{u.value=!1}}const c=_(!1),C=B(()=>c.value?r("register.gettingCode"):r("register.getCode"));async function P(){if(!s.email){f({type:"warning",message:r("register.pleaseEnterEmail")});return}c.value=!0;const o=await w.getCode();o.code===0&&f({type:"success",message:"".concat(r("register.sendCodeSuccess"),": ").concat(o.result)}),c.value=!1}return(o,t)=>{const i=T,v=z,E=F,$=x;return G(),D("div",H,[l(E,{model:e(s),rules:e(d),"validate-trigger":"onSubmit",onSubmit:b},{default:m(()=>[n("div",I,[l(i,{modelValue:e(s).email,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).email=a),modelModifiers:{trim:!0},rules:e(d).email,name:"email",placeholder:o.$t("register.email")},null,8,["modelValue","rules","placeholder"])]),n("div",J,[l(i,{modelValue:e(s).code,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).code=a),modelModifiers:{trim:!0},rules:e(d).code,name:"code",placeholder:o.$t("register.code")},{button:m(()=>[l(v,{size:"small",type:"primary",plain:"",onClick:P},{default:m(()=>[p(g(e(C)),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),n("div",L,[l(i,{modelValue:e(s).nickname,"onUpdate:modelValue":t[2]||(t[2]=a=>e(s).nickname=a),modelModifiers:{trim:!0},rules:e(d).nickname,name:"nickname",placeholder:o.$t("register.nickname")},null,8,["modelValue","rules","placeholder"])]),n("div",R,[l(i,{modelValue:e(s).password,"onUpdate:modelValue":t[3]||(t[3]=a=>e(s).password=a),modelModifiers:{trim:!0},type:"password",rules:e(d).password,name:"password",placeholder:o.$t("register.password")},null,8,["modelValue","rules","placeholder"])]),n("div",A,[l(i,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=a=>e(s).confirmPassword=a),modelModifiers:{trim:!0},type:"password",rules:e(d).confirmPassword,name:"confirmPassword",placeholder:o.$t("register.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),n("div",K,[l(v,{loading:e(u),type:"primary","native-type":"submit",round:"",block:""},{default:m(()=>[p(g(o.$t("register.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),l($,{to:"login",block:"",style:j({"margin-top":e(S)(8)})},{default:m(()=>[p(g(o.$t("register.backToLogin")),1)]),_:1},8,["style"])])}}});typeof h=="function"&&h(O);export{O as default};
