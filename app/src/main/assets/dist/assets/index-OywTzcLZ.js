import{_ as y}from"./v-form-create.vue_vue_type_script_setup_true_lang-ByjVgJF_.js";import{d as q,u as v,r as m,w as k,o as h,aG as b,g as w,a as f,E as J,b as s,F as g,S as i,bP as x,bQ as F,bR as S,M as B,c as D,e as _}from"./index-5kp1FiRg.js";import{c as T}from"./utils-MExYihyT.js";const $=q({__name:"index",setup(A){const a=v(),r=m({forms:[],action:void 0}),o=m(0);async function n(){if(a.query.formJson){const e=a.query.formJson,t=Array.isArray(e)?e[0]:e;r.value={forms:[{title:"决策会议",formid:"formid",inputs:t?JSON.parse(t).forms:[]}],action:a.query.action},i.set("process-params",{app_id:a.query.app_id})}else if(a.query.viewtask)x({transid:a.query.tid}).then(e=>{r.value=e});else if(Number(a.query.task_id)===0){const e={app_id:a.query.app_id,tid:a.query.tid||0,hid:0,rid:0,nid:0,param:a.query.param,fid:a.query.fid||0};F(e).then(t=>{r.value=t,i.set("process-params",{app_id:t.app_id,task_id:0,isadmin:t.isadmin,formJson:t,startDataParams:e})})}else S(a.query).then(e=>{r.value=e,i.set("process-params",{...a.query,task_id:e.taskid,app_id:e.app_id})}).catch(e=>{B(e)})}return k(()=>a.query,()=>{o.value&&n(),o.value+=1},{immediate:!0}),h(()=>{a.query.app_id==="9"&&b(),n()}),(e,t)=>{const l=y;return f(!0),w(g,null,J(s(r).forms,(c,p)=>{var u,d;return f(),D(l,{key:"".concat(s(o),"-").concat(c.id||p),action:s(r).action,json:c,convert:s(T),expand:p===((d=(u=s(r))==null?void 0:u.forms)==null?void 0:d.length)-1},null,8,["action","json","convert","expand"])}),128)}}});typeof _=="function"&&_($);export{$ as default};
