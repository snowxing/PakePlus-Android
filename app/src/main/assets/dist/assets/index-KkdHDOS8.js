import{d,j as C,r as p,l as N,w as y,o as k,g as v,a as f,F,h as u,G as V,b as m,k as w,c as x,m as j,_ as z,N as U,O as D,x as g,z as h,e as b}from"./index-5kp1FiRg.js";import{g as O}from"./MedicalExaminationRecord-DUQi2oY_.js";import{_ as $}from"./AccSearchForm.vue_vue_type_script_setup_true_lang-Dhb4mZkZ.js";import{g as R}from"./information-CGEsnMWk.js";import{u as S}from"./useTabsListener-CnvSNM1v.js";import"./config-BiPkORWZ.js";import"./index-BpTLWCN6.js";const q=d({__name:"AccSearchForm",props:{form:{default:()=>({})},dataKey:{default:{year:"implement_year",obj_id:"obj_id"}}},emits:["update:form"],setup(_,{emit:o}){var i;const r=_,a=o;(i=C())==null||i.userInfo,p([]);const s=N({...r.form});return y(s,c=>{a("update:form",c)},{deep:!0}),y(()=>r.form,c=>{Object.assign(s,c)},{deep:!0,immediate:!0}),k(()=>{}),(c,n)=>{const e=V;return f(),v(F,null,[u(e,{modelValue:m(s).xiang_mu_ming_cheng,"onUpdate:modelValue":n[0]||(n[0]=t=>m(s).xiang_mu_ming_cheng=t),placeholder:"请输入项目名称"},null,8,["modelValue"]),u(e,{modelValue:m(s).fu_ze_ren,"onUpdate:modelValue":n[1]||(n[1]=t=>m(s).fu_ze_ren=t),placeholder:"请输入负责人"},null,8,["modelValue"])],64)}}}),B=d({__name:"Accountability",setup(_){async function o({pageNum:n,form:e}){const t=new FormData;t.append("cat_id","2"),t.append("total","0"),t.append("set_etp_id",""),t.append("page",n.toString()),t.append("search",JSON.stringify({fu_ze_ren:e.fu_ze_ren,xiang_mu_ming_cheng:e.xiang_mu_ming_cheng}));const l=await O(t);return{total:Number(l.count),data:l.data}}const{routerPush:r}=w(),a=p({cat_id:2,total:0,fu_ze_ren:"",xiang_mu_ming_cheng:"",set_etp_id:null}),s=[{icon:"search",key:"search"}];function i(n){r("accountabilityDetail",n)}const c=[{title:"项目名称",className:"three",key:"xiang_mu_ming_cheng",uname:"",width:"50%",type:"selection"},{title:"负责人",className:"three",key:"fu_ze_ren",width:"40%"}];return(n,e)=>{const t=z;return f(),x(t,{form:a.value,"onUpdate:form":e[1]||(e[1]=l=>a.value=l),columns:c,request:o,floating:s,onOnRowClick:i},{searchForm:j(()=>[u(q,{form:a.value,"onUpdate:form":e[0]||(e[0]=l=>a.value=l),"data-key":{set_etp_id:"set_etp_id",obj_id:"obj_id"}},null,8,["form"])]),_:1},8,["form"])}}}),L=d({__name:"Target",setup(_){async function o({pageNum:n,form:e}){const t=await U({page:n,...e});return{total:Number(t.count),data:t.list}}const{routerPush:r}=w(),a=p({year:"",obj_id:"",set_etp_id:""}),s=[{icon:"search",key:"search"}];function i(n){r("goalView",{id:n.id})}const c=[{title:"考核对象",className:"three",key:"assessment_object",uname:"",width:"20%",type:"selection"},{title:"安全目标",className:"three",key:"goal",width:"50%",uname:"",type:"selection"},{title:"实施年度",className:"five",key:"year",uname:"",width:"20%",type:"selection"}];return(n,e)=>{const t=z;return f(),x(t,{form:a.value,"onUpdate:form":e[1]||(e[1]=l=>a.value=l),columns:c,request:o,floating:s,onOnRowClick:i},{searchForm:j(()=>[u($,{form:a.value,"onUpdate:form":e[0]||(e[0]=l=>a.value=l),"data-key":{year:"year",set_etp_id:"set_etp_id",obj_id:"obj_id"}},null,8,["form"])]),_:1},8,["form"])}}}),A={style:{height:"calc(100vh - 60px)"}},P=d({__name:"Organization",setup(_){const o=p({});k(()=>{R({id:"aqjg",deep:3,base:1,fresh:1,self:1,visit_eid:0}).then(a=>{console.log(a),o.value=a[0]})});const r={id:"id",pid:"parent_id",label:"title",children:"child"};return(a,s)=>{const i=D("vue3-tree-org");return f(),v("div",A,[u(i,{disabled:!0,draggable:"",center:"","node-draggable":!1,data:m(o),props:r,collapsable:!0,horizontal:!1,scalable:!0,"expand-all":"true","default-expand-level":3},null,8,["data"])])}}}),I={class:"flex-center w-100% items-center"},T=d({__name:"index",setup(_){const o=p("org");return S("anquanzhize-click-tab",r=>{o.value=r.name}),(r,a)=>(f(),v("div",I,[g(u(P,null,null,512),[[h,o.value==="org"]]),g(u(L,null,null,512),[[h,o.value==="target"]]),g(u(B,null,null,512),[[h,o.value==="acc"]])]))}});typeof b=="function"&&b(T);export{T as default};
