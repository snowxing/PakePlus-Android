import{d as v,l as k,w as f,g,a as b,h as u,b as s,G as V,B as x,F as w,k as h,r as F,c as C,_ as U,m as _,I as B}from"./index-5kp1FiRg.js";import{g as I}from"./index-DpOfbo4u.js";const N=v({__name:"SearchForm",props:{form:{default:()=>({})}},emits:["update:form"],setup(m,{emit:d}){const i=m,c=d,a=k({...i.form});return f(a,o=>{c("update:form",o)},{deep:!0}),f(()=>i.form,o=>{Object.assign(a,o)},{deep:!0,immediate:!0}),(o,l)=>{const p=V,e=x;return b(),g(w,null,[u(p,{modelValue:s(a).name,"onUpdate:modelValue":l[0]||(l[0]=t=>s(a).name=t),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"]),u(e,{modelValue:s(a).start_date,"onUpdate:modelValue":l[1]||(l[1]=t=>s(a).start_date=t),placeholder:"开始时间"},null,8,["modelValue"]),u(e,{modelValue:s(a).end_date,"onUpdate:modelValue":l[2]||(l[2]=t=>s(a).end_date=t),placeholder:"结束时间"},null,8,["modelValue"])],64)}}}),R=v({__name:"list",props:{type:{}},setup(m){const d=m;async function i({pageNum:e,form:t}){const n=await I({page:e,...t,type:d.type});return{total:Number(n.count),data:n.data}}const{routerPush:c}=h(),a=F({name:"",no:"",start_date:"",end_date:""}),o=[{icon:"search",key:"search"}];function l(e){const t=e.files.substring(e.files.lastIndexOf("/")+1),n=[{value:e.name,label:"名称"},{value:e.no,label:"文号"},{value:e.authority,label:"颁布机构"},{value:e.issue_date,label:"颁布日期"},{value:e.work_date,label:"生效日期"},{value:e.revision_date,label:"修订日期"},{value:e.category,label:"类别"},{value:e.note,label:"备注"},{value:t,label:"附件",renderType:"slot"}];c("institutionalizedDetail",{detail:JSON.stringify(n)})}const p=[{title:"名称",key:"name"},{title:"颁布机构",key:"authority"},{title:"日期",key:"issue_date"},{title:"附件",key:"files",width:55}];return(e,t)=>{const n=B,y=U;return b(),C(y,{form:a.value,"onUpdate:form":t[1]||(t[1]=r=>a.value=r),columns:p,request:i,floating:o,onOnRowClick:l},{"cell-files":_(({row:r})=>[u(n,{"class-prefix":"iconfujian",class:"iconfont menu-icon",name:"extra",alt:r.files},null,8,["alt"])]),searchForm:_(()=>[u(N,{form:a.value,"onUpdate:form":t[0]||(t[0]=r=>a.value=r)},null,8,["form"])]),_:1},8,["form"])}}});export{R as _};
