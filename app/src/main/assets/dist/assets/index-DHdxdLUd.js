import{D as M}from"./Detail-CBGWh8FM.js";import{r as O,f as R,h as j,i as B,j as H,k as J,l as U,s as W,m as F,n as K}from"./trainingStatistics-Dmh4PdZ9.js";import{d as h,r as o,aL as Q,g as _,a as p,h as i,i as n,b,ao as X,m as N,J as Y,ad as $,aq as Z,y as tt,_ as at,H as et,v as w,w as lt,c as st,ae as nt,o as D,e as S}from"./index-5kp1FiRg.js";/* empty css              */import{u as q,E as z}from"./useSystemTheme-lyMPqukv.js";import{i as it}from"./install-neqUmNW9.js";import{u as A,i as L,a as P,b as T,c as G,d as I}from"./install-CoVyZzHx.js";import{i as ot}from"./install-BO7C1UUT.js";/* empty css                                                               */import"./createSeriesDataSimply-BFEE_GIw.js";const ut={class:"title center"},rt={class:"body"},dt={class:"title border-buttom"},ct={key:0},mt={key:1},vt={key:2},pt=h({__name:"GaugeChart",props:{type:{},data:{}},setup(m){const e=m,l={safe:{title:"安全指数",value:()=>{var t;return((t=e.data)==null?void 0:t.save_fraction)/10||0},getData:async({pageNum:t,form:s})=>{var u;const c=((u=e.data)==null?void 0:u.base_doc)||[];return{total:c.length,data:c}}},risk:{title:"风险指标",value:()=>{var t;return((t=e.data)==null?void 0:t.risk_fraction.actual)/5||0},getData:async({pageNum:t,form:s})=>({total:0,data:[]}),riskGetData:async({pageNum:t,form:s})=>({total:0,data:[]})},base:{title:"基础指标",value:()=>{var t;return((t=e.data)==null?void 0:t.base_fraction)/4||0},getData:async({pageNum:t,form:s})=>{var u;const c=((u=e.data)==null?void 0:u.base_doc)||[];return{total:c.length,data:c}}}}[e.type];q(),A([L,it,P,T,G,I]);const d=o({tooltip:{trigger:"item",formatter:"{b} : {c} %"},series:[{name:l.title,type:"gauge",data:[{value:l.value(),name:l.title}],radius:"80%",center:["50%","50%"],min:0,max:100,splitNumber:5,axisLine:{lineStyle:{width:10,color:[[.2,"#62c87f"],[.8,"#5d9cec"],[1,"#f15755"]]}},axisTick:{length:13,lineStyle:{color:"auto"}},splitLine:{length:18,lineStyle:{color:"auto"}},axisLabel:{color:"#666"},detail:{formatter:"{value}%",fontSize:24,offsetCenter:[0,"85%"]},title:{fontSize:12,color:"#999",offsetCenter:[0,"55%"]},pointer:{width:3}}]}),f=o(!1);function y(){f.value=!0}async function g({pageNum:t,form:s}){var c,u,k,x;return{total:2,data:[{evaluate:"未整改的隐患",num:((c=e.data)==null?void 0:c.risk_total)||0,fraction:((u=e.data)==null?void 0:u.risk_deduct)||0},{evaluate:"未完成的检查",num:((k=e.data)==null?void 0:k.check_total)||0,fraction:((x=e.data)==null?void 0:x.check_deduct)||0}]}}const v=o([{title:"扣分明细",key:"evaluate",width:"50%",align:"center"},{title:"数量",key:"num",width:"20%"},{title:"扣分值",key:"fraction",width:"30%"}]),a=o([...v.value,{title:"操作",key:"active",width:"30%",render:()=>Q(et,{plain:!0,hairline:!0,type:"primary",size:"mini"},"查看")}]);return(t,s)=>{const c=X,u=at,k=Z;return p(),_("div",null,[i(b(z),{class:"chart",option:d.value,autoresize:""},null,8,["option"]),n("div",ut,[i(c,{type:"primary",size:"large",onClick:y},{default:N(()=>[Y($(b(l).title),1)]),_:1})]),i(k,{show:f.value,"onUpdate:show":s[0]||(s[0]=x=>f.value=x),position:"bottom",style:{height:"50%"}},{default:N(()=>[n("div",rt,[n("div",dt,$(b(l).title)+"扣分明细 ",1),m.type==="safe"?(p(),_("div",ct,[s[1]||(s[1]=n("div",{class:"title pd"}," 基础指标 ",-1)),i(u,{"show-index":!1,columns:v.value,request:b(l).getData},null,8,["columns","request"]),s[2]||(s[2]=n("div",{class:"title pd"}," 风险指标 ",-1)),i(u,{"show-index":!1,columns:v.value,request:g},null,8,["columns"])])):m.type==="risk"?(p(),_("div",mt,[s[3]||(s[3]=n("div",{class:"title pd"}," 风险指标 ",-1)),i(u,{"show-index":!1,columns:a.value,request:g},null,8,["columns"])])):m.type==="base"?(p(),_("div",vt,[s[4]||(s[4]=n("div",{class:"title pd"}," 基础指标 ",-1)),i(u,{"show-index":!1,columns:v.value,request:b(l).getData},null,8,["columns","request"])])):tt("",!0)])]),_:1},8,["show"])])}}}),C=w(pt,[["__scopeId","data-v-94392c6c"]]),V=h({__name:"DangerBarChart",props:{data:{},class:{}},setup(m){const e=m;q(),A([L,ot,P,T,G,I]);const r=o({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},xAxis:{type:"category",axisLabel:{rotate:45,fontWeight:"bold"},data:[]},yAxis:{type:"value"},series:[{data:[],type:"bar"}]});return lt(()=>e.data,l=>{r.value.xAxis.data=(l==null?void 0:l.x)||[],r.value.series[0].data=(l==null?void 0:l.value)||[]},{}),(l,d)=>(p(),st(b(z),{class:nt({[e.class]:!0}),option:r.value,autoresize:""},null,8,["class","option"]))}}),_t=h({__name:"RegionBarChart",setup(m){const e=o({});function r(){O({}).then(l=>{e.value=l})}return D(()=>{r()}),(l,d)=>(p(),_("div",null,[d[0]||(d[0]=n("div",{class:"title"}," 隐患对比分析（地区/板块） ",-1)),i(V,{class:"chart",data:e.value},null,8,["data"])]))}}),ft=w(_t,[["__scopeId","data-v-be4ea3b4"]]),bt=h({__name:"CompanyBarChart",setup(m){const e=o({});function r(){R({}).then(l=>{e.value=l})}return D(()=>{r()}),(l,d)=>(p(),_("div",null,[d[0]||(d[0]=n("div",{class:"title"}," 隐患对比分析（公司） ",-1)),i(V,{class:"chart",data:e.value},null,8,["data"])]))}}),gt=w(bt,[["__scopeId","data-v-bbc61de3"]]),ht={class:"flex-center h-[100vh] w-100% items-center"},yt={class:"card"},kt={class:"card"},xt={class:"card"},wt={class:"card"},Ct={class:"title between"},E=h({__name:"index",setup(m){const e=o(),r=o([]),l=o([]),d=o([]),f=o([]),y=o([]),g=o([]),v=o({items:[],last_time:""});return D(()=>{j({}).then(a=>{e.value=a}),B({}).then(a=>{r.value=[{label:"总数(个)",value:a[0]},{label:"重大风险",value:a[1]},{label:"较大风险",value:a[2]},{label:"一般风险",value:a[3]},{label:"低风险",value:a[4]}]}),H({}).then(a=>{B({}).then(t=>{l.value=[{label:"总数(个)",value:t[0]},{label:"重大",value:t[1]},{label:"较大",value:t[2]},{label:"一般风险",value:t[3]}]})}),J({}).then(a=>{d.value=[{label:"超纳期",value:a.exceed},{label:"整改中",value:a.not},{label:"已整改",value:a.finish}]}),U({}).then(a=>{f.value=[{label:"总数(个)",value:a[0]},{label:"一级",value:a[1]},{label:"二级",value:a[2]},{label:"三级",value:a[3]},{label:"四级",value:a[3]}]}),W({}).then(a=>{y.value=[{label:"投入计划(万元)",value:a.plan_num},{label:"投入实施(万元)",value:a.num}]}),F({}).then(a=>{g.value=[{label:"培训计划",value:a.plan},{label:"培训实施",value:a.implement}]}),K({}).then(a=>{v.value={items:[{label:"演练计划",value:a.plan},{label:"演练实施",value:a.implement}],last_time:a.last_time}})}),(a,t)=>{const s=M;return p(),_("div",ht,[n("div",yt,[i(C,{type:"safe",data:e.value},null,8,["data"]),i(C,{type:"risk",data:e.value},null,8,["data"]),i(C,{type:"base",data:e.value},null,8,["data"])]),n("div",kt,[i(ft)]),n("div",xt,[i(gt)]),n("div",wt,[t[1]||(t[1]=n("div",{class:"title"}," 风险源统计 ",-1)),i(s,{items:r.value},null,8,["items"]),t[2]||(t[2]=n("div",{class:"title"}," 隐患等级统计 ",-1)),i(s,{items:l.value},null,8,["items"]),t[3]||(t[3]=n("div",{class:"title"}," 隐患整改统计 ",-1)),i(s,{items:d.value},null,8,["items"]),t[4]||(t[4]=n("div",{class:"title"}," 事故统计 ",-1)),i(s,{items:f.value},null,8,["items"]),t[5]||(t[5]=n("div",{class:"title"}," 安全投入 ",-1)),i(s,{items:y.value},null,8,["items"]),t[6]||(t[6]=n("div",{class:"title"}," 安全培训 ",-1)),i(s,{items:g.value},null,8,["items"]),n("div",Ct,[t[0]||(t[0]=n("span",null,"应急管理",-1)),n("span",null,$(v.value.last_time),1)]),i(s,{items:v.value.items},null,8,["items"])])])}}});typeof S=="function"&&S(E);const Tt=w(E,[["__scopeId","data-v-83ae12a1"]]);export{Tt as default};
