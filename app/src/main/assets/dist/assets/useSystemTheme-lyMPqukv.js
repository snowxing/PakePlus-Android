import{e as G,t as V}from"./install-CoVyZzHx.js";import{d as Z,aL as q,aM as D,aN as T,aO as J,aD as d,aP as Q,w as L,aQ as H,o as S,aC as X,aj as ee,au as te,b as ne,r as se,aR as ie,a6 as ae}from"./index-5kp1FiRg.js";const oe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function le(e){function s(t){return(...o)=>{if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,o)}}function n(){const t=Object.create(null);return oe.forEach(o=>{t[o]=s(o)}),t}return n()}function ce(e,s,n){L([n,e,s],([t,o,l],N,C)=>{let c=null;if(t&&o&&l){const{offsetWidth:P,offsetHeight:I}=t,j=l===!0?{}:l,{throttle:O=100,onResize:f}=j;let h=!1;const p=()=>{o.resize(),f==null||f()},x=O?V(p,O):p;c=new ResizeObserver(()=>{!h&&(h=!0,t.offsetWidth===P&&t.offsetHeight===I)||x()}),c.observe(t)}C(()=>{c&&(c.disconnect(),c=null)})})}const re={autoresize:[Boolean,Object]},ue=/^on[^a-z]/,$=e=>ue.test(e);function fe(e){const s={};for(const n in e)$(n)||(s[n]=e[n]);return s}function A(e,s){const n=te(e)?ne(e):e;return n&&typeof n=="object"&&"value"in n?n.value||s:n||s}const de="ecLoadingOptions";function he(e,s,n){const t=T(de,{}),o=d(()=>({...A(t,{}),...n==null?void 0:n.value}));H(()=>{const l=e.value;l&&(s.value?l.showLoading(o.value):l.hideLoading())})}const pe={loading:Boolean,loadingOptions:Object};let g=null;const K="x-vue-echarts";function ve(){if(g!=null)return g;if(typeof HTMLElement>"u"||typeof customElements>"u")return g=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(K)}catch(e){return g=!1}return g=!0}document.head.appendChild(document.createElement("style")).textContent="x-vue-echarts{display:block;width:100%;height:100%;min-width:0}\n";const me=ve(),k="ecTheme",ge="ecInitOptions",Oe="ecUpdateOptions",y=/(^&?~?!?)native:/;var be=Z({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...re,...pe},emits:{},inheritAttrs:!1,setup(e,{attrs:s}){const n=D(),t=D(),o=D(),l=T(k,null),N=T(ge,null),C=T(Oe,null),{autoresize:c,manualUpdate:P,loading:I,loadingOptions:j}=J(e),O=d(()=>o.value||e.option||null),f=d(()=>e.theme||A(l,{})),h=d(()=>e.initOptions||A(N,{})),p=d(()=>e.updateOptions||A(C,{})),x=d(()=>fe(s)),z={},E=Q().proxy.$listeners,_={};E?Object.keys(E).forEach(a=>{y.test(a)?z[a.replace(y,"$1")]=E[a]:_[a]=E[a]}):Object.keys(s).filter(a=>$(a)).forEach(a=>{let i=a.charAt(2).toLowerCase()+a.slice(3);if(i.indexOf("native:")===0){const v="on".concat(i.charAt(7).toUpperCase()).concat(i.slice(8));z[v]=s[a];return}i.substring(i.length-4)==="Once"&&(i="~".concat(i.substring(0,i.length-4))),_[i]=s[a]});function b(a){if(!n.value)return;const i=t.value=G(n.value,f.value,h.value);e.group&&(i.group=e.group),Object.keys(_).forEach(m=>{let r=_[m];if(!r)return;let u=m.toLowerCase();u.charAt(0)==="~"&&(u=u.substring(1),r.__once__=!0);let U=i;if(u.indexOf("zr:")===0&&(U=i.getZr(),u=u.substring(3)),r.__once__){delete r.__once__;const W=r;r=(...F)=>{W(...F),U.off(u,r)}}U.on(u,r)});function v(){i&&!i.isDisposed()&&i.resize()}function R(){const m=a||O.value;m&&i.setOption(m,p.value)}c.value?ee(()=>{v(),R()}):R()}function B(a,i){e.manualUpdate&&(o.value=a),t.value?t.value.setOption(a,i||{}):b(a)}function M(){t.value&&(t.value.dispose(),t.value=void 0)}let w=null;L(P,a=>{typeof w=="function"&&(w(),w=null),a||(w=L(()=>e.option,(i,v)=>{i&&(t.value?t.value.setOption(i,{notMerge:i!==v,...p.value}):b())},{deep:!0}))},{immediate:!0}),L([f,h],()=>{M(),b()},{deep:!0}),H(()=>{e.group&&t.value&&(t.value.group=e.group)});const Y=le(t);return he(t,I,j),ce(t,c,n),S(()=>{b()}),X(()=>{me&&n.value?n.value.__dispose=M:M()}),{chart:t,root:n,setOption:B,nonEventAttrs:x,nativeListeners:z,...Y}},render(){const e={...this.nonEventAttrs,...this.nativeListeners};return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",q(K,e)}});function we(){const e=se("light");let s=null;const n=t=>{e.value=t?"dark":"light"};return S(()=>{s=window.matchMedia("(prefers-color-scheme: dark)"),n(s.matches),s.addEventListener("change",t=>{n(t.matches)}),ie(k,e.value)}),ae(()=>{s==null||s.removeEventListener("change",t=>{n(t.matches)})}),e}export{be as E,we as u};
