import{u as S}from"./useTabsListener-CnvSNM1v.js";import{aB as x,d as g,r as y,o as j,g as f,a as v,h as l,y as q,m as k,C as B,b as o,i as C,F as w,E as O,D as U,j as b,bm as F,bn as T,bo as H,bp as J,c as h,l as P,w as V,G as z,U as K,k as Q,au as R,ad as W,_ as N,aD as $,aE as X,e as M}from"./index-5kp1FiRg.js";import{g as Y}from"./ViolationRecord-DAgy-Ljm.js";import{a as Z}from"./index-BpTLWCN6.js";import{c as ee}from"./config-BiPkORWZ.js";import{g as te}from"./MedicalExaminationRecord-DUQi2oY_.js";async function ae(m){return x.get("/enbase/staff_get",{params:m})}const ne={class:"flex flex-wrap gap-10"},le=["src","onClick"],oe=["src"],se=g({__name:"basicInfo",setup(m){const a=y({}),s=y("");function p(){var i;const r=(i=b().userInfo)==null?void 0:i.id;ae({id:r}).then(u=>{a.value=u||{}})}function c(r){s.value=r}function _(r){var i;return((i=F.find(u=>u.value===r))==null?void 0:i.label)||"女"}function e(r){var i;return((i=T.find(u=>u.value===r))==null?void 0:i.label)||"-"}function t(r){var i;return((i=H.find(u=>u.value===r))==null?void 0:i.label)||"-"}function n(r){var i;return((i=J.find(u=>u.id===r))==null?void 0:i.name)||"未知"}function d(){s.value=""}return j(()=>{p()}),(r,i)=>{const u=B,G=U;return v(),f("div",null,[l(G,null,{default:k(()=>{var D,A,I;return[l(u,{title:"姓名：",value:o(a).name||"-"},null,8,["value"]),l(u,{title:"性别：",value:_(o(a).gender)||"-"},null,8,["value"]),l(u,{title:"年龄：",value:o(a).age||"-"},null,8,["value"]),l(u,{title:"联系方式：",value:o(a).contact||"-"},null,8,["value"]),l(u,{title:"学历：",value:n(o(a).edu_name)||"-"},null,8,["value"]),l(u,{title:"婚姻：",value:e(o(a).marriage)||"-"},null,8,["value"]),l(u,{title:"身份证号：",value:o(a).card_id||"-"},null,8,["value"]),l(u,{title:"籍贯：",value:o(a).nation||"-"},null,8,["value"]),l(u,{title:"状态：",value:t(o(a).staff_status)||"-"},null,8,["value"]),l(u,{title:"嗜好：",value:o(a).hobby||"-"},null,8,["value"]),l(u,{title:"企业：",value:((D=o(a).company_obj)==null?void 0:D.name)||"-"},null,8,["value"]),l(u,{title:"部门：",value:((A=o(a).department_obj)==null?void 0:A.name)||"-"},null,8,["value"]),l(u,{title:"岗位：",value:((I=o(a).post_obj)==null?void 0:I.name)||"-"},null,8,["value"]),l(u,{title:"备注：",value:o(a).note||"-"},null,8,["value"]),l(u,{title:"头像：",class:"!items-start"},{value:k(()=>[C("div",ne,[(v(!0),f(w,null,O(o(a).photo&&o(a).photo.split(","),(E,L)=>(v(),f("image",{key:L,src:E,class:"h-140 w-140",onClick:ge=>c(E)},null,8,le))),128))])]),_:1})]}),_:1}),o(s).length>0?(v(),f("div",{key:0,class:"bg-black inset-0 fixed z-100",onClick:d},[C("image",{src:o(s),mode:"aspectFill",class:"h-full w-full"},null,8,oe)])):q("",!0)])}}});async function ue(m){return x.get("/enbase/staff_cert_list",{params:m})}const ie=g({__name:"MyCertificate",setup(m){const a=y([]),s=y("");function p(){const{id:c}=b().userInfo;ue({main_id:c,type:1}).then(_=>{a.value=_.data||[]})}return j(()=>{p(),console.warn("MyCertificate mounted",s)}),(c,_)=>{const e=B,t=U;return v(),f("div",null,[(v(!0),f(w,null,O(o(a),(n,d)=>(v(),h(t,{key:d,inset:!0,class:"!mt-16"},{default:k(()=>[l(e,{title:"姓名：",value:n.main_name},null,8,["value"]),l(e,{title:"证书名称：",value:n.cert_name,class:"[&_.van-cell__value]:max-w-[70%]"},null,8,["value"]),l(e,{title:"证书编号：",value:n.no},null,8,["value"]),l(e,{title:"证书类型：",value:n.cert_name},null,8,["value"]),l(e,{title:"颁发机构：",value:n.mechanism_name,class:"[&_.van-cell__value]:max-w-[70%]"},null,8,["value"]),l(e,{title:"发证日期：",value:n.certification_time},null,8,["value"]),l(e,{title:"到期日期：",value:n.expire_time},null,8,["value"]),l(e,{title:"管理专员：",value:n.receive_name},null,8,["value"]),l(e,{title:"复审日期：",value:n.retrial_time},null,8,["value"]),l(e,{title:"到期安排：",value:n.content},null,8,["value"])]),_:2},1024))),128))])}}}),re=g({__name:"ViolationRecordSearch",props:{form:{default:()=>({})},dataKey:{default:{year:"implement_year",obj_id:"obj_id"}}},emits:["update:form"],setup(m,{emit:a}){const s=m,p=a,c=y([]),_=y([{text:"进行中",value:1},{text:"已完成",value:2}]),e=P({...s.form});return V(e,t=>{p("update:form",t)},{deep:!0}),V(()=>s.form,t=>{Object.assign(e,t)},{deep:!0,immediate:!0}),j(()=>{Z({is_node:"0",id:"914682",deep:1,enbase:1}).then(t=>{c.value=t.map(n=>({text:n.title,value:n.node_id}))})}),(t,n)=>{const d=z,r=K;return v(),f(w,null,[l(d,{modelValue:o(e).name,"onUpdate:modelValue":n[0]||(n[0]=i=>o(e).name=i),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"]),l(r,{value:o(e).violation_type,"onUpdate:value":n[1]||(n[1]=i=>o(e).violation_type=i),columns:c.value,label:"",placeholder:"请选择违章类型"},null,8,["value","columns"]),l(r,{value:o(e).status,"onUpdate:value":n[2]||(n[2]=i=>o(e).status=i),placeholder:"状态",columns:_.value},null,8,["value","columns"])],64)}}}),ce=g({__name:"ViolationRecord",setup(m){b();const{routerPush:a}=Q(),s=y({name:"",start_date:"",end_state:"",status:"",violation_type:""}),p=[{title:"违章名称",className:"three",key:"violation_event",uname:"",type:"selection"},{title:"违章类型",className:"three",key:"treeselect_8",uname:"",type:"selection"},{title:"违章地点",className:"three",key:"violation_place",uname:"",type:"selection"},{title:"状态",className:"three",key:"status",uname:"violationRecords",type:"selection"}],c=[{icon:"search",key:"search"}];async function _({pageNum:t}={pageNum:1}){const n={page:t,...s.value},d=await Y(n);return{total:Number(d.count)||0,data:d.data||[]}}function e(t){const n=[{label:"事件名称",value:t.violation_event},{label:"违章类型",value:t.treeselect_8},{label:"违章地点",value:t.violation_place},{label:"违章时间",value:t.violation_time},{label:"违章人",value:t.uid_user_name},{label:"处理人",value:t.violation_personnel_user_name},{label:"违章人",value:t.violation_personnel_user_name},{label:"所属部门",value:t.violation_personnel_department_id_depart_name.length>0?t.violation_personnel_department_id_depart_name:"-"},{label:"处理人",value:t.uid_user_name},{label:"违章罚款",value:t.punishment_amount},{label:"处理状态",value:ee.trans("job_status_list",t.process_status)}];a("institutionalizedDetail",{detail:JSON.stringify(n)})}return(t,n)=>{const d=N;return v(),h(d,{columns:p,request:_,onOnRowClick:e,floating:c,form:o(s),"onUpdate:form":n[1]||(n[1]=r=>R(s)?s.value=r:null)},{"cell-status":k(({row:r})=>{var i;return[C("div",null,W(((i=r==null?void 0:r.statusObj)==null?void 0:i.label)||""),1)]}),searchForm:k(()=>[l(re,{form:o(s),"onUpdate:form":n[0]||(n[0]=r=>R(s)?s.value=r:null)},null,8,["form"])]),_:1},8,["form"])}}}),_e=g({__name:"MedicalExaminationRecord",setup(m){const a=b(),s=[{title:"姓名",className:"three",key:"xing_ming",width:80,uname:"",type:"selection"},{title:"岗位",className:"three",key:"gang_wei",width:80,uname:"",type:"selection"},{title:"日期",className:"three",key:"jian_cha_ri_qi",uname:"",width:100,type:"selection"},{title:"检查结论",className:"three",key:"jian_cha_jie_lun",width:100,type:"selection"},{title:"检查机构",className:"three",key:"jian-cha-ji-gou",width:100,type:"selection"}];async function p({pageNum:c}={pageNum:1}){var t;const _={page:c,vio_uid:(t=a.userInfo)==null?void 0:t.id},e=await te(_);return{total:Number(e.count)||0,data:e.data||[]}}return(c,_)=>{const e=N;return v(),h(e,{columns:s,request:p})}}});function me(m){return x.get("/job/medical_history_list",{params:m})}const pe=g({__name:"MedicalHistory",setup(m){const a=b(),s=[{title:"疾病名称",key:"illness_name"},{title:"诊断时间",key:"diagnosis_date"},{title:"诊断医院",key:"hospital_name"}];async function p({pageNum:c}={pageNum:1}){var t;const _={page:c,staff_id:(t=a.userInfo)==null?void 0:t.id},e=await me(_);return{total:Number(e.count)||0,data:e.data||[]}}return(c,_)=>{const e=N;return v(),h(e,{columns:s,request:p})}}});function ve(m){return x.get("/job/career_history_list",{params:m})}const de=g({__name:"EmploymentHistory",setup(m){const a=b(),s=[{title:"起始时间",key:"start_date"},{title:"终止时间",key:"end_date"},{title:"工作单位",key:"company_name"}];async function p({pageNum:c}={pageNum:1}){var t;const _={page:c,staff_id:(t=a.userInfo)==null?void 0:t.id},e=await ve(_);return{total:Number(e.count)||0,data:e.data||[]}}return(c,_)=>{const e=N;return v(),h(e,{columns:s,request:p})}}}),fe={class:"flex-center h-[100vh] w-100% items-center"},ye=g({__name:"index",setup(m){const a=y("basic");S("person-click-tab",c=>{a.value=c.name});const s=$(()=>({basic:se,cert:ie,violation:ce,tijian:_e,bingshi:pe,timing:de})),p=$(()=>s.value[a.value]||null);return(c,_)=>(v(),f("div",fe,[(v(),h(X(p.value)))]))}});typeof M=="function"&&M(ye);export{ye as default};
