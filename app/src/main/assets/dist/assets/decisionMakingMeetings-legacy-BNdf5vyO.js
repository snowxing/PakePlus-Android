System.register(["./index-legacy-CK9unWWd.js","./index-legacy-lCP6nJJd.js","./index-legacy-DKq8HLyK.js"],function(e,t){"use strict";var l,a,i,s,r,o,n,d,u,p,c,m,f,y,v,g,h,b,_,w,x,k;return{setters:[e=>{l=e.d,a=e.l,i=e.r,s=e.w,r=e.c,o=e.a,n=e.b,d=e.G,u=e.k,p=e.j,c=e.o,m=e.g,f=e.h,y=e.m,v=e.au,g=e.i,h=e.ad,b=e._,_=e.e},e=>{w=e.a,x=e.b},e=>{k=e.a}],execute:function(){const t=l({__name:"meetSearchForm",props:{form:{default:()=>({})}},emits:["update:form"],setup(e,{emit:t}){const l=e,u=t,p=a({...l.form});return i([{text:"待开会",value:"1"},{text:"会议中",value:"2"},{text:"已结束",value:"3"}]),s(p,e=>{u("update:form",e)},{deep:!0}),s(()=>l.form,e=>{Object.assign(p,e)},{deep:!0,immediate:!0}),(e,t)=>{const l=d;return o(),r(l,{modelValue:n(p).name,"onUpdate:modelValue":t[0]||(t[0]=e=>n(p).name=e),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"])}}}),q={class:"todo-list"},j={class:"text-12px"},N=e("default",l({__name:"decisionMakingMeetings",setup(e){const{routerPush:l}=u(),s=p(),r=[{title:"名称",key:"name",width:"30%"},{title:"议题",key:"subject",width:"50%"},{title:"状态",key:"status",width:"15%"}],d=i([]),_=[{label:"待开会",value:"1"},{label:"会议中",value:"2"},{label:"已结束",value:"3"}],N=i({name:"",status:"",subject:"",pageNum:1,pageSize:30}),O=a([{icon:"search",key:"search"}]),S=i([]);async function M({pageNum:e}){const t=await w({page:e,...N.value})||{};return{total:Number(t.count||0),data:t.data||[]}}async function J(e){const t=await x({id:e.id})||{},a=[{label:"会议名称",value:t.name},{label:"会议类型",value:t.type_name},{label:"会议议题",value:t.subject},{label:"会议时间",value:t.begin_time},{label:"会议地点",value:t.room},{label:"会议发起人",value:t.sponsor_staff_id_user_name},{label:"会议主持人",value:t.executive_staff_user_name},{label:"与会人员",value:t.staff.name},{label:"会议状态",value:_.find(e=>e.value===t.status)?.label||""},{label:"决议结论",value:t.decision},{label:"备注",value:t.note},{label:"附件",value:JSON.parse(t?.files||"[]").length>0?t.files:"无",renderType:"image"}];l("institutionalizedDetail",{detail:JSON.stringify(a)})}function F(e){if("add"===e.key){const e=[{field:"name",style:{width:"100%"},title:"会议名称",type:"input",props:{placeholder:"请输入"},validate:[{message:"会议名称必须填写",required:!0,type:"string"}],value:""},{field:"type_id",style:{width:"100%"},options:d.value,props:{multiple:!1,placeholder:"会议类型"},validate:[{message:"会议类型必须填写",required:!0,type:"string"}],title:"会议类型",type:"select",value:[]},{field:"room",style:{width:"100%"},title:"会议地点",type:"input",props:{placeholder:"请输入"},validate:[{message:"会议地点必须填写",required:!0,type:"string"}],value:""},{field:"begin_time",props:{type:"date",format:"yyyy-MM-dd-HH:mm:ss",placeholder:"请选择"},validate:[{type:"string",message:"选择时间",required:!0}],style:{width:"100%"},title:"会议时间",type:"date",value:""},{field:"sponsor_staff_id",style:{width:"100%"},options:[],props:{multiple:!1,placeholder:"会议发起人",source:"staff"},validate:[{message:"会议发起人必须填写",required:!0,type:"string"}],title:"会议发起人",type:"treeselect",value:[]},{field:"executive_staff",style:{width:"100%"},options:[],props:{multiple:!1,placeholder:"会议主持人",source:"staff"},validate:[{message:"会议主持人必须填写",required:!0,type:"string"}],title:"会议主持人",type:"treeselect",value:[]},{field:"staff",style:{width:"100%"},options:[],props:{multiple:!0,placeholder:"与会人员",source:"staff"},validate:[{message:"与会人员必须填写",required:!0,type:"string"}],title:"与会人员",type:"treeselect",value:[]},{field:"status",style:{width:"100%"},options:[{label:"待开会",value:1},{label:"会议中",value:2},{label:"已结束",value:3}],props:{multiple:!1,placeholder:"会议状态"},validate:[{message:"会议状态必须填写",required:!0,type:"string"}],title:"会议状态",type:"select",value:[]},{field:"subject",style:{width:"100%"},title:"会议主题",type:"input",props:{placeholder:"请输入"},validate:[{message:"会议主题必须填写",required:!0,type:"string"}],value:""},{field:"decision",style:{width:"100%"},title:"会议结论",type:"textarea",props:{placeholder:"请输入"},validate:{type:"string"},value:""},{field:"note",style:{width:"100%"},title:"备注",type:"textarea",props:{placeholder:"请输入"},validate:{type:"string"},value:""},{field:"files",title:"附件",type:"upload",value:[]},{type:"static",field:"formbutton",row:[{title:"提交",value:0,type:"button",field:"submit",props:{type:"primary",post_id:[],node_id:0,actionKey:"meeting_edit"},style:{"margin-right":"20px","padding-left":"12px","padding-right":"12px"},col:{span:4}}]}];l("task-process",{formJson:JSON.stringify({forms:e})})}}return c(()=>{k({is_node:"0",id:"YTLX",deep:1,enbase:1}).then(e=>{d.value=e.map(e=>({value:e.node_id,label:e.title}))}),s?.getPri("decision-making-meeting-list",1)&&O.unshift({icon:"plus",key:"add"})}),(e,l)=>{const a=b;return o(),m("div",q,[f(a,{form:n(N),"onUpdate:form":l[1]||(l[1]=e=>v(N)?N.value=e:null),columns:r,request:M,floating:n(O),onOnRowClick:J,onOnFloatingClick:F},{"cell-status":y(({row:e})=>[g("div",j,h(_.find(t=>t.value===e.status)?.label||""),1)]),searchForm:y(()=>[f(t,{form:n(N),"onUpdate:form":l[0]||(l[0]=e=>v(N)?N.value=e:null),"check-type-options":n(S)},null,8,["form","check-type-options"])]),_:1},8,["form","floating"])])}}}));"function"==typeof _&&_(N)}}});
