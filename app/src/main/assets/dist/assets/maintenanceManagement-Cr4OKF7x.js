import{d as x,r as F,l as q,w as b,o as C,g as U,a as h,h as v,G as V,U as w,F as B,k as N,c as O,m as c,au as y,b as m,i as d,ad as f,_ as R,e as g}from"./index-5kp1FiRg.js";import{g as D}from"./equipmentLedger-D42jtka8.js";import{c as k}from"./config-BiPkORWZ.js";const S=x({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(p,{emit:i}){const r=p,_=i,t=F([]),n=q({...r.form});return b(n,o=>{_("update:form",o)},{deep:!0}),b(()=>r.form,o=>{Object.assign(n,o)},{deep:!0,immediate:!0}),C(()=>{t.value=[{text:"一级",value:1},{text:"二级",value:2},{text:"三级",value:3}]}),(o,u)=>{const e=V,l=w;return h(),U(B,null,[v(e,{modelValue:n.name,"onUpdate:modelValue":u[0]||(u[0]=s=>n.name=s),type:"text",name:"text",placeholder:"请输入设备名称"},null,8,["modelValue"]),v(l,{value:n.level,"onUpdate:value":u[1]||(u[1]=s=>n.level=s),columns:t.value,placeholder:"请选择故障等级"},null,8,["value","columns"])],64)}}}),E=x({__name:"maintenanceManagement",props:{type:{}},setup(p){const i=p;async function r({pageNum:e,form:l}){const s=await D({page:e,...l,type:i.type});return{total:Number(s.count),data:s.data}}const{routerPush:_}=N(),t=F({fault_type:"",level:"",name:""}),n=[{icon:"search",key:"search"}];function o(e){const l=[{label:"设备类别",value:k.trans("equipment_type",e.special)},{label:"设备名称",value:e.treeselect_1},{label:"标识编码",value:e.input_3},{label:"具体位置",value:e.input_2},{label:"报修时间",value:e.guarantee_date},{label:"故障等级",value:e.select_8==1?"一级":e.select_8==2?"二级":e.select_8==3?"三级":""},{label:"故障描述",value:e.describe},{label:"故障原因",value:e.reason},{label:"响应时长",value:e.request_date},{label:"维修工时",value:e.repair_date},{label:"报修处理状态",value:e.status==0?"进行中":"已完成"},{label:"维修评价",value:e.input_1},{label:"报修人",value:e.guarantee_id_name},{label:"维修人",value:e.repair_id_name},{label:"评价人",value:e.evaluate_id_name}];_("siteDetail",{detail:JSON.stringify(l)})}const u=[{title:"设备名称",key:"treeselect_1"},{title:"故障等级",key:"select_8"},{title:"状态",key:"status"}];return(e,l)=>{const s=R;return h(),O(s,{form:m(t),"onUpdate:form":l[1]||(l[1]=a=>y(t)?t.value=a:null),columns:u,request:r,floating:n,onOnRowClick:o},{"cell-special":c(({row:a})=>[d("div",null,f(m(k).trans("equipment_type",a.special)),1)]),"cell-select_8":c(({row:a})=>[d("div",null,f(a.select_8==1?"一级":a.select_8==2?"二级":a.select_8==3?"三级":""),1)]),"cell-status":c(({row:a})=>[d("div",null,f(a.status==0?"进行中":"已完成"),1)]),searchForm:c(()=>[v(S,{form:m(t),"onUpdate:form":l[0]||(l[0]=a=>y(t)?t.value=a:null)},null,8,["form"])]),_:1},8,["form"])}}});typeof g=="function"&&g(E);export{E as default};
