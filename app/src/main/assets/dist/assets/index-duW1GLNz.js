import{u as G}from"./useTabsListener-CnvSNM1v.js";import{d as F,j as R,r as m,l as D,w as N,o as q,g as v,a as x,F as $,h as _,G as O,U as H,m as f,au as b,b as r,H as B,J as V,i as e,av as j,aw as U,ad as i,_ as S,E as C,aq as A,ax as J,ay as M,c as w,az as P,aA as W,y as K,e as z}from"./index-5kp1FiRg.js";import{c as E}from"./config-BiPkORWZ.js";const I=[{title:"名称",key:"name",width:"40%"},{title:"风险等级",key:"level_name"},{title:"管控措施",key:"info",width:65}],T=F({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(g,{emit:s}){const u=g,d=s;R();const p=m([]);m([]),m([]),m({label:"title",value:"node_id",children:"child"});const o=D({...u.form});return N(o,l=>{d("update:form",l)},{deep:!0}),N(()=>u.form,l=>{Object.assign(o,l)},{deep:!0,immediate:!0}),q(()=>{p.value=E.get("risk_type").map(l=>({text:l.name,value:l.id}))}),(l,t)=>{const c=O,k=H;return x(),v($,null,[_(c,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=h=>o.name=h),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"]),_(k,{value:o.level_id,"onUpdate:value":t[1]||(t[1]=h=>o.level_id=h),placeholder:"风险级别",columns:p.value},null,8,["value","columns"])],64)}}}),Q={class:"p-[10px] relative"},X={class:"pr-[4px] h-[calc(100%-50px)] overflow-y-auto"},Y={class:"text-[14px] text-blue-500 mb-[2px] pl-[2px]"},Z={class:"gap-2 grid grid-cols-2"},tt={class:"flex flex-col"},et={class:"text-[14px]"},st={class:"flex flex-col"},lt={class:"text-[14px]"},ot={class:"flex flex-col"},nt={class:"text-[14px]"},at={class:"flex flex-col"},it={class:"text-[14px]"},rt={class:"flex flex-col"},pt={class:"text-[14px]"},dt={class:"flex flex-col"},ct={class:"text-[14px]"},mt={class:"flex flex-col"},ut={class:"text-[14px]"},xt={class:"flex flex-col"},_t={class:"text-[14px]"},ft={class:"flex flex-col"},vt={class:"text-[14px]"},yt={class:"flex flex-col"},gt={class:"text-[14px]"},kt={class:"flex flex-col"},bt={class:"text-[14px]"},$t={__name:"DeviceList",setup(g){const s=m({name:"",level_id:""});async function u({pageNum:l}={pageNum:1}){const t={page:l,doc_type:1,sign:2,...s.value},c=await J(t);return{total:Number(c.count)||0,data:c.data||[]}}const d=m(!1),p=m({});function o(l){p.value=JSON.parse(l.policy),d.value=!0}return(l,t)=>{const c=B,k=S,h=A;return x(),v($,null,[_(k,{form:r(s),"onUpdate:form":t[1]||(t[1]=n=>b(s)?s.value=n:null),columns:r(I),request:u,floating:[{icon:"search",key:"search"}]},{"cell-level_name":f(({row:n})=>{var y,a;return[e("div",{class:"text-12 text-white px-2 py-1 rounded",style:j({color:((y=r(U)[n.level_id])==null?void 0:y.color)||"#ccc"})},i((a=r(U)[n.level_id])==null?void 0:a.label),5)]}),"cell-info":f(({row:n})=>[_(c,{type:"primary",size:"small",onClick:y=>o(n)},{default:f(()=>[...t[4]||(t[4]=[V(" 详情 ",-1)])]),_:1},8,["onClick"])]),searchForm:f(()=>[_(T,{form:r(s),"onUpdate:form":t[0]||(t[0]=n=>b(s)?s.value=n:null)},null,8,["form"])]),_:1},8,["form","columns"]),_(h,{show:r(d),"onUpdate:show":t[3]||(t[3]=n=>b(d)?d.value=n:null),position:"bottom",round:"",style:{height:"80%"}},{default:f(()=>[e("div",Q,[t[17]||(t[17]=e("div",{class:"text-[16px] font-bold mb-[4px] bg-white top-0 sticky"}," 管控措施 ",-1)),e("div",X,[(x(!0),v($,null,C(r(p),(n,y)=>(x(),v("div",{key:y,class:"mb-[6px]"},[e("div",Y," 检查项目："+i(n.task_step),1),(x(!0),v($,null,C(n.policy,(a,L)=>(x(),v("div",{key:L,class:"mb-[4px] p-[2px] border border-gray-300 rounded-lg"},[e("div",Z,[e("div",tt,[t[5]||(t[5]=e("span",{class:"text-[14px] text-gray-500"},"危险源",-1)),e("span",et,i(a.risk_name_id),1)]),e("div",st,[t[6]||(t[6]=e("span",{class:"text-[14px] text-gray-500"},"风险值",-1)),e("span",lt,i(a.level_num),1)]),e("div",ot,[t[7]||(t[7]=e("span",{class:"text-[14px] text-gray-500"},"风险等级",-1)),e("span",nt,i(a.level_id),1)]),e("div",at,[t[8]||(t[8]=e("span",{class:"text-[14px] text-gray-500"},"主要后果",-1)),e("span",it,i(a.main_res),1)]),e("div",rt,[t[9]||(t[9]=e("span",{class:"text-[14px] text-gray-500"},"工程措施",-1)),e("span",pt,i(a.project_policy),1)]),e("div",dt,[t[10]||(t[10]=e("span",{class:"text-[14px] text-gray-500"},"教育培训措施",-1)),e("span",ct,i(a.stardard),1)]),e("div",mt,[t[11]||(t[11]=e("span",{class:"text-[14px] text-gray-500"},"管理措施",-1)),e("span",ut,i(a.policy),1)]),e("div",xt,[t[12]||(t[12]=e("span",{class:"text-[14px] text-gray-500"},"个人安全措施",-1)),e("span",_t,i(a.safe_policy),1)]),e("div",ft,[t[13]||(t[13]=e("span",{class:"text-[14px] text-gray-500"},"应急处置措施",-1)),e("span",vt,i(a.emergency_policy),1)]),e("div",yt,[t[14]||(t[14]=e("span",{class:"text-[14px] text-gray-500"},"管控层级",-1)),e("span",gt,i(a.control_name),1)]),e("div",kt,[t[15]||(t[15]=e("span",{class:"text-[14px] text-gray-500"},"检查频次",-1)),e("span",bt,i(a.frequency),1)])])]))),128))]))),128))]),_(c,{block:"",type:"primary",class:"mt-4",onClick:t[2]||(t[2]=n=>d.value=!1)},{default:f(()=>[...t[16]||(t[16]=[V(" 关闭 ",-1)])]),_:1})])]),_:1},8,["show"])],64)}}},ht={class:"p-[10px] relative"},wt={class:"pr-[4px] h-[calc(100%-50px)] overflow-y-auto"},Nt={class:"text-[14px] text-blue-500 mb-[2px] pl-[2px]"},Ut={class:"gap-2 grid grid-cols-2"},Vt={class:"flex flex-col"},Ct={class:"text-[14px]"},Ft={class:"flex flex-col"},St={class:"text-[14px]"},Lt={class:"flex flex-col"},Rt={class:"text-[14px]"},Dt={class:"flex flex-col"},qt={class:"text-[14px]"},Ot={class:"flex flex-col"},jt={class:"text-[14px]"},zt={class:"flex flex-col"},Bt={class:"text-[14px]"},At={class:"flex flex-col"},Jt={class:"text-[14px]"},Et={class:"flex flex-col"},It={class:"text-[14px]"},Tt={class:"flex flex-col"},Gt={class:"text-[14px]"},Ht={class:"flex flex-col"},Mt={class:"text-[14px]"},Pt={class:"flex flex-col"},Wt={class:"text-[14px]"},Kt={__name:"WorkActiveList",setup(g){const s=m({name:"",level_id:""});async function u({pageNum:l}={pageNum:1}){const t={page:l,doc_type:4,sign:2,...s.value},c=await J(t);return{total:Number(c.count)||0,data:c.data||[]}}const d=m(!1),p=m({});function o(l){p.value=JSON.parse(l.policy),d.value=!0}return M(()=>{u()}),(l,t)=>{const c=B,k=S,h=A;return x(),v($,null,[_(k,{form:r(s),"onUpdate:form":t[1]||(t[1]=n=>b(s)?s.value=n:null),columns:r(I),request:u,floating:[{icon:"search",key:"search"}]},{"cell-level_name":f(({row:n})=>{var y,a;return[e("div",{class:"text-12 text-white px-2 py-1 rounded",style:j({color:((y=r(U)[n.level_id])==null?void 0:y.color)||"#ccc"})},i(((a=r(U)[n.level_id])==null?void 0:a.label)||n.level_id),5)]}),"cell-info":f(({row:n})=>[_(c,{type:"primary",size:"small",onClick:y=>o(n)},{default:f(()=>[...t[4]||(t[4]=[V(" 详情 ",-1)])]),_:1},8,["onClick"])]),searchForm:f(()=>[_(T,{form:r(s),"onUpdate:form":t[0]||(t[0]=n=>b(s)?s.value=n:null)},null,8,["form"])]),_:1},8,["form","columns"]),_(h,{show:r(d),"onUpdate:show":t[3]||(t[3]=n=>b(d)?d.value=n:null),position:"bottom",round:"",style:{height:"80%"}},{default:f(()=>[e("div",ht,[t[17]||(t[17]=e("div",{class:"text-[16px] font-bold mb-[4px] bg-white top-0 sticky"}," 管控措施 ",-1)),e("div",wt,[(x(!0),v($,null,C(r(p),(n,y)=>(x(),v("div",{key:y,class:"mb-[6px]"},[e("div",Nt," 检查项目："+i(n.task_step),1),(x(!0),v($,null,C(n.policy,(a,L)=>(x(),v("div",{key:L,class:"mb-[4px] p-[2px] border border-gray-300 rounded-lg"},[e("div",Ut,[e("div",Vt,[t[5]||(t[5]=e("span",{class:"text-[14px] text-gray-500"},"危险源",-1)),e("span",Ct,i(a.risk_name_id),1)]),e("div",Ft,[t[6]||(t[6]=e("span",{class:"text-[14px] text-gray-500"},"风险值",-1)),e("span",St,i(a.level_num),1)]),e("div",Lt,[t[7]||(t[7]=e("span",{class:"text-[14px] text-gray-500"},"风险等级",-1)),e("span",Rt,i(a.level_id),1)]),e("div",Dt,[t[8]||(t[8]=e("span",{class:"text-[14px] text-gray-500"},"主要后果",-1)),e("span",qt,i(a.main_res),1)]),e("div",Ot,[t[9]||(t[9]=e("span",{class:"text-[14px] text-gray-500"},"工程措施",-1)),e("span",jt,i(a.project_policy),1)]),e("div",zt,[t[10]||(t[10]=e("span",{class:"text-[14px] text-gray-500"},"教育培训措施",-1)),e("span",Bt,i(a.stardard),1)]),e("div",At,[t[11]||(t[11]=e("span",{class:"text-[14px] text-gray-500"},"管理措施",-1)),e("span",Jt,i(a.policy),1)]),e("div",Et,[t[12]||(t[12]=e("span",{class:"text-[14px] text-gray-500"},"个人安全措施",-1)),e("span",It,i(a.safe_policy),1)]),e("div",Tt,[t[13]||(t[13]=e("span",{class:"text-[14px] text-gray-500"},"应急处置措施",-1)),e("span",Gt,i(a.emergency_policy),1)]),e("div",Ht,[t[14]||(t[14]=e("span",{class:"text-[14px] text-gray-500"},"管控层级",-1)),e("span",Mt,i(a.control_name),1)]),e("div",Pt,[t[15]||(t[15]=e("span",{class:"text-[14px] text-gray-500"},"检查频次",-1)),e("span",Wt,i(a.frequency),1)])])]))),128))]))),128))]),_(c,{block:"",type:"primary",class:"mt-4",onClick:t[2]||(t[2]=n=>d.value=!1)},{default:f(()=>[...t[16]||(t[16]=[V(" 关闭 ",-1)])]),_:1})])]),_:1},8,["show"])],64)}}},Qt=F({__name:"RegionInspectSearch",props:{form:{default:{}}},emits:["update:form"],setup(g,{emit:s}){const u=g,d=s;R(),m([]),m([]),m([]),m({label:"title",value:"node_id",children:"child"});const p=D({...u.form});return N(p,o=>{d("update:form",o)},{deep:!0}),N(()=>u.form,o=>{Object.assign(p,o)},{deep:!0,immediate:!0}),q(()=>{}),(o,l)=>{const t=O;return x(),v($,null,[_(t,{modelValue:p.name,"onUpdate:modelValue":l[0]||(l[0]=c=>p.name=c),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"]),_(t,{modelValue:p.staff_name,"onUpdate:modelValue":l[1]||(l[1]=c=>p.staff_name=c),type:"text",name:"text",placeholder:"请输入责任人"},null,8,["modelValue"])],64)}}}),Xt={__name:"RegionInspectList",setup(g){const s=m({page:1,page_size:30,code:"",name:"",staff_name:""}),u=m([{title:"名称",key:"name",width:"40%"},{title:"标识编码",key:"code",width:"30%"},{title:"责任人",key:"staff_name",width:"30%"}]);async function d({pageNum:p}={pageNum:1}){const o={page:p,...s.value},l=await P(o);return{total:Number(l.count)||0,data:l.data||[]}}return(p,o)=>{const l=S;return x(),w(l,{form:r(s),"onUpdate:form":o[1]||(o[1]=t=>b(s)?s.value=t:null),columns:r(u),request:d,floating:[{icon:"search",key:"search"}]},{"cell-level_name":f(({row:t})=>{var c,k;return[e("div",{class:"text-12 text-white px-2 py-1 rounded",style:j({color:((c=r(U)[t.level_id])==null?void 0:c.color)||"#ccc"})},i((k=r(U)[t.level_id])==null?void 0:k.label),5)]}),searchForm:f(()=>[_(Qt,{form:r(s),"onUpdate:form":o[0]||(o[0]=t=>b(s)?s.value=t:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},Yt=F({__name:"RiskRankSearch",props:{form:{default:{}}},emits:["update:form"],setup(g,{emit:s}){const u=g,d=s;R();const p=m([]);m([]),m([]),m({label:"title",value:"node_id",children:"child"});const o=D({...u.form});return N(o,l=>{d("update:form",l)},{deep:!0}),N(()=>u.form,l=>{Object.assign(o,l)},{deep:!0,immediate:!0}),q(()=>{p.value=E.get("risk_type").map(l=>({text:l.name,value:l.id}))}),(l,t)=>{const c=O;return x(),w(c,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=k=>o.name=k),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"])}}}),Zt={__name:"RiskRank",setup(g){const s=m({name:""}),u=[{title:"名称",className:"three",key:"name",uname:"",width:180,type:"selection"},{title:"风险源",className:"three",key:"risk",width:120,uname:"",type:"selection"},{title:"不合格数",className:"three",key:"num",width:100,uname:"",type:"selection"}];async function d({pageNum:p}={pageNum:1}){const o={page:p,...s.value},l=await W(o);return{total:Number(l.count)||0,data:l.data||[]}}return(p,o)=>{const l=S;return x(),w(l,{columns:u,request:d,form:r(s),"onUpdate:form":o[1]||(o[1]=t=>b(s)?s.value=t:null),floating:[{icon:"search",key:"search"}]},{searchForm:f(()=>[_(Yt,{form:r(s),"onUpdate:form":o[0]||(o[0]=t=>b(s)?s.value=t:null)},null,8,["form"])]),_:1},8,["form"])}}},te={class:"flex-center h-[100vh] w-100% items-center relative"},ee=F({__name:"index",setup(g){const s=m("dynamic-riskrank");return G("dynamic-click-tab",u=>{s.value=u.name}),(u,d)=>(x(),v("div",te,[r(s)==="dynamic-devicelist"?(x(),w($t,{key:0})):r(s)==="dynamic-worklist"?(x(),w(Kt,{key:1})):r(s)==="dynamic-arealist"?(x(),w(Xt,{key:2})):r(s)==="dynamic-riskrank"?(x(),w(Zt,{key:3})):K("",!0)]))}});typeof z=="function"&&z(ee);export{ee as default};
