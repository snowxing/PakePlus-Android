import{d as f,l as b,w as g,o as y,c as i,a as v,G as k,k as h,r as w,m as _,h as x,au as p,b as d,i as C,ad as D,_ as V,bb as F}from"./index-5kp1FiRg.js";const N=f({__name:"eventSearchForm",props:{form:{default:{}}},emits:["update:form"],setup(m,{emit:c}){const u=m,t=c,n=b({...u.form});return g(n,o=>{t("update:form",o)},{deep:!0}),y(()=>{}),(o,s)=>{const e=k;return v(),i(e,{modelValue:n.event_name,"onUpdate:modelValue":s[0]||(s[0]=a=>n.event_name=a),type:"text",name:"text",label:"",placeholder:"请输入事件名称"},null,8,["modelValue"])}}}),B=f({__name:"eventHandling",setup(m){async function c({pageNum:e,form:a}){const r=await F({page:e,...a});return{total:Number(r.count),data:r.data}}const{routerPush:u}=h(),t=w({name:"",plan_id:"",set_etp_id:""}),n=[{icon:"search",key:"search"}];function o(e){const a=[{label:"公司",value:e.etp_id_name},{label:"传感器",value:e.sensor_name},{label:"监控对象",value:e.target_name},{label:"事件名称",value:e.event_name},{label:"现场处置措施",value:e.emergency_content},{label:"应急预案",value:e.plan_name},{label:"处置人",value:e.staff},{label:"工号",value:e.account},{label:"部门",value:e.department_name},{label:"联系方式",value:e.contact},{label:"紧急联系方式",value:e.emergency_contact}];u("emergencyDetail",{detail:JSON.stringify(a)})}const s=[{title:"事件名称",key:"event_name"},{title:"处置人",key:"staff"},{title:"联系方式",key:"contact"}];return(e,a)=>{const r=V;return v(),i(r,{form:d(t),"onUpdate:form":a[1]||(a[1]=l=>p(t)?t.value=l:null),columns:s,request:c,floating:n,onOnRowClick:o},{"cell-record":_(({row:l})=>[C("div",null,D(l.record==="2"?"已备案":"未备案"),1)]),searchForm:_(()=>[x(N,{form:d(t),"onUpdate:form":a[0]||(a[0]=l=>p(t)?t.value=l:null)},null,8,["form"])]),_:1},8,["form"])}}});export{B as _};
