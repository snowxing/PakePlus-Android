import{d as f,l as x,w as g,g as v,a as b,F as V,h as l,G as F,b as p,B as U,r as _,_ as B,m as h,aq as C,x as D,z as Y,v as $,e as w}from"./index-5kp1FiRg.js";import j from"./detail-ew4YeckH.js";import{b as L}from"./accident-mBQzO3bB.js";import{t as N}from"./map-CcCcE9hR.js";import{u as S}from"./useTabsListener-CnvSNM1v.js";import"./Detail-CBGWh8FM.js";/* empty css                                                               */const T=f({__name:"AccidentSearchForm",props:{form:{}},emits:["update:form"],setup(d,{emit:o}){const n=d,c=o,a=x({...n.form});return g(a,m=>{c("update:form",m)},{deep:!0}),(m,s)=>{const i=F,e=U;return b(),v(V,null,[l(i,{modelValue:p(a).name,"onUpdate:modelValue":s[0]||(s[0]=t=>p(a).name=t),type:"text",name:"text",label:"事故名称",placeholder:"请输入事故名称"},null,8,["modelValue"]),l(e,{modelValue:p(a).date,"onUpdate:modelValue":s[1]||(s[1]=t=>p(a).date=t),format:"YYYY-MM-DD",label:"发生时间",placeholder:"请选择"},null,8,["modelValue"])],64)}}}),q=f({__name:"AccidentList",setup(d){async function o({pageNum:e,form:t}){const r=await L({page:e,...t});return{total:Number(r.count),data:r.data}}function n(e){const t=N.find(r=>+r.value==+e);return t?t.label:e}const c=[{title:"事发部门",key:"input_dept",width:"20%",align:"center"},{title:"事故地点",key:"input_location",width:"22%"},{title:"伤害程度",key:"select_injury_level",width:"20%",align:"center"},{title:"完成时间",key:"date_completion_time",width:"25%",align:"right"}],a=_(!1),m=_([]);function s(e){a.value=!0;const t={5:"无伤",1:"轻微伤",2:"轻伤",3:"重伤",4:"死亡"};m.value=[{label:"事故/事件名称",value:e.name},{label:"事故部门",value:e.department},{label:"发生时间",value:e.happen_date},{label:"人员伤害类型",value:t[e.hurt_type]},{label:"直接经济损失(万元)",value:e.loss},{label:"事故/事件等级",value:e.level},{label:"事故/事件类型",value:n(e.accident_type)},{label:"备注",value:e.remarks},{label:"附件",value:e.files?JSON.parse(e.files).join(""):"",renderType:"list"}]}const i=_({name:"",date:""});return(e,t)=>{const r=B,k=C;return b(),v("div",null,[l(r,{form:i.value,"onUpdate:form":t[1]||(t[1]=u=>i.value=u),columns:c,request:o,onOnRowClick:s},{searchForm:h(()=>[l(T,{form:i.value,"onUpdate:form":t[0]||(t[0]=u=>i.value=u)},null,8,["form"])]),_:1},8,["form"]),l(k,{show:a.value,"onUpdate:show":t[2]||(t[2]=u=>a.value=u),position:"bottom",style:{height:"70%"}},{default:h(()=>[l(j,{items:m.value},null,8,["items"])]),_:1},8,["show"])])}}}),A={class:"flex-center h-[100vh] w-100% items-center"},y=f({__name:"index",setup(d){const o=_("");return S("accidentList-click-tab",n=>{o.value=n.name}),(n,c)=>(b(),v("div",A,[D(l(q,null,null,512),[[Y,o.value==="1"]])]))}});typeof w=="function"&&w(y);const P=$(y,[["__scopeId","data-v-e70f9118"]]);export{P as default};
