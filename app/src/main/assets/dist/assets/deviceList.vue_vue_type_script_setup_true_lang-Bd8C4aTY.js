import{d as v,j as g,r as b,l as k,w as V,o as C,g as w,a as y,h as s,T as x,B as U,F as h,k as F,c as j,m as d,au as _,b as f,I as B,_ as L}from"./index-5kp1FiRg.js";import{g as N}from"./equipmentLedger-D42jtka8.js";import{g as O}from"./index-BpTLWCN6.js";const R=v({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(p,{emit:u}){const i=p,n=u;g();const r=b([]),l=k({...i.form});V(l,e=>{n("update:form",e)},{deep:!0});async function c(){const e=await O();r.value=e.data||[]}return C(()=>{c()}),(e,a)=>{const o=x,m=U;return y(),w(h,null,[s(o,{"model-value":l.set_etp_id,"form-create-inject":{options:r.value},placeholder:"请选择公司","onUpdate:modelValue":a[0]||(a[0]=t=>l.set_etp_id=t)},null,8,["model-value","form-create-inject"]),s(m,{modelValue:l.start_date,"onUpdate:modelValue":a[1]||(a[1]=t=>l.start_date=t),label:"开始时间"},null,8,["modelValue"]),s(m,{modelValue:l.end_date,"onUpdate:modelValue":a[2]||(a[2]=t=>l.end_date=t),label:"结束时间"},null,8,["modelValue"])],64)}}}),q=v({__name:"deviceList",setup(p){async function u({pageNum:e,form:a}){const o=await N({page:e,...a});return{total:Number(o.count),data:o.data}}const{routerPush:i}=F(),n=b({start_date:"",end_date:"",doc_type:"2",set_etp_id:""}),r=[{icon:"search",key:"search"}];function l(e){const a=[{label:"名称",value:e.name},{label:"所在区域",value:e.area_name},{label:"具体位置",value:e.location},{label:"责任部门",value:e.department_name},{label:"责任人",value:e.staff_name},{label:"状态",value:e.status},{label:"规格",value:e.specification},{label:"检验时间",value:e.inspection_cycle},{label:"有限期限",value:e.mdate},{label:"检验部门",value:e.mdepartment_name},{label:"检验人员",value:e.mperson},{label:"下次检验日期",value:e.mdate},{label:"检验周期",value:e.cycle},{label:"报警阀值",value:e.alarm_threshold},{label:"安装日期",value:e.install_date},{label:"备注",value:e.note},{label:"附件",value:e.files?JSON.parse(e.files):"",renderType:"image"}];i("siteDetail",{detail:JSON.stringify(a)})}const c=[{title:"名称",key:"name"},{title:"责任人",key:"staff_name"},{title:"状态",key:"status"}];return(e,a)=>{const o=B,m=L;return y(),j(m,{form:f(n),"onUpdate:form":a[1]||(a[1]=t=>_(n)?n.value=t:null),columns:c,request:u,floating:r,onOnRowClick:l},{"cell-files":d(({row:t})=>[s(o,{"class-prefix":"iconfujian",class:"iconfont menu-icon",name:"extra",alt:t.files},null,8,["alt"])]),searchForm:d(()=>[s(R,{form:f(n),"onUpdate:form":a[0]||(a[0]=t=>_(n)?n.value=t:null)},null,8,["form"])]),_:1},8,["form"])}}});export{R as _,q as a};
