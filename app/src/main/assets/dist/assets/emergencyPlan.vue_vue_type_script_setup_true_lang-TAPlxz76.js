import{d as _,l as v,w as x,o as b,c as f,a as y,G as k,k as g,r as h,m as d,h as w,au as i,b as m,i as C,ad as V,_ as F,b6 as N}from"./index-5kp1FiRg.js";const R=_({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(c,{emit:p}){const u=c,a=p,l=v({...u.form});return x(l,n=>{a("update:form",n)},{deep:!0}),b(()=>{}),(n,r)=>{const e=k;return y(),f(e,{modelValue:l.name,"onUpdate:modelValue":r[0]||(r[0]=t=>l.name=t),type:"text",name:"text",label:"",placeholder:"请输入名称"},null,8,["modelValue"])}}}),D=_({__name:"emergencyPlan",setup(c){async function p({pageNum:e,form:t}){const s=await N({page:e,...t});return{total:Number(s.count),data:s.data}}const{routerPush:u}=g(),a=h({name:"",plan_id:"",set_etp_id:""}),l=[{icon:"search",key:"search"}];function n(e){const t=[{value:e.name,label:"预案名称",type:"text"},{value:e.no,label:"预案编号",type:"text"},{value:e.plan_type,label:"预案类型",type:"text"},{value:e.updated_at,label:"修订时间",type:"text"},{value:e.record_time,label:"备案时间",type:"text"},{value:e.record,label:"备案情况",type:"text"},{value:e.version,label:"版本号",type:"text"},{value:e.department,label:"责任部门",type:"text"},{value:e.post,label:"岗位",type:"text"},{value:e.note,label:"备注",type:"text"},{value:e.files,label:"文件",renderType:"image"}];u("emergencyDetail",{detail:JSON.stringify(t)})}const r=[{title:"名称",key:"name",width:"25%"},{title:"备案情况",key:"plan_type",width:"20%"},{title:"类型",key:"record",width:"20%"},{title:"备案时间",key:"record_time",width:"20%"}];return(e,t)=>{const s=F;return y(),f(s,{form:m(a),"onUpdate:form":t[1]||(t[1]=o=>i(a)?a.value=o:null),columns:r,request:p,floating:l,onOnRowClick:n},{"cell-record":d(({row:o})=>[C("div",null,V(o.record==="2"?"已备案":"未备案"),1)]),searchForm:d(()=>[w(R,{form:m(a),"onUpdate:form":t[0]||(t[0]=o=>i(a)?a.value=o:null)},null,8,["form"])]),_:1},8,["form"])}}});export{D as _};
