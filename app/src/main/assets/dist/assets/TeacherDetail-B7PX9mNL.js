import{d as x,r as _,w as S,g as h,a as g,i as s,F as U,E as N,h as o,G as j,ac as E,H as C,m as y,J as M,aj as T,ae as F,ad as p,p as b,v as $,u as H,j as Y,o as A,a9 as G,C as K,D as O,b as z,aq as J,bp as L,bA as P,e as D}from"./index-5kp1FiRg.js";import{l as R,w as Q,p as W}from"./trainingClassList-BlPv_jAa.js";const X={class:"chat-box"},Z={class:"message-list"},ee={class:"message-meta"},te={class:"time"},se={class:"message-content"},ae={class:"chat-input"},oe=x({__name:"v-chat",props:{currentUserId:{},currentUserName:{},modelValue:{}},emits:["update:modelValue","send"],setup(V,{emit:c}){const a=V,r=c,u=_([...a.modelValue||[]]),n=_("");S(()=>a.modelValue,t=>{u.value=[...t].sort((e,i)=>b(e.time).valueOf()-b(i.time).valueOf()),T(()=>v())},{deep:!0});function d(){if(!n.value.trim())return;const t={type:a.currentUserId,user:a.currentUserName,message:n.value,time:Date.now()};u.value.push(t),r("update:modelValue",u.value),r("send",t),n.value="",T(()=>v())}function v(){const t=document.querySelector(".message-list");t&&(t.scrollTop=t.scrollHeight)}function w(t){return b(t).format("YYYY-MM-DD HH:mm:ss")}return(t,e)=>{const i=j,m=C;return g(),h("div",X,[s("div",Z,[(g(!0),h(U,null,N(u.value,l=>(g(),h("div",{key:l.time,class:F(["message",[l.type!==1?"mine":"other"]])},[s("div",ee,[s("div",null,p(l.user),1),s("div",te,p(w(l.time)),1)]),s("div",se,p(l.message),1)],2))),128))]),s("div",ae,[o(i,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),placeholder:"输入消息...",clearable:"",onKeyup:E(d,["enter"])},null,8,["modelValue"]),o(m,{type:"primary",onClick:d},{default:y(()=>[...e[1]||(e[1]=[M(" 发送 ",-1)])]),_:1})])])}}}),ne=$(oe,[["__scopeId","data-v-a8451aaa"]]),le={class:"left-image-right-card"},ie={class:"layout-container"},ue={class:"left-image"},re={class:"right-card"},ce={class:"content"},de={class:"content"},me={class:"message-section"},k=x({__name:"TeacherDetail",setup(V){const c=_(!1),a=_({}),r=H(),{userInfo:u}=Y(),n=_([]);function d(){Q({teacher_id:r.query.id,student_id:u.id}).then(t=>{n.value=t})}A(()=>{R({id:r.query.id}).then(t=>{a.value=t.data}),d()});function v(t){var e;return t?(e=L.find(i=>i.id.toString()===t.toString()))==null?void 0:e.name:"-"}function w(t){W(P({teacher_id:r.query.id,message:t.message})).then(()=>{d()})}return(t,e)=>{const i=G,m=K,l=O,q=C,I=ne,B=J;return g(),h(U,null,[s("div",le,[s("div",ie,[s("div",ue,[o(i,{src:a.value.cert_file,fit:"cover",radius:"8",class:"teacher-image"},null,8,["src"])]),s("div",re,[o(l,{class:"info-card"},{default:y(()=>[o(m,{title:"姓名",value:a.value.name},null,8,["value"]),o(m,{title:"专业",value:a.value.major},null,8,["value"]),o(m,{title:"学历",value:v(a.value.edu)},null,8,["value"])]),_:1})])]),e[4]||(e[4]=s("h3",{title:"个人简介",class:"section-title"}," 个人简介 ",-1)),s("div",ce,p(a.value.swq_desc),1),e[5]||(e[5]=s("h3",{title:"个人著作",class:"section-title"}," 个人著作 ",-1)),s("div",de,p(a.value.swq_literate),1),e[6]||(e[6]=s("h3",{title:"资质证书",class:"section-title"}," 资质证书 ",-1)),o(i,{src:a.value.photo,class:"teacher-image"},null,8,["src"]),s("div",me,[o(q,{type:"primary",onClick:e[0]||(e[0]=f=>c.value=!0)},{default:y(()=>[...e[3]||(e[3]=[M(" 在线留言 ",-1)])]),_:1})])]),o(B,{show:c.value,"onUpdate:show":e[2]||(e[2]=f=>c.value=f),position:"bottom",style:{height:"80%"}},{default:y(()=>[o(I,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=f=>n.value=f),"current-user-name":z(u).name,"current-user-id":1,onSend:w},null,8,["modelValue","current-user-name"])]),_:1},8,["show"])],64)}}});typeof D=="function"&&D(k);const ve=$(k,[["__scopeId","data-v-f383bda7"]]);export{ve as default};
