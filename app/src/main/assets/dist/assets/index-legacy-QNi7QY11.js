System.register(["./useTabsListener-legacy-BqsF0NKt.js","./index-legacy-CK9unWWd.js","./config-legacy-CMljs_xA.js"],function(e,l){"use strict";var a,t,n,o,u,r,c,i,s,m,v,d,p,b,_,f,y,g,h,k,x,w,N,O,j,U,S;return{setters:[e=>{a=e.u},e=>{t=e.d,n=e.j,o=e.r,u=e.l,r=e.w,c=e.o,i=e.g,s=e.a,m=e.h,v=e.G,d=e.U,p=e.F,b=e.k,_=e.c,f=e.m,y=e.au,g=e.b,h=e.i,k=e.av,x=e.aw,w=e.ad,N=e._,O=e.ax,j=e.y,U=e.e},e=>{S=e.c}],execute:function(){const l=[{title:"名称",className:"three",key:"name",uname:"",width:160,type:"selection"},{title:"危险源",className:"three",key:"risk_name_id",width:100,uname:"",type:"selection"},{title:"风险等级",className:"three",key:"level_name",uname:"",width:90,type:"selection"}],q={1:{label:"重大风险",color:"red"},2:{label:"较大风险",color:"#ff6100"},3:{label:"一般风险",color:"#cccc21"},4:{label:"低风险",color:"#0000e1"}},J=t({__name:"SearchForm",props:{form:{default:{}}},emits:["update:form"],setup(e,{emit:l}){const a=e,t=l;n();const b=o([]);o([]),o([]),o({label:"title",value:"node_id",children:"child"});const _=u({...a.form});return r(_,e=>{t("update:form",e)},{deep:!0}),r(()=>a.form,e=>{Object.assign(_,e)},{deep:!0,immediate:!0}),c(()=>{b.value=S.get("risk_type").map(e=>({text:e.name,value:e.id}))}),(e,l)=>{const a=v,t=d;return s(),i(p,null,[m(a,{modelValue:_.name,"onUpdate:modelValue":l[0]||(l[0]=e=>_.name=e),type:"text",name:"text",placeholder:"请输入名称"},null,8,["modelValue"]),m(t,{value:_.level_id,"onUpdate:value":l[1]||(l[1]=e=>_.level_id=e),placeholder:"风险级别",columns:b.value},null,8,["value","columns"])],64)}}}),P={__name:"DeviceBox",setup(e){const{routerPush:a}=b(),t=o({name:"",level_id:""}),n=[{icon:"search",key:"search"}];async function u({pageNum:e}={pageNum:1}){const l={page:e,doc_type:43,sign:1,...t.value},a=await O(l);return{total:Number(a.count)||0,data:a.data||[]}}function r(e){e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"检查项目",value:e.task_step},{label:"风险值",value:e.level_num},{label:"风险等级",value:x[e.level_id]?.label},{label:"危险源",value:e.risk_name_id},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"责任岗位",value:e.post_name},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"备注",value:e.note},{label:"附件",value:e.files,renderType:"image"}];a("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,a)=>{const o=N;return s(),_(o,{form:g(t),"onUpdate:form":a[1]||(a[1]=e=>y(t)?t.value=e:null),columns:g(l),request:u,floating:n,onOnRowClick:r},{"cell-level_name":f(({row:e})=>[h("div",{class:"text-12 text-white px-2 py-1 rounded",style:k({color:g(x)[e.level_id]?.color||"#ccc"})},w(g(x)[e.level_id]?.label),5)]),searchForm:f(()=>[m(J,{form:g(t),"onUpdate:form":a[0]||(a[0]=e=>y(t)?t.value=e:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},F={__name:"WorkBox",setup(e){const{routerPush:a}=b(),t=o({name:"",level_id:""}),n=[{icon:"search",key:"search"}];async function u({pageNum:e}={pageNum:1}){const l={page:e,doc_type:40,sign:1,...t.value},a=await O(l);return{total:Number(a.count)||0,data:a.data||[]}}function r(e){e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"作业步骤",value:e.task_step},{label:"风险值",value:e.level_num},{label:"风险等级",value:q[e.level_id]?.label},{label:"危险源",value:e.risk_name_id},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"责任岗位",value:e.post_name},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"备注",value:e.note},{label:"附件",value:e.files,type:"img"}];a("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,a)=>{const o=N;return s(),_(o,{form:g(t),"onUpdate:form":a[1]||(a[1]=e=>y(t)?t.value=e:null),columns:g(l),request:u,floating:n,onOnRowClick:r},{"cell-level_name":f(({row:e})=>[h("div",{class:"text-12px text-white px-2 py-1 rounded",style:k({color:g(q)[e.level_id]?.color||"#ccc"})},w(g(q)[e.level_id]?.label),5)]),searchForm:f(()=>[m(J,{form:g(t),"onUpdate:form":a[0]||(a[0]=e=>y(t)?t.value=e:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},D={__name:"RegionBox",setup(e){const{routerPush:a}=b(),t=o({name:"",level_id:""}),n=[{icon:"search",key:"search"}];async function u({pageNum:e}={pageNum:1}){const l={page:e,category_id:6814682,sign:1,...t.value},a=await O(l);return{total:Number(a.count)||0,data:a.data||[]}}function r(e){e.files=e.files?JSON.parse(e.files).splice(","):"";const l=[{label:"公司",value:e.etp_id_name},{label:"名称",value:e.name},{label:"标识编码",value:e.code},{label:"类别",value:e.category_detail},{label:"风险值",value:e.level_num},{label:"危险源",value:e.risk_name_id},{label:"作业步骤",value:e.task_step},{label:"风险等级",value:q[e.level_id]?.label},{label:"主要后果",value:e.main_res},{label:"工程措施",value:e.project_policy},{label:"教育培训措施",value:e.stardard},{label:"管理措施",value:e.policy},{label:"个人安全措施",value:e.safe_policy},{label:"应急处置措施",value:e.emergency_policy},{label:"管控层级",value:e.control_name},{label:"检查频次",value:e.frequency},{label:"管控单位",value:e.department_data},{label:"责任岗位",value:e.post_name},{label:"备注",value:e.note},{label:"附件",value:e.files,renderType:"image"}];a("doublePreventionDetail",{detail:JSON.stringify(l)})}return(e,a)=>{const o=N;return s(),_(o,{form:g(t),"onUpdate:form":a[1]||(a[1]=e=>y(t)?t.value=e:null),columns:g(l),request:u,floating:n,onOnRowClick:r},{"cell-level_name":f(({row:e})=>[h("div",{class:"text-12px text-white px-2 py-1 rounded",style:k({color:g(q)[e.level_id]?.color||"#ccc"})},w(g(q)[e.level_id]?.label),5)]),searchForm:f(()=>[m(J,{form:g(t),"onUpdate:form":a[0]||(a[0]=e=>y(t)?t.value=e:null)},null,8,["form"])]),_:1},8,["form","columns"])}}},R={class:"flex-center w-100% items-center"},B=e("default",t({__name:"index",setup(e){const l=o("risk-devicelist");return a("risk-click-tab",e=>{l.value=e.name}),(e,a)=>(s(),i("div",R,["risk-devicelist"===g(l)?(s(),_(P,{key:0})):j("",!0),"job-list"===g(l)?(s(),_(F,{key:1})):j("",!0),"risk-arealist"===g(l)?(s(),_(D,{key:2})):j("",!0)]))}}));"function"==typeof U&&U(B)}}});
