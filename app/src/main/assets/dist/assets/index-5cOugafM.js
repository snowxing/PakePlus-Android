import{d as U,l as N,r as h,o as S,A as P,w as K,g,a as w,F as W,h as o,G as j,b as t,U as L,k as X,i as v,J as R,y as Y,ad as C,I as Z,bB as ee,bA as Q,v as te,j as ne,_ as oe,au as $,m as _,aq as ae,a2 as se,D as le,bE as ie,H as re,x as D,z as I,e as A}from"./index-5kp1FiRg.js";import{_ as ue}from"./v-uploader.vue_vue_type_script_setup_true_lang-C6PQErmB.js";import{e as de,f as B,h as me}from"./trainingClassList-BlPv_jAa.js";import{_ as ce}from"./TrainCourseList.vue_vue_type_script_setup_true_lang-xnyLpYpU.js";import{u as pe}from"./useTabsListener-CnvSNM1v.js";const _e=U({__name:"TrainQuestionSearch",props:{form:{}},emits:["update:form"],setup(p,{emit:l}){const s=p,f=l,i=N({...s.form}),r=h([]);return S(async()=>{P({id:"22",deep:1}).then(n=>{r.value=n.map(u=>({text:u.title,value:u.node_id}))})}),K(i,n=>{f("update:form",n)},{deep:!0}),(n,u)=>{const d=j,k=L;return w(),g(W,null,[o(d,{modelValue:t(i).title,"onUpdate:modelValue":u[0]||(u[0]=m=>t(i).title=m),type:"text",name:"text",label:"标题",placeholder:"请输入查询内容"},null,8,["modelValue"]),o(k,{value:t(i).industry_id,"onUpdate:value":u[1]||(u[1]=m=>t(i).industry_id=m),label:"行业分类",columns:t(r)},null,8,["value","columns"])],64)}}}),fe={class:"card-title"},ye={class:"card-row"},ve={class:"card-col"},he={class:"card-col"},ke={class:"card-footer"},be=U({__name:"RowCardRender",props:{item:{},index:{},type:{}},emits:["clickItem"],setup(p,{emit:l}){const s=p,f=l,{title:i,keywords:r,industry_name:n,content:u,...d}=s.item,{routerPush:k}=X();function m(b){s.type==="question"?ee({title:"标题",message:"确认是否删除"}).then(()=>{de(Q({id:s.item.id})).then(()=>{f("clickItem",s.item)})}).catch(()=>{}):k("superTeacherDetail",{id:b.id})}return(b,x)=>{const V=Z;return w(),g("div",{class:"custom-card van-hairline--bottom",onClick:x[0]||(x[0]=T=>m(s.item))},[v("div",fe,[R(" 标题："+C(t(i))+" ",1),s.type==="question"?(w(),g("span",{key:0,style:{float:"right"},onClick:m},[o(V,{name:"delete-o"})])):Y("",!0)]),v("div",ye,[v("div",ve," 行业："+C(t(n)),1),v("div",he," 关键字："+C(t(r)),1)]),v("div",ke," 提问详情："+C(t(u)),1)])}}}),ge=te(be,[["__scopeId","data-v-3f72c0e6"]]),we={style:{margin:"16px"}},xe=U({__name:"TrainQuestionList",props:{type:{}},setup(p){const l=p,{userInfo:s}=ne(),f={question:{api:B,params:{staff_id:s.id}},answer:{api:B,params:{}}};async function i({pageNum:c,form:e}){const{api:F,params:y}=f[l.type],q=await F({...y,page:c,page_size:20,...e});return{total:Number(q.count),data:q.data}}const r=h({title:"",industry_id:""}),n=N({title:"",keywords:"",content:"",industry_id:"",info_price:0,attachment:[],is_anonymous:!1}),u=l.type==="question"?[{icon:"add",key:"add"},{icon:"search",key:"search"}]:[{icon:"search",key:"search"}],d=h(!1);function k(c){c.key==="add"&&(d.value=!0)}function m(c){me(Q(Object.assign({},n,{is_anonymous:n.is_anonymous===!0?1:2,attachment:n.attachment.map(e=>e.url).join(",")}))).then(()=>{d.value=!1})}const b=h([]);S(async()=>{P({id:"22",deep:1}).then(c=>{b.value=c.map(e=>({text:e.title,value:e.node_id}))})});function x(){n.attachment=[]}const V=h(null);function T(c){var e;l.type==="question"&&(d.value=!1,(e=V.value)==null||e.reload())}return(c,e)=>{const F=oe,y=j,q=L,z=ue,E=ie,G=le,M=re,O=se,H=ae;return w(),g("div",null,[o(F,{ref_key:"tableRef",ref:V,form:t(r),"onUpdate:form":e[1]||(e[1]=a=>$(r)?r.value=a:null),request:i,floating:t(u),onOnFloatingClick:k},{row:_(({item:a,index:J})=>[o(ge,{item:a,index:J,type:p.type,onClickItem:T},null,8,["item","index","type"])]),searchForm:_(()=>[o(_e,{form:t(r),"onUpdate:form":e[0]||(e[0]=a=>$(r)?r.value=a:null)},null,8,["form"])]),_:1},8,["form","floating"]),o(H,{show:t(d),"onUpdate:show":e[8]||(e[8]=a=>$(d)?d.value=a:null),position:"bottom",style:{height:"70%"},onClose:x},{default:_(()=>[o(O,{onSubmit:m},{default:_(()=>[o(G,{inset:""},{default:_(()=>[o(y,{modelValue:t(n).title,"onUpdate:modelValue":e[2]||(e[2]=a=>t(n).title=a),name:"title",label:"标题",placeholder:"标题",rules:[{required:!0,message:"请填写标题"}]},null,8,["modelValue"]),o(y,{modelValue:t(n).keywords,"onUpdate:modelValue":e[3]||(e[3]=a=>t(n).keywords=a),name:"keywords",label:"关键字",placeholder:"关键字",rules:[{required:!0,message:"请填写关键字"}]},null,8,["modelValue"]),o(q,{value:t(n).industry_id,"onUpdate:value":e[4]||(e[4]=a=>t(n).industry_id=a),name:"industry_id",columns:t(b),label:"行业/技术分类",placeholder:"行业/技术分类",rules:[{required:!0,message:"请选择行业/技术分类"}]},null,8,["value","columns"]),o(y,{modelValue:t(n).content,"onUpdate:modelValue":e[5]||(e[5]=a=>t(n).content=a),type:"textarea",name:"content",label:"提问内容",placeholder:"提问内容",rules:[{required:!0,message:"请填写提问内容"}]},null,8,["modelValue"]),o(z,{modelValue:t(n).attachment,"onUpdate:modelValue":e[6]||(e[6]=a=>t(n).attachment=a),multiple:!0,"max-count":5},null,8,["modelValue"]),o(y,{"label-width":"130",name:"is_anonymous"},{input:_(()=>[o(E,{modelValue:t(n).is_anonymous,"onUpdate:modelValue":e[7]||(e[7]=a=>t(n).is_anonymous=a),shape:"square"},null,8,["modelValue"]),e[9]||(e[9]=R(" 不显示我的名称 ",-1))]),_:1})]),_:1}),v("div",we,[o(M,{round:"",block:"",type:"primary","native-type":"submit"},{default:_(()=>[...e[10]||(e[10]=[R(" 提交 ",-1)])]),_:1})])]),_:1})]),_:1},8,["show"])])}}}),Ve={class:"flex-center h-[100vh] w-100% items-center"},qe=U({__name:"index",setup(p){const l=h("1");return pe("secure-click-tab",s=>{l.value=s.name}),(s,f)=>{const i=xe;return w(),g("div",Ve,[D(o(ce,{type:"2",teach_type:"2"},null,512),[[I,l.value==="1"]]),D(o(i,{type:"question"},null,512),[[I,l.value==="2"]]),D(o(i,{type:"answer"},null,512),[[I,l.value==="3"]])])}}});typeof A=="function"&&A(qe);export{qe as default};
